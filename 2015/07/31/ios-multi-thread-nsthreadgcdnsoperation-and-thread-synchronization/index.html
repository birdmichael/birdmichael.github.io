<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="concurrent,Deadlock,dispatch queue,dispatch_after,GCD,Global dispatch queue,NSOperation,NSThread,serial,临界区,多线程,死锁," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="&amp;#x6982;&amp;#x8FF0;&amp;#x5927;&amp;#x5BB6;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;,&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x5F88;&amp;#x591A;app&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x4E2D;&amp;#x5F88;&amp;#x5173;&amp;#x6CE8;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F53;&amp;#x9A8C;&amp;#x5">
<meta property="og:type" content="article">
<meta property="og:title" content="ios多线程之NSThread,GCD,NSOperation以及线程同步">
<meta property="og:url" content="http://yoursite.com/2015/07/31/ios-multi-thread-nsthreadgcdnsoperation-and-thread-synchronization/index.html">
<meta property="og:site_name" content="BirdMichael">
<meta property="og:description" content="&amp;#x6982;&amp;#x8FF0;&amp;#x5927;&amp;#x5BB6;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;,&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x5F88;&amp;#x591A;app&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x4E2D;&amp;#x5F88;&amp;#x5173;&amp;#x6CE8;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F53;&amp;#x9A8C;&amp;#x5">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/202333357067475.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-1@2x.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-2@2x.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-3@2x.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-4@2x.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/4673_140428093515_1.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/31313131_3123131.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/4673_140428093433_1.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150803-3@2x.png">
<meta property="og:image" content="http://blog.cnbluebox.com/images/priority-inversion.png">
<meta property="og:image" content="http://birdmichael.com/wp-content/uploads/2015/07/1359821609_3145.png">
<meta property="og:image" content="http://blog.cnbluebox.com/images/NSRunLoop.gif">
<meta property="og:updated_time" content="2016-07-25T06:30:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ios多线程之NSThread,GCD,NSOperation以及线程同步">
<meta name="twitter:description" content="&amp;#x6982;&amp;#x8FF0;&amp;#x5927;&amp;#x5BB6;&amp;#x90FD;&amp;#x77E5;&amp;#x9053;,&amp;#x6211;&amp;#x4EEC;&amp;#x5728;&amp;#x5F88;&amp;#x591A;app&amp;#x7684;&amp;#x4F7F;&amp;#x7528;&amp;#x4E2D;&amp;#x5F88;&amp;#x5173;&amp;#x6CE8;&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x4F53;&amp;#x9A8C;&amp;#x5">
<meta name="twitter:image" content="http://birdmichael.com/wp-content/uploads/2015/07/202333357067475.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2015/07/31/ios-multi-thread-nsthreadgcdnsoperation-and-thread-synchronization/"/>

  <title> ios多线程之NSThread,GCD,NSOperation以及线程同步 | BirdMichael </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">BirdMichael</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                ios多线程之NSThread,GCD,NSOperation以及线程同步
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-07-31T17:02:29+08:00" content="2015-07-31">
              2015-07-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IOS/" itemprop="url" rel="index">
                    <span itemprop="name">IOS</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/IOS/Xcode/" itemprop="url" rel="index">
                    <span itemprop="name">Xcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="&#x6982;&#x8FF0;"><a href="#&#x6982;&#x8FF0;" class="headerlink" title="&#x6982;&#x8FF0;"></a>&#x6982;&#x8FF0;</h2><p>&#x5927;&#x5BB6;&#x90FD;&#x77E5;&#x9053;,&#x6211;&#x4EEC;&#x5728;&#x5F88;&#x591A;app&#x7684;&#x4F7F;&#x7528;&#x4E2D;&#x5F88;&#x5173;&#x6CE8;&#x7684;&#x4E00;&#x4E2A;&#x4F53;&#x9A8C;&#x5C31;&#x662F;app&#x7684;&#x6D41;&#x7545;&#x6027;&#x4EE5;&#x53CA;&#x7528;&#x6237;&#x7B49;&#x5F85;&#x65F6;&#x95F4;.&#x800C;&#x8FD9;&#x4E24;&#x70B9;&#x5176;&#x5B9E;&#x6700;&#x6839;&#x672C;&#x5C31;&#x7684;&#x5C31;&#x662F;&#x8BA9;&#x7A0B;&#x5E8F;&#x5DF2;&#x6700;&#x5C11;&#x7684;&#x65F6;&#x95F4;&#x5B8C;&#x6210;&#x8FD0;&#x7B97;.&#x65E0;&#x8BBA;&#x662F;&#x54EA;&#x79CD;&#x8BED;&#x8A00;&#x5F00;&#x53D1;&#x7684;&#x7A0B;&#x5E8F;&#x6700;&#x7EC8;&#x5F80;&#x5F80;&#x8F6C;&#x6362;&#x6210;&#x6C47;&#x7F16;&#x8BED;&#x8A00;&#x8FDB;&#x800C;&#x89E3;&#x91CA;&#x6210;&#x673A;&#x5668;&#x7801;&#x6765;&#x6267;&#x884C;.&#x4F46;&#x662F;&#x673A;&#x5668;&#x7801;&#x662F;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;,&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x591A;&#x6B65;&#x64CD;&#x4F5C;&#x53EA;&#x80FD;&#x4E00;&#x6B65;&#x6B65;&#x6309;&#x987A;&#x5E8F;&#x9010;&#x4E2A;&#x6267;&#x884C;.&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C31;&#x4F1A;&#x5F15;&#x5165;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;.&#x7136;&#x540E;&#x8FD9;&#x91CC;&#x521D;&#x5B66;&#x8005;&#x5F88;&#x5BB9;&#x6613;&#x6709;&#x4E00;&#x4E2A;&#x8BEF;&#x533A;&#x662F;:(&#x201C;<strong>&#x591A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;&#x4F1A;&#x63D0;&#x9AD8;&#x5355;&#x4E2A;&#x7B97;&#x6CD5;&#x672C;&#x8EAB;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;</strong>.&#x201D;&#x8FD9;&#x662F;&#x975E;&#x5E38;&#x4E25;&#x91CD;&#x7684;&#x4E00;&#x4E2A;<span style="color: #ff0000;"><strong>&#x9519;&#x8BEF;</strong>.<span style="color: #000000;">&#x591A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;&#x5E76;&#x4E0D;&#x4F1A;&#x548C;&#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;&#x6709;&#x5173;&#x7CFB;,&#x53EA;&#x662F;&#x5C06;&#x4E00;&#x4E9B;&#x8017;&#x65F6;&#x7684;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6267;&#x884C;,&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x201D;&#x5E76;&#x884C;&#x201D;&#x8FD0;&#x7B97;</span></span>).&#x5BF9;&#x4E8E;&#x5355;&#x6838;&#x5904;&#x7406;&#x5668;,&#x53EF;&#x4EE5;&#x5C06;&#x591A;&#x4E2A;&#x6B65;&#x9AA4;&#x653E;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7EBF;&#x7A0B;,&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x7528;&#x6237;&#x5B8C;&#x6210;UI&#x64CD;&#x4F5C;&#x540E;&#x5176;&#x4ED6;&#x540E;&#x7EED;&#x4EFB;&#x52A1;&#x5728;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E2D;,&#x5F53;CPU&#x7A7A;&#x95F2;&#x65F6;&#x4F1A;&#x7EE7;&#x7EED;&#x6267;&#x884C;,&#x800C;&#x6B64;&#x65F6;&#x5BF9;&#x4E8E;&#x7528;&#x6237;&#x800C;&#x8A00;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;;&#x5BF9;&#x4E8E;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;,&#x5982;&#x679C;&#x7528;&#x6237;&#x5728;UI&#x7EBF;&#x7A0B;&#x4E2D;&#x5B8C;&#x6210;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#x4E4B;&#x540E;,&#x5176;&#x4ED6;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x5728;&#x522B;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x7EE7;&#x7EED;&#x6267;&#x884C;,&#x7528;&#x6237;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x5176;&#x4ED6;UI&#x64CD;&#x4F5C;,&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#x524D;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x540E;&#x7EED;&#x4EFB;&#x52A1;&#x53EF;&#x4EE5;&#x5206;&#x6563;&#x5230;&#x591A;&#x4E2A;&#x7A7A;&#x95F2;CPU&#x4E2D;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF08;&#x5F53;&#x7136;&#x5177;&#x4F53;&#x8C03;&#x5EA6;&#x987A;&#x5E8F;&#x8981;&#x6839;&#x636E;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x800C;&#x5B9A;&#xFF09;,&#x65E2;&#x89E3;&#x51B3;&#x4E86;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x53C8;&#x63D0;&#x9AD8;&#x4E86;&#x8FD0;&#x884C;&#x6548;&#x7387;.&#x82F9;&#x679C;&#x4ECE;iPad2 &#x5F00;&#x59CB;&#x4F7F;&#x7528;&#x53CC;&#x6838;A5&#x5904;&#x7406;&#x5668;(iPhone&#x4E2D;&#x4ECE;iPhone 4S&#x5F00;&#x59CB;&#x4F7F;&#x7528;),A7&#x4E2D;&#x8FD8;&#x52A0;&#x5165;&#x4E86;&#x534F;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x5982;&#x4F55;&#x5145;&#x5206;&#x53D1;&#x6325;&#x8FD9;&#x4E9B;&#x5904;&#x7406;&#x5668;&#x7684;&#x6027;&#x80FD;&#x786E;&#x5B9E;&#x503C;&#x5F97;&#x601D;&#x8003;.</p>
<h2 id="&#x591A;&#x7EBF;&#x7A0B;"><a href="#&#x591A;&#x7EBF;&#x7A0B;" class="headerlink" title="&#x591A;&#x7EBF;&#x7A0B;"></a>&#x591A;&#x7EBF;&#x7A0B;</h2><a id="more"></a>
<h3 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h3><p>&#x5F53;&#x7528;&#x6237;&#x64AD;&#x653E;&#x97F3;&#x9891;&#x3001;&#x4E0B;&#x8F7D;&#x8D44;&#x6E90;&#x3001;&#x8FDB;&#x884C;&#x56FE;&#x50CF;&#x5904;&#x7406;&#x65F6;&#x5F80;&#x5F80;&#x5E0C;&#x671B;&#x505A;&#x8FD9;&#x4E9B;&#x4E8B;&#x60C5;&#x7684;&#x65F6;&#x5019;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x88AB;&#x4E2D;&#x65AD;&#x6216;&#x8005;&#x5E0C;&#x671B;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#x66F4;&#x52A0;&#x987A;&#x7545;&#x3002;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x4E2D;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EA;&#x80FD;&#x505A;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#xFF0C;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x5904;&#x7406;&#x4E0D;&#x5B8C;&#x53E6;&#x4E00;&#x4EF6;&#x4E8B;&#x5C31;&#x4E0D;&#x80FD;&#x5F00;&#x59CB;&#xFF0C;&#x8FD9;&#x6837;&#x52BF;&#x5FC5;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;&#x65E9;&#x5728;&#x5355;&#x6838;&#x5904;&#x7406;&#x5668;&#x65F6;&#x671F;&#x5C31;&#x6709;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x591A;&#x7EBF;&#x7A0B;&#x66F4;&#x591A;&#x7684;&#x7528;&#x4E8E;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x9020;&#x6210;&#x7684;&#x7528;&#x6237;&#x7B49;&#x5F85;&#xFF08;&#x901A;&#x5E38;&#x662F;&#x64CD;&#x4F5C;&#x5B8C;UI&#x540E;&#x7528;&#x6237;&#x4E0D;&#x518D;&#x5E72;&#x6D89;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5728;&#x7B49;&#x5F85;&#x961F;&#x5217;&#x4E2D;&#xFF0C;CPU&#x4E00;&#x65E6;&#x7A7A;&#x95F2;&#x5C31;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x5176;&#x4ED6;UI&#x64CD;&#x4F5C;&#xFF09;&#xFF0C;&#x5176;&#x5904;&#x7406;&#x80FD;&#x529B;&#x5E76;&#x6CA1;&#x6709;&#x660E;&#x663E;&#x7684;&#x53D8;&#x5316;&#x3002;&#x5982;&#x4ECA;&#x65E0;&#x8BBA;&#x662F;&#x79FB;&#x52A8;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8FD8;&#x662F;PC&#x3001;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x662F;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x4E8E;&#x662F;&#x201C;&#x5E76;&#x884C;&#x8FD0;&#x7B97;&#x201D;&#x5C31;&#x66F4;&#x591A;&#x7684;&#x88AB;&#x63D0;&#x53CA;&#x3002;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5206;&#x6210;&#x591A;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x987A;&#x5E8F;&#x8981;&#x6C42;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x591A;&#x7EBF;&#x7A0B;&#x65E2;&#x80FD;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x53C8;&#x80FD;&#x5145;&#x5206;&#x5229;&#x7528;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#x8FD0;&#x884C;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x4E0B;&#x56FE;&#x53CD;&#x6620;&#x4E86;&#x4E00;&#x4E2A;&#x5305;&#x542B;8&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x4EFB;&#x52A1;&#x5728;&#x4E00;&#x4E2A;&#x6709;&#x4E24;&#x6838;&#x5FC3;&#x7684;CPU&#x4E2D;&#x521B;&#x5EFA;&#x56DB;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x5047;&#x8BBE;&#x6BCF;&#x4E2A;&#x6838;&#x5FC3;&#x6709;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;&#x6BCF;&#x4E2A;CPU&#x4E2D;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F1A;&#x4EA4;&#x66FF;&#x6267;&#x884C;&#xFF0C;&#x4E24;&#x4E2A;CPU&#x4E4B;&#x95F4;&#x7684;&#x64CD;&#x4F5C;&#x4F1A;&#x5E76;&#x884C;&#x8FD0;&#x7B97;&#x3002;&#x5355;&#x5C31;&#x4E00;&#x4E2A;CPU&#x800C;&#x8A00;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#x9020;&#x6210;&#x7684;&#x4E0D;&#x6D41;&#x7545;&#x95EE;&#x9898;&#xFF0C;&#x5176;&#x672C;&#x8EAB;&#x8FD0;&#x884C;&#x6548;&#x7387;&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x9AD8;&#xFF0C;&#x591A;CPU&#x7684;&#x5E76;&#x884C;&#x8FD0;&#x7B97;&#x624D;&#x771F;&#x6B63;&#x89E3;&#x51B3;&#x4E86;&#x8FD0;&#x884C;&#x6548;&#x7387;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E5F;&#x6B63;&#x662F;&#x5E76;&#x53D1;&#x548C;&#x5E76;&#x884C;&#x7684;&#x533A;&#x522B;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x591A;&#x6838;&#x8FD8;&#x662F;&#x5355;&#x6838;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4E0D;&#x7528;&#x8FC7;&#x591A;&#x7684;&#x62C5;&#x5FC3;&#xFF0C;&#x56E0;&#x4E3A;&#x4EFB;&#x52A1;&#x5177;&#x4F53;&#x5206;&#x914D;&#x7ED9;&#x51E0;&#x4E2A;CPU&#x8FD0;&#x7B97;&#x662F;&#x7531;&#x7CFB;&#x7EDF;&#x8C03;&#x5EA6;&#x7684;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4E0D;&#x7528;&#x8FC7;&#x591A;&#x5173;&#x5FC3;&#x7CFB;&#x7EDF;&#x6709;&#x51E0;&#x4E2A;CPU&#x3002;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x7684;&#x662F;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x4E9B;&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x5728;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x5B8C;&#x624D;&#x80FD;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x8FD9;&#x4E2A;&#x987A;&#x5E8F;&#x52BF;&#x5FC5;&#x4F1A;&#x9020;&#x6210;&#x7A0B;&#x5E8F;&#x95EE;&#x9898;&#x3002;</p>
<p><img src="http://birdmichael.com/wp-content/uploads/2015/07/202333357067475.png" alt="202333357067475"></p>
<h4 id="&#x8FDB;&#x7A0B;"><a href="#&#x8FDB;&#x7A0B;" class="headerlink" title="&#x8FDB;&#x7A0B;"></a><strong>&#x8FDB;&#x7A0B;</strong></h4><p>&#x8FDB;&#x7A0B;&#x662F;&#x6307;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;,&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x662F;&#x72EC;&#x7ACB;&#x7684;&#xFF0C;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x5747;&#x8FD0;&#x884C;&#x5728;&#x5176;&#x4E13;&#x7528;&#x4E14;&#x53D7;&#x4FDD;&#x62A4;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5185;</p>
<p><img src="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-1@2x.png" alt="QQ20150731-1@2x"></p>
<p>(&#x901A;&#x8FC7;&#x201C;&#x6D3B;&#x52A8;&#x76D1;&#x89C6;&#x5668;&#x201D;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Mac&#x7CFB;&#x7EDF;&#x4E2D;&#x6240;&#x5F00;&#x542F;&#x7684;&#x8FDB;&#x7A0B;)</p>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;&#x6253;&#x5F00;QQ&#x3001;Xcode&#xFF0C;Finder&#x7B49;&#x7CFB;&#x7EDF;&#x5C31;&#x4F1A;&#x5206;&#x522B;&#x542F;&#x52A8;n&#x4E2A;&#x8FDB;&#x7A0B;..</p>
<h4 id="&#x7EBF;&#x7A0B;"><a href="#&#x7EBF;&#x7A0B;" class="headerlink" title="&#x7EBF;&#x7A0B;"></a>&#x7EBF;&#x7A0B;</h4><p>&#x5F53;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x8981;&#x60F3;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x5FC5;&#x987B;&#x5F97;&#x6709;&#x7EBF;&#x7A0B;(&#x6BCF;1&#x4E2A;&#x8FDB;&#x7A0B;&#x81F3;&#x5C11;&#x8981;&#x6709;1&#x6761;&#x7EBF;&#x7A0B;,&#x8FD9;&#x6761;&#x7EBF;&#x7A0B;&#x4E5F;&#x79F0;&#x4E4B;&#x4E3A;&#x201D;&#x4E3B;&#x7EBF;&#x7A0B;&#x201D;).&#x7EBF;&#x7A0B;&#x662F;&#x8FDB;&#x7A0B;&#x7684;&#x57FA;&#x672C;&#x6267;&#x884C;&#x5355;&#x5143;,&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;(&#x7A0B;&#x5E8F;)&#x7684;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x90FD;&#x5728;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;.</p>
<p><img src="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-2@2x.png" alt="QQ20150731-2@2x"></p>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;,&#x8C37;&#x6B4C;&#x6D4F;&#x89C8;&#x5668;&#x5F00;&#x8F9F;&#x4E86;35&#x6761;&#x7EBF;&#x7A0B;&#x4E4B;&#x591A;,&#x6BD4;&#x5982;&#x8C37;&#x6B4C;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x67E5;&#x770B;&#x7F51;&#x9875;,&#x4E0B;&#x8F7D;,&#x64AD;&#x653E;Flash&#x7B49;&#x6240;&#x6709;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x9700;&#x8981;&#x5728;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;.</p>
<p>&#x5E76;&#x4E14;&#x7EBF;&#x7A0B;&#x662F;&#x65E0;&#x6CD5;&#x624B;&#x52A8;&#x6740;&#x6B7B;&#x7684;,&#x53EA;&#x80FD;&#x6682;&#x505C;(&#x6216;&#x8005;&#x53EB;&#x4F11;&#x7720;&#x7EBF;&#x7A0B;).</p>
<p>&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x5F00;&#x542F;&#x4E00;&#x6761;&#x65B0;&#x7684;&#x6267;&#x884C;&#x8DEF;&#x5F84;&#xFF0C;&#x8FD0;&#x884C;&#x6307;&#x5B9A;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E0E;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x201D;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x201D;.</p>
<h4 id="&#x7EBF;&#x7A0B;&#x7684;&#x4E32;&#x884C;"><a href="#&#x7EBF;&#x7A0B;&#x7684;&#x4E32;&#x884C;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x7684;&#x4E32;&#x884C;"></a>&#x7EBF;&#x7A0B;&#x7684;&#x4E32;&#x884C;</h4><p>1&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x4EFB;&#x52A1;&#x7684;&#x6267;&#x884C;&#x662F;&#x4E32;&#x884C;&#x7684;(&#x8981;&#x5728;1&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;,&#x90A3;&#x4E48;&#x53EA;&#x80FD;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x5730;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;)</p>
<blockquote>
<p><strong>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x5185;&#xFF0C;1&#x4E2A;&#x7EBF;&#x7A0B;&#x53EA;&#x80FD;&#x6267;&#x884C;1&#x4E2A;&#x4EFB;&#x52A1;.</strong>&#x6B64;&#x65F6;&#x662F;&#x7EBF;&#x7A0B;&#x7684;&#x4E32;&#x884C;,&#x8BF7;&#x52FF;&#x4E8E;&#x961F;&#x5217;&#x7684;&#x4E32;&#x884C;&#x548C;&#x5E76;&#x53D1;&#x6DF7;&#x6DC6;.</p>
</blockquote>
<p><img src="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-3@2x.png" alt="QQ20150731-3@2x"></p>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;,&#x73B0;&#x5728;&#x6709;3&#x4E2A;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;,&#x4F46;&#x662F;&#x53EA;&#x6709;&#x5355;&#x4E00;&#x7684;&#x7EBF;&#x7A0B;.&#x9996;&#x5148;&#x8BB2;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;1&#x4E22;&#x8FDB;&#x53BB;,&#x5F53;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;1&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x5728;&#x4E22;&#x5165;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;2.</p>
<h4 id="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5E76;&#x884C;"><a href="#&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5E76;&#x884C;" class="headerlink" title="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5E76;&#x884C;"></a>&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5E76;&#x884C;</h4><p>1&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x5F00;&#x542F;&#x591A;&#x6761;&#x7EBF;&#x7A0B;&#xFF0C;&#x6BCF;&#x6761;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x201D;&#x5E76;&#x884C;&#x201D;&#xFF08;&#x201D;&#x540C;&#x65F6;&#x201D;&#xFF09;&#x6267;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x4EFB;&#x52A1;</p>
<p>&#x591A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;,&#x4F7F;&#x7A0B;&#x5E8F;&#x66F4;&#x52A0;&#x6D41;&#x7545;,&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x66F4;&#x597D;.(&#x518D;&#x6B21;&#x964D;&#x8C03;&#x4E00;&#x6B21;:<strong>&#x591A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;&#x5E76;&#x4E0D;&#x4F1A;&#x63D0;&#x9AD8;&#x5355;&#x4E2A;&#x7B97;&#x6CD5;&#x672C;&#x8EAB;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;</strong>)</p>
<p>&#x6BD4;&#x5982;&#x540C;&#x65F6;&#x5F00;&#x542F;3&#x6761;&#x7EBF;&#x7A0B;&#x5206;&#x522B;&#x4E0B;&#x8F7D;3&#x4E2A;&#x6587;&#x4EF6;&#xFF08;&#x5206;&#x522B;&#x662F;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;1&#x3001;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;2&#x3001;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;3&#xFF09;</p>
<p><img src="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150731-4@2x.png" alt="QQ20150731-4@2x"></p>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;,&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#x5F00;&#x8F9F;3&#x6761;&#x7EBF;&#x7A0B;,&#x5E76;&#x4E14;&#x628A;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;1,2,3&#x5206;&#x522B;&#x4E22;&#x5165;&#x7EBF;&#x7A0B;&#x4E2D;.&#x8FD9;&#x65F6;3&#x4E2A;&#x4E0B;&#x8F7D;&#x4EFB;&#x52A1;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x591A;&#x4EFB;&#x52A1;&#x7CFB;&#x7EDF;&#x8C03;&#x5EA6;&#x540E;&#x201D;&#x5E76;&#x884C;&#x201D;(&#x201C;&#x540C;&#x65F6;&#x201D;)&#x4E0B;&#x8F7D;&#x4E86;.</p>
<h4 id="&#x591A;&#x4EFB;&#x52A1;&#x7CFB;&#x7EDF;&#x8C03;&#x5EA6;"><a href="#&#x591A;&#x4EFB;&#x52A1;&#x7CFB;&#x7EDF;&#x8C03;&#x5EA6;" class="headerlink" title="&#x591A;&#x4EFB;&#x52A1;&#x7CFB;&#x7EDF;&#x8C03;&#x5EA6;"></a>&#x591A;&#x4EFB;&#x52A1;&#x7CFB;&#x7EDF;&#x8C03;&#x5EA6;</h4><ul>
<li><h5 id="windows&#x591A;&#x4EFB;&#x52A1;"><a href="#windows&#x591A;&#x4EFB;&#x52A1;" class="headerlink" title="windows&#x591A;&#x4EFB;&#x52A1;"></a>windows&#x591A;&#x4EFB;&#x52A1;</h5></li>
</ul>
<p>&#x5B83;&#x662F;&#x6307;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x5185;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;,&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x88AB;&#x79F0;&#x4F5C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;Windows&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x652F;&#x6301;&#x591A;&#x4EFB;&#x52A1;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;,&#x6BD4;&#x8D77;DOS&#x7684;&#x5355;&#x4EFB;&#x52A1;&#x7CFB;&#x7EDF;,&#x786E;&#x5B9E;&#x65B9;&#x4FBF;&#x4E86;&#x8BB8;&#x591A;&#x3002;Windows&#x591A;&#x4EFB;&#x52A1;&#x5904;&#x7406;&#x91C7;&#x7528;&#x7684;&#x662F;&#x88AB;&#x79F0;&#x4E3A;&#x865A;&#x62DF;&#x673A;(Virtual Machine)&#x7684;&#x6280;&#x672F;&#x3002;&#x865A;&#x62DF;&#x673A;&#x5B9E;&#x9645;&#x4E0A;&#x6307;&#x7684;&#x662F;&#x7531;Windows&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#x903B;&#x8F91;&#x5FAE;&#x673A;,&#x7531;&#x5B83;&#x6765;&#x8FD0;&#x884C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x5F53;Windows&#x63A5;&#x53D7;&#x5230;&#x7531;&#x9F20;&#x6807;&#x5668;&#x3001;&#x952E;&#x76D8;&#x3001;&#x5B9A;&#x65F6;&#x5668;&#x4FE1;&#x53F7;&#x6216;&#x67D0;&#x4E9B;I/O&#x64CD;&#x4F5C;&#x4EA7;&#x751F;&#x7684;&#x201D;&#x4E8B;&#x4EF6;&#x201D;&#x540E;,&#x4E3A;&#x8BE5;&#x4EFB;&#x52A1;&#x5206;&#x914D;CPU&#x65F6;&#x95F4;&#x3002;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x4F7F;&#x7528;&#x7531;Windows&#x5206;&#x914D;&#x7684;&#x77ED;&#x6682;&#x7684;&#x65F6;&#x95F4;&#x7247;(Timeslice)&#x8F6E;&#x6D41;&#x4F7F;&#x7528;CPU,&#x7531;&#x4E8E;CPU&#x5BF9;&#x6BCF;&#x4E2A;&#x65F6;&#x95F4;&#x7247;&#x7684;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x975E;&#x5E38;&#x5FEB;,&#x5728;&#x7528;&#x6237;&#x770B;&#x6765;&#x597D;&#x50CF;&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;&#x5728;&#x540C;&#x65F6;&#x6267;&#x884C;<br>ios&#x7684;&#x591A;&#x7A0B;&#x5E8F;&#x548C;windows&#x7684;&#x591A;&#x4EFB;&#x52A1;&#x7C7B;&#x4F3C;.&#x5177;&#x4F53;&#x5173;&#x4E8E;&#x591A;&#x53EF;&#x4EE5;&#x8D44;&#x6599;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x201D;<a href="http://www.heiqu.com/show-87565-1.html" target="_blank" rel="external">&#x5404;&#x79CD;&#x7CFB;&#x7EDF;&#x4EE5;&#x53CA;&#x6784;&#x67B6;&#x591A;&#x4EFB;&#x52A1;&#x7684;&#x8BA8;&#x8BBA;(x86&#x3001;arm&#x3001;unix&#x3001;windows&#x5176;&#x4ED6;)</a>&#x201C;.</p>
<p>&#x5927;&#x5BB6;&#x53EF;&#x80FD;&#x6CE8;&#x610F;&#x5230;&#x4E86;,&#x6211;&#x4E4B;&#x524D;&#x7684;&#x8BF4;&#x7684;&#x6240;&#x6709;&#x5E76;&#x4E14;&#x53CA;&#x540C;&#x65F6;&#x90FD;&#x6709;&#x5F15;&#x53F7;,&#x56E0;&#x4E3A;:&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5206;&#x914D;&#x7684;&#x975E;&#x5E38;&#x77ED;&#x6682;&#x7684;&#x65F6;&#x95F4;&#x7247;(Timeslice)&#x8F6E;&#x6D41;&#x4F7F;&#x7528;CPU,&#x7531;&#x4E8E;CPU&#x5BF9;&#x6BCF;&#x4E2A;&#x65F6;&#x95F4;&#x7247;&#x7684;&#x5904;&#x7406;&#x901F;&#x5EA6;<strong>&#x975E;&#x5E38;&#x5FEB;</strong>.&#x56E0;&#x6B64;,&#x7528;&#x6237;&#x770B;&#x6765;<strong>&#x597D;&#x50CF;</strong>&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;&#x5728;&#x540C;&#x65F6;&#x6267;&#x884C;&#x7684;.&#x6240;&#x4EE5;&#x5E76;&#x884C;&#x5176;&#x5B9E;&#x662F;&#x6307;&#x4E24;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x53D1;&#x751F;.(&#x4F46;&#x662F;&#x5728;<strong>&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x65F6;&#x523B;&#x70B9;&#x4E0A;,CPU&#x53EA;&#x4F1A;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;</strong>.)</p>
<h3 id="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x7F3A;&#x70B9;"><a href="#&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x7F3A;&#x70B9;" class="headerlink" title="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x7F3A;&#x70B9;"></a>&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x7F3A;&#x70B9;</h3><h4 id="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x70B9;"><a href="#&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x70B9;" class="headerlink" title="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x70B9;"></a>&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x70B9;</h4><ol>
<li>&#x80FD;&#x9002;&#x5F53;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;</li>
<li>&#x5F53;&#x786C;&#x4EF6;&#x5904;&#x7406;&#x5668;&#x7684;&#x6570;&#x91CF;&#x589E;&#x52A0;,&#x7A0B;&#x5E8F;&#x4F1A;&#x8FD0;&#x884C;&#x66F4;&#x5FEB;,&#x800C;&#x7A0B;&#x5E8F;&#x65E0;&#x9700;&#x505A;&#x4EFB;&#x4F55;&#x8C03;&#x6574;</li>
<li>&#x5C06;&#x8017;&#x65F6;&#x7684;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6267;&#x884C;,&#x7531;&#x4E3B;&#x7EBF;&#x7A0B;&#x8D1F;&#x8D23;&#x7EDF;&#x4E00;&#x66F4;&#x65B0;&#x754C;&#x9762;&#x4F1A;&#x4F7F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x66F4;&#x52A0;&#x6D41;&#x7545;&#xFF0C;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x66F4;&#x597D;</li>
<li>&#x5145;&#x5206;&#x53D1;&#x6325;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#x4F18;&#x52BF;,&#x5C06;&#x4E0D;&#x540C;&#x7EBF;&#x7A0B;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x7ED9;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#x5668;,&#x771F;&#x6B63;&#x8FDB;&#x5165;&#x201C;&#x5E76;&#x884C;&#x8FD0;&#x7B97;&#x201D;&#x72B6;&#x6001;.&#x63D0;&#x9AD8;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;(CPU,&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;)</li>
</ol>
<h4 id="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x7F3A;&#x70B9;"><a href="#&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x7F3A;&#x70B9;" class="headerlink" title="&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x7F3A;&#x70B9;"></a>&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x7F3A;&#x70B9;</h4><ol>
<li>&#x5F00;&#x542F;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x5360;&#x7528;&#x4E00;&#x5B9A;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;(&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;:&#x4E3B;&#x7EBF;&#x7A0B;&#x5360;&#x7528;1M,&#x5B50;&#x7EBF;&#x7A0B;&#x5360;&#x7528;512KB.<span style="color: #ff0000;"><strong>&#x6CE8;&#x610F;:&#x5B9E;&#x9645;&#x6D4B;&#x8BD5;&#x4E2D;,&#x4E3B;&#x7EBF;&#x7A0B;&#x4E5F;&#x662F;512k</strong></span>),&#x5982;&#x679C;&#x5F00;&#x542F;&#x5927;&#x91CF;&#x7684;&#x7EBF;&#x7A0B;,&#x4F1A;&#x5360;&#x7528;&#x5927;&#x91CF;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;,&#x964D;&#x4F4E;&#x7A0B;&#x5E8F;&#x7684;&#x6027;&#x80FD;</li>
<li>&#x7EBF;&#x7A0B;&#x8D8A;&#x591A;,CPU&#x5728;&#x8C03;&#x5EA6;&#x7EBF;&#x7A0B;&#x4E0A;&#x7684;&#x5F00;&#x9500;&#x5C31;&#x8D8A;&#x5927;</li>
<li>&#x6BD4;&#x5982;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;,&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x5171;&#x4EAB;</li>
</ol>
<h3 id="ios&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;"><a href="#ios&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;" class="headerlink" title="ios&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;"></a>ios&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;</h3><p>&#x5728;iOS&#x4E2D;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x540E;&#x90FD;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF08;UI&#x7EBF;&#x7A0B;&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x662F;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x7684;&#x7236;&#x7EBF;&#x7A0B;&#x3002;</p>
<p>&#x4E3B;&#x7EBF;&#x7A0B;&#x4F5C;&#x7528;:&#x663E;&#x793A;\&#x5237;&#x65B0;UI&#x754C;&#x9762;&#x4EE5;&#x53CA;&#x5904;&#x7406;UI&#x4E8B;&#x4EF6;&#xFF08;&#x6BD4;&#x5982;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3001;&#x6EDA;&#x52A8;&#x4E8B;&#x4EF6;&#x3001;&#x62D6;&#x62FD;&#x4E8B;&#x4EF6;&#x7B49;)</p>
<p>&#x7531;&#x4E8E;&#x5728;iOS&#x4E2D;&#x9664;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x5176;&#x4ED6;&#x5B50;&#x7EBF;&#x7A0B;&#x662F;&#x72EC;&#x7ACB;&#x4E8E;Cocoa Touch&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x6709;&#x4E3B;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x66F4;&#x65B0;UI&#x754C;&#x9762;&#xFF08;&#x65B0;&#x7248;iOS&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x66F4;&#x65B0;UI&#x53EF;&#x80FD;&#x4E5F;&#x80FD;&#x6210;&#x529F;&#xFF0C;&#x4F46;&#x662F;<strong>&#x4E0D;&#x63A8;&#x8350;</strong>&#xFF09;&#x3002;</p>
<p>iOS&#x4E2D;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x5173;&#x952E;&#x662F;&#x5982;&#x4F55;&#x63A7;&#x5236;&#x597D;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x3001;&#x5904;&#x7406;&#x597D;&#x8D44;&#x6E90;&#x7ADE;&#x4E89;&#x95EE;&#x9898;&#x3002;&#x5E38;&#x7528;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x5F00;&#x53D1;&#x6709;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<h4 id="NSThread"><a href="#NSThread" class="headerlink" title="NSThread"></a>NSThread</h4><p>&#x4F7F;&#x7528;NSThread&#x5BF9;&#x8C61;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;<strong>&#x975E;&#x5E38;&#x65B9;&#x4FBF;</strong></p>
<p>&#x4F7F;&#x7528;NSThread&#x7BA1;&#x7406;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;<strong>&#x975E;&#x5E38;&#x56F0;&#x96BE;.</strong>(&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;)</p>
<h4 id="NSOperation"><a href="#NSOperation" class="headerlink" title="NSOperation"></a>NSOperation</h4><p>&#x4F7F;&#x7528;GCD&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x5957;<strong>Objective-C&#x7684;API</strong>,&#x7B80;&#x5355;&#x8BF4;&#x5C31;&#x662F;&#x5C01;&#x88C5;&#x597D;&#x7684;GCD.</p>
<p>&#x662F;<strong>&#x9762;&#x5411;&#x5BF9;&#x8C61;</strong>&#x7684;&#x7EBF;&#x7A0B;&#x6280;&#x672F;</p>
<p>&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x5728;GCD&#x4E2D;&#x4E0D;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5982;&#xFF1A;&#x9650;&#x5236;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x6570;&#x91CF;&#x3001;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7B49;</p>
<blockquote>
<p>&#x4F7F;&#x7528;[NSThread currentThread]&#x6765;&#x8DDF;&#x8E2A;&#x4EFB;&#x52A1;&#x6240;&#x5728;&#x7EBF;&#x7A0B;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x8FD9;&#x4E09;&#x79CD;&#x6280;&#x672F;,&#x5E76;&#x4E14;&#x975E;&#x5E38;&#x597D;&#x7528;!</p>
</blockquote>
<h4 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h4><p>&#x662F;&#x57FA;&#x4E8E;<strong>C&#x8BED;&#x8A00;&#x7684;&#x5E95;&#x5C42;API</strong></p>
<p>&#x7528;Block&#x5B9A;&#x4E49;&#x4EFB;&#x52A1;&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x975E;&#x5E38;<strong>&#x7075;&#x6D3B;&#x4FBF;&#x6377;</strong></p>
<p>&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x63A7;&#x5236;&#x80FD;&#x529B;&#x4EE5;&#x53CA;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x4E2D;&#x6240;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x7684;&#x5E95;&#x5C42;&#x51FD;&#x6570;</p>
<p>&#x5145;&#x5206;&#x5229;&#x7528;&#x4E86;<strong>&#x591A;&#x6838;</strong>&#x5904;&#x7406;&#x5668;&#x7684;&#x8FD0;&#x7B97;&#x6027;&#x80FD;</p>
<p><strong>&#x81EA;&#x52A8;&#x7BA1;&#x7406;</strong>&#x7EBF;&#x7A0B;&#x7684;<strong>&#x751F;&#x547D;&#x5468;&#x671F;</strong>(&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;,&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;,&#x9500;&#x6BC1;&#x7EBF;&#x7A0B;)</p>
<p>&#x4E09;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x968F;&#x7740;iOS&#x7684;&#x53D1;&#x5C55;&#x9010;&#x6E10;&#x5F15;&#x5165;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x76F8;&#x6BD4;&#x800C;&#x8A00;&#x540E;&#x8005;&#x6BD4;&#x524D;&#x8005;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x6613;&#x7528;&#xFF0C;&#x5E76;&#x4E14;GCD&#x4E5F;&#x662F;&#x76EE;&#x524D;&#x82F9;&#x679C;&#x5B98;&#x65B9;&#x6BD4;&#x8F83;&#x63A8;&#x8350;&#x7684;&#x65B9;&#x5F0F;&#xFF08;&#x5B83;&#x5145;&#x5206;&#x5229;&#x7528;&#x4E86;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#x7684;&#x8FD0;&#x7B97;&#x6027;&#x80FD;&#xFF09;&#x3002;</p>
<h2 id="GCD-1"><a href="#GCD-1" class="headerlink" title="GCD"></a>GCD</h2><p><span style="color: #ff0000;"><strong>GCD&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x662F;&#x5C31;&#x5C06;&#x64CD;&#x4F5C;(&#x4EFB;&#x52A1;)&#x653E;&#x5728;&#x961F;&#x5217;(&#x8C03;&#x5EA6;)&#x4E2D;&#x53BB;&#x6267;&#x884C;.</strong></span></p>
<h3 id="&#x4ECB;&#x7ECD;-1"><a href="#&#x4ECB;&#x7ECD;-1" class="headerlink" title="&#x4ECB;&#x7ECD;"></a><strong>&#x4ECB;&#x7ECD;</strong></h3><h4 id="GCD&#x662F;&#x4EC0;&#x4E48;"><a href="#GCD&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="GCD&#x662F;&#x4EC0;&#x4E48;"></a>GCD&#x662F;&#x4EC0;&#x4E48;</h4><p>Grand Central Dispatch &#x7B80;&#x79F0;&#xFF08;GCD&#xFF09;&#x662F;&#x82F9;&#x679C;&#x516C;&#x53F8;&#x5F00;&#x53D1;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x4EE5;&#x4F18;&#x5316;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x652F;&#x6301;&#x591A;&#x6838;&#x5FC3;&#x5904;&#x7406;&#x5668;&#x548C;&#x5176;&#x4ED6;&#x7684;&#x5BF9;&#x79F0;&#x591A;&#x5904;&#x7406;&#x7CFB;&#x7EDF;&#x7684;&#x7CFB;&#x7EDF;&#x3002;&#x8FD9;&#x5EFA;&#x7ACB;&#x5728;&#x4EFB;&#x52A1;&#x5E76;&#x884C;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x6A21;&#x5F0F;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x7684;&#x3002;&#x5B83;&#x9996;&#x6B21;&#x53D1;&#x5E03;&#x5728;Mac OS X 10.6 &#xFF0C;iOS 4&#x53CA;&#x4EE5;&#x4E0A;&#x4E5F;&#x53EF;&#x7528;&#x3002;</p>
<h4 id="&#x8BBE;&#x8BA1;"><a href="#&#x8BBE;&#x8BA1;" class="headerlink" title="&#x8BBE;&#x8BA1;"></a><strong>&#x8BBE;&#x8BA1;</strong></h4><div>GCD&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x662F;:&#x8BA9;&#x7A0B;&#x5E8F;&#x5E73;&#x884C;&#x6392;&#x961F;&#x7684;&#x7279;&#x5B9A;&#x4EFB;&#x52A1;,&#x6839;&#x636E;&#x53EF;&#x7528;&#x7684;&#x5904;&#x7406;&#x8D44;&#x6E90;,&#x5B89;&#x6392;&#x4ED6;&#x4EEC;&#x5728;&#x4EFB;&#x4F55;&#x53EF;&#x7528;&#x7684;&#x5904;&#x7406;&#x5668;&#x6838;&#x5FC3;&#x4E0A;&#x6267;&#x884C;&#x4EFB;&#x52A1;</div><br><div> &#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;(function)&#x6216;&#x8005;&#x662F;&#x4E00;&#x4E2A;block</div><br><div>GCD&#x7684;&#x5E95;&#x5C42;&#x4F9D;&#x7136;&#x662F;&#x7528;&#x7EBF;&#x7A0B;&#x5B9E;&#x73B0;,&#x4E0D;&#x8FC7;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x8BA9;&#x7A0B;&#x5E8F;&#x5458;&#x4E0D;&#x7528;&#x5173;&#x6CE8;&#x5B9E;&#x73B0;&#x7684;&#x7EC6;&#x8282;</div><br><div><br><br>&#x961F;&#x5217;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x6240;&#x5728;&#x7684;&#x7EBF;&#x7A0B;&#x4EE5;&#x53CA;&#x5177;&#x4F53;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;<br><br></div><br><div> GCD&#x4E2D;&#x7684;FIFO&#x961F;&#x5217;&#x79F0;&#x4E3A;dispatch queue,&#x5B83;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5148;&#x8FDB;&#x6765;&#x7684;&#x4EFB;&#x52A1;&#x5148;&#x5F97;&#x5230;&#x6267;&#x884C;</div>

<h3 id="&#x672F;&#x8BED;"><a href="#&#x672F;&#x8BED;" class="headerlink" title="&#x672F;&#x8BED;"></a>&#x672F;&#x8BED;</h3><div>&#x5982;&#x679C;&#x8981;&#x7406;&#x89E3; GCD&#x4E4B;&#x524D; &#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x7EBF;&#x7A0B;&#x548C;&#x5E76;&#x53D1;&#x76F8;&#x5173;&#x7684;&#x51E0;&#x4E2A;&#x6982;&#x5FF5;&#x3002;&#x8FD9;&#x4E24;&#x8005;&#x90FD;&#x53EF;&#x80FD;&#x6A21;&#x7CCA;&#x548C;&#x5FAE;&#x5999;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5F00;&#x59CB; GCD &#x4E4B;&#x524D;&#x5148;&#x7B80;&#x8981;&#x5730;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#x5B83;&#x4EEC;&#x3002;</div>

<h4 id="dispath-queue-&#x8C03;&#x5EA6;&#x961F;&#x5217;"><a href="#dispath-queue-&#x8C03;&#x5EA6;&#x961F;&#x5217;" class="headerlink" title="dispath queue**(&#x8C03;&#x5EA6;&#x961F;&#x5217;)**"></a><strong>dispath queue**</strong>(<strong><strong>&#x8C03;&#x5EA6;&#x961F;&#x5217;</strong></strong>)**</h4><p><strong>&#x961F;&#x5217;&#x5C31;&#x662F;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x5B58;&#x653E;&#x4EFB;&#x52A1;(&#x64CD;&#x4F5C;)&#x7684;.</strong></p>
<div><br><br>GCD&#x7684;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x6982;&#x5FF5;&#x662F;&#x961F;&#x5217;.&#x5B83;&#x7684;&#x6838;&#x5FC3;&#x7406;&#x5FF5;:&#x5C06;&#x957F;&#x671F;&#x8FD0;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x62C6;&#x5206;&#x6210;&#x591A;&#x4E2A;&#x5DE5;&#x4F5C;&#x5355;&#x5143;(&#x4EE3;&#x7801;&#x5757;),&#x5E76;&#x5C06;&#x8FD9;&#x4E9B;&#x5355;&#x5143;&#x6DFB;&#x52A0;&#x5230;dispath queue&#x4E2D;,&#x7CFB;&#x7EDF;&#x4F1A;&#x4E3A;&#x6211;&#x4EEC;&#x7BA1;&#x7406;&#x8FD9;&#x4E9B;dispath queue,&#x4E3A;&#x6211;&#x4EEC;&#x5728;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E0A;&#x6267;&#x884C;&#x5DE5;&#x4F5C;&#x5355;&#x5143;,&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x542F;&#x52A8;&#x548C;&#x7BA1;&#x7406;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;.<br><br>&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x9884;&#x5B9A;&#x4E49;&#x7684;dispath queue,&#x5305;&#x62EC;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x59CB;&#x7EC8;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0A;&#x6267;&#x884C;&#x5DE5;&#x4F5C;&#x7684;dispath queue.&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;dispath queue,&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4EFB;&#x610F;&#x591A;&#x4E2A;.GCD&#x7684;dispath queue&#x4E25;&#x683C;&#x9075;&#x5FAA;FIFO(&#x5148;&#x8FDB;&#x5148;&#x51FA;)&#x539F;&#x5219;,&#x6DFB;&#x52A0;&#x5230;dispath queue&#x7684;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x5C06;&#x59CB;&#x7EC8;&#x6309;&#x7167;&#x52A0;&#x5165;dispath queue&#x7684;&#x987A;&#x5E8F;&#x542F;&#x52A8;.<br><br>dispatch queue&#x6309;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#x7684;&#x987A;&#x5E8F;,&#x4E32;&#x884C;&#x6216;&#x5E76;&#x53D1;&#x5730;&#x6267;&#x884C;&#x4EFB;&#x52A1;<br><br>serial dispatch queue&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;, &#x5F53;&#x524D;&#x4EFB;&#x52A1;&#x5B8C;&#x6210;&#x624D;&#x5F00;&#x59CB;&#x51FA;&#x5217;&#x5E76;&#x542F;&#x52A8;&#x4E0B;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;<br><br>concurrent dispatch queue&#x5219;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x5730;&#x542F;&#x52A8;&#x4EFB;&#x52A1;&#x5E76;&#x53D1;&#x6267;&#x884C;<br><br></div><br>&gt; <div>&#x6240;&#x6709;&#x7684;&#x8C03;&#x5EA6;&#x961F;&#x5217;&#xFF08;dispatch queues&#xFF09;&#x81EA;&#x8EAB;&#x90FD;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4F60;&#x80FD;&#x4ECE;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#x7684;&#x8BBF;&#x95EE;&#x5B83;&#x4EEC;&#x3002; GCD &#x7684;&#x4F18;&#x70B9;&#x662F;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#xFF0C;&#x5373;&#x5F53;&#x4F60;&#x4E86;&#x89E3;&#x4E86;&#x8C03;&#x5EA6;&#x961F;&#x5217;&#x5982;&#x4F55;&#x4E3A;&#x4F60;&#x81EA;&#x5DF1;&#x4EE3;&#x7801;&#x7684;&#x4E0D;&#x540C;&#x90E8;&#x5206;&#x63D0;&#x4F9B;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;&#x5173;&#x4E8E;&#x8FD9;&#x4E00;&#x70B9;&#x7684;&#x5173;&#x952E;&#x662F;&#x9009;&#x62E9;&#x6B63;&#x786E;&#x7C7B;&#x578B;&#x7684;&#x8C03;&#x5EA6;&#x961F;&#x5217;&#x548C;&#x6B63;&#x786E;&#x7684;&#x8C03;&#x5EA6;&#x51FD;&#x6570;&#x6765;&#x63D0;&#x4EA4;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</div>

<h5 id="Serial-&#x4E32;&#x884C;&#x961F;&#x5217;"><a href="#Serial-&#x4E32;&#x884C;&#x961F;&#x5217;" class="headerlink" title="Serial(&#x4E32;&#x884C;&#x961F;&#x5217;)"></a><strong>Serial(&#x4E32;&#x884C;&#x961F;&#x5217;)</strong></h5><p>&#x53C8;&#x79F0;&#x4E3A;private dispatch queues,&#x540C;&#x65F6;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;.Serial queue&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x540C;&#x6B65;&#x8BBF;&#x95EE;&#x7279;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x6216;&#x6570;&#x636E;.&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;,&#x52A0;&#x5165;&#x5230;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x6309;&#x6DFB;&#x52A0;&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x6267;&#x884C;.</p>
<p><img src="http://birdmichael.com/wp-content/uploads/2015/07/4673_140428093515_1.png" alt="4673_140428093515_1"></p>
<div>&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;&#x7684;&#x6267;&#x884C;&#x65F6;&#x673A;&#x53D7;&#x5230; GCD &#x7684;&#x63A7;&#x5236;&#xFF1B;&#x552F;&#x4E00;&#x80FD;&#x786E;&#x4FDD;&#x7684;&#x4E8B;&#x60C5;&#x662F; GCD &#x4E00;&#x6B21;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x6267;&#x884C;&#x3002;</div><br><div></div><br><div>&#x7531;&#x4E8E;&#x5728;&#x4E32;&#x884C;&#x961F;&#x5217;&#x4E2D;&#x4E0D;&#x4F1A;&#x6709;&#x4E24;&#x4E2A;&#x4EFB;&#x52A1;&#x5E76;&#x53D1;&#x8FD0;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x4E34;&#x754C;&#x533A;&#x7684;&#x98CE;&#x9669;&#xFF1B;&#x76F8;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E9B;&#x4EFB;&#x52A1;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x5C31;&#x4ECE;&#x7ADE;&#x6001;&#x6761;&#x4EF6;&#x4E0B;&#x4FDD;&#x62A4;&#x4E86;&#x4E34;&#x754C;&#x533A;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x8BBF;&#x95EE;&#x4E34;&#x754C;&#x533A;&#x7684;&#x552F;&#x4E00;&#x65B9;&#x5F0F;&#x662F;&#x901A;&#x8FC7;&#x63D0;&#x4EA4;&#x5230;&#x8C03;&#x5EA6;&#x961F;&#x5217;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x62C5;&#x5FC3;&#x4E34;&#x754C;&#x533A;&#x7684;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x4E86;&#x3002;</div>

<h5 id="Concurrent-&#x5E76;&#x884C;&#x961F;&#x5217;"><a href="#Concurrent-&#x5E76;&#x884C;&#x961F;&#x5217;" class="headerlink" title="Concurrent(&#x5E76;&#x884C;&#x961F;&#x5217;)"></a><strong>Concurrent(&#x5E76;&#x884C;&#x961F;&#x5217;)</strong></h5><p>&#x6709;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;,&#x64CD;&#x4F5C;&#x8FDB;&#x6765;&#x4E4B;&#x540E;&#x5B83;&#x4F1A;&#x5C06;&#x8FD9;&#x4E9B;&#x961F;&#x5217;&#x5B89;&#x6392;&#x5728;&#x53EF;&#x7528;&#x7684;&#x5904;&#x7406;&#x5668;&#x4E0A;,&#x540C;&#x65F6;&#x4FDD;&#x8BC1;&#x5148;&#x8FDB;&#x6765;&#x7684;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x5904;&#x7406;.(&#x548C;&#x5168;&#x5C40;&#x961F;&#x5217;&#x7C7B;&#x4F3C;,&#x53EA;&#x662F;&#x521B;&#x5EFA;&#x540E;&#x53EF;&#x4EE5;&#x8C03;&#x8BD5;&#x65F6;&#x89C2;&#x5BDF;&#x201D;<span class="s1">const char *label</span>&#x201C;&#x6765;&#x786E;&#x5B9A;&#x7EBF;&#x7A0B;.)</p>
<h5 id="Global-dispatch-queue-&#x5168;&#x5C40;&#x961F;&#x5217;"><a href="#Global-dispatch-queue-&#x5168;&#x5C40;&#x961F;&#x5217;" class="headerlink" title="Global dispatch queue(&#x5168;&#x5C40;&#x961F;&#x5217;)"></a>Global <strong>dispatch queue</strong>(&#x5168;&#x5C40;&#x961F;&#x5217;)</h5><p>&#x662F;&#x6240;&#x6709;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x7684;Concurrent.&#x4E00;&#x822C;&#x4E0D;&#x7528;&#x523B;&#x610F;&#x7684;&#x53BB;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Concurrent &#x7684;Queue.&#x53EA;&#x8981;&#x83B7;&#x5F97;&#x7CFB;&#x7EDF;&#x7684;&#x8FD9;&#x4E2A;&#x5373;&#x53EF;.</p>
<h5 id="Main-dispatch-queue-&#x4E3B;&#x961F;&#x5217;"><a href="#Main-dispatch-queue-&#x4E3B;&#x961F;&#x5217;" class="headerlink" title="Main dispatch queue(&#x4E3B;&#x961F;&#x5217;)"></a><strong>Main dispatch queue(&#x4E3B;&#x961F;&#x5217;)</strong></h5><p>&#x5C06;&#x4EFB;&#x52A1;&#x653E;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x53BB;&#x6267;&#x884C;,&#x53EF;&#x4EE5;&#x5C06;&#x4E00;&#x4E9B;&#x66F4;&#x65B0;UI&#x7684;&#x4EFB;&#x52A1;&#x8FFD;&#x52A0;&#x5230;&#x8BE5;Queue&#x4E2D;,&#x8FD9;&#x4E2A;&#x548C;NSObject&#x7C7B;&#x63D0;&#x4F9B;&#x7684;performSelectorOnMainThread&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x7684;&#x6548;&#x679C;&#x4E00;&#x6837;.(&#x5176;&#x5B9E;&#x5728;NSOperation&#x4E2D;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x4E3B;&#x961F;&#x5217;)</p>
<h4 id="Queue-Types-&#x961F;&#x5217;&#x7C7B;&#x578B;"><a href="#Queue-Types-&#x961F;&#x5217;&#x7C7B;&#x578B;" class="headerlink" title="Queue Types (&#x961F;&#x5217;&#x7C7B;&#x578B;)"></a><strong>Queue Types (&#x961F;&#x5217;&#x7C7B;&#x578B;)</strong></h4><div>&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x53EB;&#x505A;&#x4E3B;&#x961F;&#x5217;(main queue) &#x7684;&#x7279;&#x6B8A;&#x961F;&#x5217;.&#x548C;&#x5176;&#x5B83;&#x4E32;&#x884C;&#x961F;&#x5217;&#x4E00;&#x6837;,&#x8FD9;&#x4E2A;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x4EFB;&#x52A1;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;.&#x5B83;&#x80FD;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x7684;&#x4EFB;&#x52A1;&#x90FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x6267;&#x884C;,&#x800C;&#x4E3B;&#x7EBF;&#x7A0B;&#x662F;&#x552F;&#x4E00;&#x53EF;&#x7528;&#x4E8E;&#x66F4;&#x65B0; UI &#x7684;&#x7EBF;&#x7A0B;.&#x8FD9;&#x4E2A;&#x961F;&#x5217;&#x5C31;&#x662F;&#x7528;&#x4E8E;&#x53D1;&#x751F;&#x6D88;&#x606F;&#x7ED9; UIView &#x6216;&#x53D1;&#x9001;&#x901A;&#x77E5;&#x7B49;.</div><br><div><br><br>&#x7CFB;&#x7EDF;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x7ED9;&#x4F60;&#x597D;&#x51E0;&#x4E2A;&#x5E76;&#x53D1;&#x961F;&#x5217;(&#x5168;&#x5C40;&#x961F;&#x5217;)<br><pre class="lang:objc decode:true">/<em>!
 </em> @function dispatch_get_global_queue<br> <em>
 </em> @abstract<br> <em> Returns a well-known global concurrent queue of a given quality of service
 </em> class.<br> <em>
 </em> @discussion<br> <em> The well-known global concurrent queues may not be modified. Calls to
 </em> dispatch_suspend(), dispatch_resume(), dispatch_set_context(), etc., will<br> <em> have no effect when used with queues returned by this function.
 </em><br> <em> @param identifier
 </em> A quality of service class defined in qos_class_t or a priority defined in<br> <em> dispatch_queue_priority_t.
 </em><br> <em> It is recommended to use quality of service class values to identify the
 </em> well-known global concurrent queues:<br> <em>  - QOS_CLASS_USER_INTERACTIVE
 </em>  - QOS_CLASS_USER_INITIATED<br> <em>  - QOS_CLASS_DEFAULT
 </em>  - QOS_CLASS_UTILITY<br> <em>  - QOS_CLASS_BACKGROUND
 </em><br> <em> The global concurrent queues may still be identified by their priority,
 </em> which map to the following QOS classes:<br> <em>  - DISPATCH_QUEUE_PRIORITY_HIGH:         QOS_CLASS_USER_INITIATED
 </em>  - DISPATCH_QUEUE_PRIORITY_DEFAULT:      QOS_CLASS_DEFAULT<br> <em>  - DISPATCH_QUEUE_PRIORITY_LOW:          QOS_CLASS_UTILITY
 </em>  - DISPATCH_QUEUE_PRIORITY_BACKGROUND:   QOS_CLASS_BACKGROUND<br> <em>
 </em> @param flags<br> <em> Reserved for future use. Passing any value other than zero may result in
 </em> a NULL return value.<br> <em>
 </em> @result<br> <em> Returns the requested global queue or NULL if the requested global queue
 </em> does not exist.<br> <em>/<br><strong>OSX_AVAILABLE_STARTING(</strong>MAC_10_6,__IPHONE_4_0)<br>DISPATCH_EXPORT DISPATCH_CONST DISPATCH_WARN_RESULT DISPATCH_NOTHROW<br>dispatch_queue_t<br>dispatch_get_global_queue(long identifier, unsigned long flags);</em></pre><br><br>##### &#x5168;&#x5C40;&#x4F18;&#x5148;&#x7EA7;<br><br>#define DISPATCH_QUEUE_PRIORITY_HIGH 2 // &#x9AD8;<br><br>#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0 // &#x9ED8;&#x8BA4;&#xFF08;&#x4E2D;&#xFF09;<br><br>#define DISPATCH_QUEUE_PRIORITY_LOW (-2) // &#x4F4E;<br><br>#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN // &#x540E;&#x53F0;<br><br>&#x5B83;&#x4EEC;&#x53EB;&#x505A; &#x5168;&#x5C40;&#x8C03;&#x5EA6;&#x961F;&#x5217;(Global Dispatch Queues).&#x76EE;&#x524D;&#x7684;&#x56DB;&#x4E2A;&#x5168;&#x5C40;&#x961F;&#x5217;&#x6709;&#x7740;&#x4E0D;&#x540C;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF1A;background&#x3001;low&#x3001;default &#x4EE5;&#x53CA; high.&#x8981;&#x77E5;&#x9053;,Apple &#x7684; API &#x4E5F;&#x4F1A;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x961F;&#x5217;,<strong>&#x6240;&#x4EE5;&#x4F60;&#x6DFB;&#x52A0;&#x7684;&#x4EFB;&#x4F55;&#x4EFB;&#x52A1;&#x90FD;&#x4E0D;&#x4F1A;&#x662F;&#x8FD9;&#x4E9B;&#x961F;&#x5217;&#x4E2D;&#x552F;&#x4E00;&#x7684;&#x4EFB;&#x52A1;</strong>.<br><br></div><br>&gt; &#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x8BBE;&#x8BA1;&#x4E0D;&#x5F53;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#xFF0C;&#x5373;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x64CD;&#x4F5C;&#x963B;&#x585E;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x64CD;&#x4F5C;.<br>&gt;<br>&gt;<br>&gt; &#x4E00;&#x822C;&#x90FD;&#x9ED8;&#x8BA4;&#x4E22;&#x5165;default.<br><br>##### &#x5168;&#x5C40;&#x670D;&#x52A1;&#x8D28;&#x91CF;(QOS)-ios8&#x63A8;&#x51FA;<br><br>&#x5168;&#x5C40;&#x670D;&#x52A1;&#x8D28;&#x91CF;&#x63D0;&#x4F9B;&#x4E86;5&#x4E2D;&#x4E0D;&#x540C;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x5236;&#x5B9A;QOS&#x5206;&#x522B;&#x4E3A;:<br><br><span class="s1"> <span class="Apple-converted-space">  </span>- QOS_CLASS_USER_INTERACTIVE  // &#x7528;&#x6237;&#x4EA4;&#x4E92;(&#x4F1A;&#x8981;&#x6C42;CPU&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x8C03;&#x5EA6;&#x6B64;&#x4EFB;&#x52A1;,&#x6240;&#x4EE5;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x8D28;&#x91CF;)</span><br><br><span class="s1"> <em><span class="Apple-converted-space">  </span>- QOS_CLASS_USER_INITIATED  // &#x7528;&#x6237;&#x53D1;&#x8D77;(&#x5982;&#x679C;&#x7528;&#x6237;&#x5E0C;&#x671B;&#x4EFB;&#x52A1;&#x5C3D;&#x5FEB;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;,&#x5E76;&#x4E14;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x4E5F;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x6B21;&#x670D;&#x52A1;&#x8D28;&#x91CF;)</em></span><br><br><span class="s1"> <span class="Apple-converted-space">  </span>- QOS_CLASS_DEFAULT  // &#x9ED8;&#x8BA4;</span><br><br><span class="s1"> <em><span class="Apple-converted-space">  </span>- QOS_CLASS_UTILITY //&#x4F7F;&#x7528; (&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x670D;&#x52A1;&#x8D28;&#x91CF;)</em></span><br><br><span class="s1"> <span class="Apple-converted-space">  </span>- QOS_CLASS_BACKGROUND  // &#x540E;&#x53F0;(&#x6307;&#x5B9A;&#x4E3A;&#x6700;&#x8282;&#x80FD;&#x7684;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#x201D;&#x6027;&#x80FD;&#x4F18;&#x5148;&#x201D;)</span><br><br>*<span class="Apple-converted-space">  </span>- QOS_CLASS_UNSOECIFIED // &#x6CA1;&#x6709;&#x5236;&#x5B9A;QOS<br><br>&gt; &#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x8BBE;&#x8BA1;&#x4E0D;&#x5F53;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#xFF0C;&#x5373;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x64CD;&#x4F5C;&#x963B;&#x585E;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x64CD;&#x4F5C;.<br>&gt;<br>&gt;<br>&gt; &#x4E00;&#x822C;&#x90FD;&#x9ED8;&#x8BA4;&#x4E22;&#x5165;default.<br><br>##### &#x83B7;&#x53D6;&#x5168;&#x5C40;&#x961F;&#x5217;ios7,8&#x9002;&#x914D;<br><br>&#x5982;&#x4E0A;&#x6240;&#x793A;&#x4E00;&#x822C;&#x5728;&#x83B7;&#x53D6;&#x5168;&#x5C40;&#x961F;&#x5217;&#x65F6;,&#x670D;&#x52A1;&#x8D28;&#x91CF;&#x4EE5;&#x53CA;&#x4F18;&#x5148;&#x7EA7;&#x6211;&#x4EEC;&#x90FD;&#x9ED8;&#x8BA4;&#x4F20;&#x5165;0&#x6765;&#x9002;&#x914D;.<br><pre class="lang:objc decode:true  ">    dispatch_queue_t q = dispatch_get_global_queue(0, 0);</pre><br>&#xA0;<br><div><img src="http://birdmichael.com/wp-content/uploads/2015/07/31313131_3123131.png" alt="31313131_3123131"></div><br><div>&#x6700;&#x540E;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x4E32;&#x884C;&#x961F;&#x5217;&#x6216;&#x5E76;&#x53D1;&#x961F;&#x5217;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x4E94;&#x4E2A;&#x961F;&#x5217;&#x4EFB;&#x4F60;&#x53D1;&#x6398;;&#x4E3B;&#x961F;&#x5217;,&#x56DB;&#x4E2A;&#x5168;&#x5C40;&#x8C03;&#x5EA6;&#x961F;&#x5217;(&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x4E3A;&#x4F4E;&#x7684;&#x540E;&#x53F0;&#x961F;&#x5217;(&#x7528;&#x4E8E; I/O))&#xFF0C;&#x518D;&#x52A0;&#x4E0A;&#x4EFB;&#x4F55;&#x4F60;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x961F;&#x5217;&#x3002;(&#x4F46;&#x56DB;&#x4E2A;&#x5168;&#x5C40;&#x8C03;&#x5EA6;&#x4E00;&#x822C;&#x90FD;&#x4E0D;&#x7814;&#x7A76;,&#x76F4;&#x63A5;&#x4E22;&#x5165;default).&#x5E76;&#x4E14;&#x961F;&#x5217;&#x662F;&#x53EF;&#x4EE5;&#x5D4C;&#x5957;&#x7684;.</div>

<h4 id="&#x64CD;&#x4F5C;-&#x4EFB;&#x52A1;"><a href="#&#x64CD;&#x4F5C;-&#x4EFB;&#x52A1;" class="headerlink" title="&#x64CD;&#x4F5C;(&#x4EFB;&#x52A1;)"></a>&#x64CD;&#x4F5C;(&#x4EFB;&#x52A1;)</h4><h5 id="&#x540C;&#x6B65;"><a href="#&#x540C;&#x6B65;" class="headerlink" title="&#x540C;&#x6B65;"></a>&#x540C;&#x6B65;</h5><p><strong>&#x6267;&#x884C;&#x5B8C;&#x8FD9;&#x4E00;&#x53E5;&#x4EE3;&#x7801;,&#x518D;&#x6267;&#x884C;&#x540E;&#x7EED;&#x7684;&#x4EE3;&#x7801;</strong></p>
<p>&#x5C31;&#x662F;&#x5728;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x4E4B;&#x524D;&#xFF0C;&#x8BE5;&#x8C03;&#x7528;&#x5C31;&#x4E0D;&#x8FD4;&#x56DE;&#x3002;&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x8C03;&#x7528;&#x8FD4;&#x56DE;&#xFF0C;&#x5C31;&#x5F97;&#x5230;&#x8FD4;&#x56DE;&#x503C;&#x4E86;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x7531;&#x8C03;&#x7528;&#x8005;&#x4E3B;&#x52A8;&#x7B49;&#x5F85;&#x8FD9;&#x4E2A;&#x8C03;&#x7528;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<blockquote>
<p>&#x4F60;&#x6253;&#x7535;&#x8BDD;&#x95EE;&#x4E66;&#x5E97;&#x8001;&#x677F;&#x6709;&#x6CA1;&#x6709; &lt;&lt;BirdMichael&#x7684;GCD&#x8BB2;&#x89E3;&gt;&gt; &#x8FD9;&#x672C;&#x4E66;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x540C;&#x6B65;&#x901A;&#x4FE1;&#x673A;&#x5236;&#x2014;&#x4E66;&#x5E97;&#x8001;&#x677F;&#x4F1A;&#x8BF4;:&#x201D;&#x4F60;&#x7A0D;&#x7B49;,&#x6211;&#x67E5;&#x4E00;&#x4E0B;&#x201D;,&#x7136;&#x540E;&#x5F00;&#x59CB;&#x67E5;&#x554A;&#x67E5;,&#x7B49;&#x67E5;&#x597D;&#x4E86;(&#x53EF;&#x80FD;&#x662F;5&#x79D2;,&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x4E00;&#x5929;)&#x544A;&#x8BC9;&#x4F60;&#x7ED3;&#x679C;&#xFF08;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF09;.&#x8FD9;&#x5176;&#x4E2D;&#x4F60;&#x7535;&#x8BDD;&#x4E0D;&#x53EF;&#x4EE5;&#x6302;&#x65AD;.(&#x7B49;&#x5F85;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;).&#x63A5;&#x6536;&#x4E0D;&#x5230;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;,&#x4E0D;&#x7EE7;&#x7EED;&#x4E0B;&#x9762;&#x7684;&#x64CD;&#x4F5C;(&#x6DD8;&#x5B9D;&#x4E70;).</p>
<p><span style="color: #ff0000;"><strong>&#x5728;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x4E0D;&#x5177;&#x5907;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;&#x7684;&#x80FD;&#x529B;</strong></span></p>
</blockquote>
<h5 id="&#x5F02;&#x6B65;"><a href="#&#x5F02;&#x6B65;" class="headerlink" title="&#x5F02;&#x6B65;"></a>&#x5F02;&#x6B65;</h5><p><strong>&#x4E0D;&#x5FC5;&#x7B49;&#x5F85;&#x8FD9;&#x4E00;&#x53E5;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;,&#x5C31;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x53E5;&#x4EE3;&#x7801;</strong></p>
<p>&#x8C03;&#x7528;&#x5728;&#x53D1;&#x51FA;&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;&#x8C03;&#x7528;&#x5C31;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x8FC7;&#x7A0B;&#x8C03;&#x7528;&#x53D1;&#x51FA;&#x540E;&#xFF0C;&#x8C03;&#x7528;&#x8005;&#x4E0D;&#x4F1A;&#x7ACB;&#x523B;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x3002;&#x800C;&#x662F;&#x5728;&#x8C03;&#x7528;&#x53D1;&#x51FA;&#x540E;&#xFF0C;&#x88AB;&#x8C03;&#x7528;&#x8005;&#x901A;&#x8FC7;&#x72B6;&#x6001;&#x3001;&#x901A;&#x77E5;&#x6765;&#x901A;&#x77E5;&#x8C03;&#x7528;&#x8005;&#xFF0C;&#x6216;&#x901A;&#x8FC7;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5904;&#x7406;&#x8FD9;&#x4E2A;&#x8C03;&#x7528;.</p>
<blockquote>
<p>&#x4F60;&#x6253;&#x7535;&#x8BDD;&#x95EE;&#x4E66;&#x5E97;&#x8001;&#x677F;&#x6709;&#x6CA1;&#x6709; &lt;&lt;BirdMichael&#x7684;GCD&#x8BB2;&#x89E3;&gt;&gt; &#x8FD9;&#x672C;&#x4E66;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5F02;&#x6B65;&#x901A;&#x4FE1;&#x673A;&#x5236;&#x2014;&#x53EF;&#x80FD;&#x4F60;&#x4F60;&#x6B63;&#x5728;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;(&#x901A;&#x8FC7;&#x6DD8;&#x5B9D;&#x67E5;&#x8BE2;),&#x7136;&#x540E;&#x62FF;&#x8D77;&#x7535;&#x8BDD;&#x7ED9;&#x4E66;&#x5E97;&#x8001;&#x677F;&#x6253;&#x4E86;&#x4E00;&#x4E2A;&#x7535;&#x8BDD;.&#x4E66;&#x5E97;&#x8001;&#x677F;&#x76F4;&#x63A5;&#x544A;&#x8BC9;&#x4F60;:&#x201D;&#x6211;&#x67E5;&#x4E00;&#x4E0B;&#x554A;,&#x67E5;&#x597D;&#x4E86;&#x6253;&#x7535;&#x8BDD;&#x7ED9;&#x4F60;&#x201D;,&#x7136;&#x540E;&#x76F4;&#x63A5;&#x6302;&#x4E86;&#x7535;&#x8BDD;(&#x4E0D;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;).&#x4F60;&#x7EE7;&#x7EED;&#x8BE5;&#x5E72;&#x54C8;&#x5E72;&#x54C8;.&#x7B49;&#x8001;&#x677F;&#x7136;&#x540E;&#x67E5;&#x597D;&#x4E86;,&#x4ED6;&#x4F1A;&#x4E3B;&#x52A8;&#x6253;&#x7535;&#x8BDD;&#x7ED9;&#x4F60;,&#x5728;&#x8FD9;&#x91CC;&#x8001;&#x677F;&#x901A;&#x8FC7;&#x201C;&#x56DE;&#x7535;&#x201D;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x56DE;&#x8C03;.</p>
<p><span style="color: #ff0000;"><strong>&#x5728;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x5177;&#x5907;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;&#x7684;&#x80FD;&#x529B;</strong></span></p>
</blockquote>
<h5 id="&#x51FD;&#x6570;&#x6307;&#x9488;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;"><a href="#&#x51FD;&#x6570;&#x6307;&#x9488;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;" class="headerlink" title="&#x51FD;&#x6570;&#x6307;&#x9488;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;"></a>&#x51FD;&#x6570;&#x6307;&#x9488;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;</h5><p>&#x4E5F;&#x5C31;&#x662F;dispatch_sync_f&#x51FD;&#x6570;&#x548C;dispatch_async_f&#x51FD;&#x6570;.&#x51FD;&#x6570;&#x6307;&#x9488;&#x7684;&#x4F20;&#x9012;&#x7C7B;&#x5C5E;&#x4E8E;pthread.</p>
<blockquote>
<p><strong>&#x51FD;&#x6570;&#x6307;&#x9488;&#x8C03;&#x5EA6;<span style="color: #ff0000;">&#x51E0;&#x4E4E;&#x4E0D;&#x7528;</span>!!&#x53EA;&#x4E3A;&#x9762;&#x8BD5;&#x4E86;&#x89E3;&#x5373;&#x53EF;.</strong></p>
</blockquote>
<h4 id="Deadlock-&#x6B7B;&#x9501;"><a href="#Deadlock-&#x6B7B;&#x9501;" class="headerlink" title="Deadlock &#x6B7B;&#x9501;"></a><strong>Deadlock &#x6B7B;&#x9501;</strong></h4><div>&#x4E24;&#x4E2A;(&#x6709;&#x65F6;&#x66F4;&#x591A;)&#x4E1C;&#x897F;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;,&#x662F;&#x7EBF;&#x7A0B;.&#x6240;&#x8C13;&#x7684;&#x6B7B;&#x9501;&#x662F;&#x6307;&#x5B83;&#x4EEC;&#x90FD;&#x5361;&#x4F4F;&#x4E86;,&#x5E76;&#x7B49;&#x5F85;&#x5BF9;&#x65B9;&#x5B8C;&#x6210;&#x6216;&#x6267;&#x884C;&#x5176;&#x5B83;&#x64CD;&#x4F5C;.&#x7B2C;&#x4E00;&#x4E2A;&#x4E0D;&#x80FD;&#x5B8C;&#x6210;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x5728;&#x7B49;&#x5F85;&#x7B2C;&#x4E8C;&#x4E2A;&#x7684;&#x5B8C;&#x6210;.&#x4F46;&#x7B2C;&#x4E8C;&#x4E2A;&#x4E5F;&#x4E0D;&#x80FD;&#x5B8C;&#x6210;,&#x56E0;&#x4E3A;&#x5B83;&#x5728;&#x7B49;&#x5F85;&#x7B2C;&#x4E00;&#x4E2A;&#x7684;&#x5B8C;&#x6210;.</div><br><div><br><pre class="lang:objc decode:true  ">// &#x5168;&#x5C40;&#x961F;&#x5217;&#xFF0C;&#x90FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0A;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4F1A;&#x6B7B;&#x9501;<br>dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);<br>// &#x5E76;&#x884C;&#x961F;&#x5217;&#xFF0C;&#x90FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0A;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4F1A;&#x6B7B;&#x9501;<br>dispatch_queue_t q = dispatch_queue_create(&#x201C;com.birdmichael.concurrent&#x201D;, DISPATCH_QUEUE_CONCURRENT);<br>// &#x4E32;&#x884C;&#x961F;&#x5217;&#xFF0C;&#x4F1A;&#x6B7B;&#x9501;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6267;&#x884C;&#x5D4C;&#x5957;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x7684;&#x4EE3;&#x7801;<br>dispatch_queue_t q = dispatch_queue_create(&#x201C;com.birdmichael.serial&#x201D;, DISPATCH_QUEUE_SERIAL);<br>// &#x76F4;&#x63A5;&#x6B7B;&#x9501;<br>dispatch_queue_t q = dispatch_get_main_queue();<br><br>dispatch_sync(q, ^{<br>    NSLog(@&#x201D;&#x540C;&#x6B65;&#x4EFB;&#x52A1; %@&#x201D;, [NSThread currentThread]);<br>    dispatch_sync(q, ^{<br>        NSLog(@&#x201D;&#x540C;&#x6B65;&#x4EFB;&#x52A1; %@&#x201D;, [NSThread currentThread]);<br>    });<br>});</pre><br></div><br><div><br><br>#### <strong>Context Switch &#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;</strong><br><br><div>&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x6307;&#x5F53;&#x4F60;&#x5728;&#x5355;&#x4E2A;&#x8FDB;&#x7A0B;&#x91CC;&#x5207;&#x6362;&#x6267;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x7EBF;&#x7A0B;&#x65F6;&#x5B58;&#x50A8;&#x4E0E;&#x6062;&#x590D;&#x6267;&#x884C;&#x72B6;&#x6001;&#x7684;&#x8FC7;&#x7A0B;.&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5728;&#x7F16;&#x5199;&#x591A;&#x4EFB;&#x52A1;&#x5E94;&#x7528;&#x65F6;&#x5F88;&#x666E;&#x904D;&#xFF0C;&#x4F46;&#x4F1A;&#x5E26;&#x6765;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x5F00;&#x9500;&#x3002;</div>

<h4 id="Concurrency-vs-Parallelism-&#x5E76;&#x53D1;&#x4E0E;&#x5E76;&#x884C;"><a href="#Concurrency-vs-Parallelism-&#x5E76;&#x53D1;&#x4E0E;&#x5E76;&#x884C;" class="headerlink" title="Concurrency vs Parallelism &#x5E76;&#x53D1;&#x4E0E;&#x5E76;&#x884C;"></a><strong>Concurrency vs Parallelism &#x5E76;&#x53D1;&#x4E0E;&#x5E76;&#x884C;</strong></h4><div>&#x5E76;&#x53D1;&#x548C;&#x5E76;&#x884C;&#x901A;&#x5E38;&#x88AB;&#x4E00;&#x8D77;&#x63D0;&#x5230;,&#x6240;&#x4EE5;&#x503C;&#x5F97;&#x82B1;&#x4E9B;&#x65F6;&#x95F4;&#x89E3;&#x91CA;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;.</div><br><div>&#x5E76;&#x53D1;&#x4EE3;&#x7801;&#x7684;&#x4E0D;&#x540C;&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x201C;&#x540C;&#x6B65;&#x201D;&#x6267;&#x884C;.&#x7136;&#x800C;,&#x8BE5;&#x600E;&#x6837;&#x53D1;&#x751F;&#x6216;&#x662F;&#x5426;&#x53D1;&#x751F;&#x90FD;&#x53D6;&#x51B3;&#x4E8E;&#x7CFB;&#x7EDF;.&#x591A;&#x6838;&#x8BBE;&#x5907;&#x901A;&#x8FC7;&#x5E76;&#x884C;&#x6765;&#x540C;&#x65F6;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x7EBF;.&#x7136;&#x800C;,&#x4E3A;&#x4E86;&#x4F7F;&#x5355;&#x6838;&#x8BBE;&#x5907;&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9;,&#x5B83;&#x4EEC;&#x5FC5;&#x987B;&#x5148;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;,&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;,&#x7136;&#x540E;&#x8FD0;&#x884C;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6216;&#x8FDB;&#x7A0B;.&#x8FD9;&#x901A;&#x5E38;&#x53D1;&#x751F;&#x5730;&#x8DB3;&#x591F;&#x5FEB;&#x4EE5;&#x81F4;&#x7ED9;&#x6211;&#x4EEC;&#x5E76;&#x53D1;&#x6267;&#x884C;&#x5730;&#x9519;&#x89C9;.&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</div><br><div></div><br><div><img src="http://birdmichael.com/wp-content/uploads/2015/07/4673_140428093433_1.png" alt="4673_140428093433_1"></div><br><div>&#x867D;&#x7136;&#x4F60;&#x53EF;&#x4EE5;&#x7F16;&#x5199;&#x4EE3;&#x7801;&#x5728; GCD &#x4E0B;&#x5E76;&#x53D1;&#x6267;&#x884C;,&#x4F46; GCD &#x4F1A;&#x51B3;&#x5B9A;&#x6709;&#x591A;&#x5C11;&#x5E76;&#x884C;&#x7684;&#x9700;&#x6C42;.&#x5E76;&#x884C;&#x8981;&#x6C42;&#x5E76;&#x53D1;,&#x4F46;&#x5E76;&#x53D1;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x5E76;&#x884C;.</div><br><div>&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x89C2;&#x70B9;&#x662F;&#x5E76;&#x53D1;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5173;&#x4E8E;&#x6784;&#x9020;.&#x5F53;&#x4F60;&#x5728;&#x8111;&#x6D77;&#x4E2D;&#x7528; GCD &#x7F16;&#x5199;&#x4EE3;&#x7801;,&#x4F60;&#x7EC4;&#x7EC7;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x6765;&#x66B4;&#x9732;&#x80FD;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x7684;&#x591A;&#x4E2A;&#x5DE5;&#x4F5C;&#x7247;&#x6BB5;,&#x4EE5;&#x53CA;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x7684;&#x90A3;&#x4E9B;.&#x5982;&#x679C;&#x4F60;&#x60F3;&#x6DF1;&#x5165;&#x6B64;&#x4E3B;&#x9898;.&#x770B;&#x770B;<a href="http://vimeo.com/49718712" target="_blank" rel="external"> this excellent talk by Rob Pike</a> .</div><br>&gt; <div>&#x7B80;&#x5355;&#x7684;&#x8BF4;,&#x5E76;&#x53D1;&#x548C;&#x5E76;&#x884C;&#x5176;&#x5B9E;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;.&#x5728;&#x591A;&#x6838;&#x4E2D;,&#x4F7F;&#x7528;&#x5E76;&#x884C;.&#x6BCF;&#x4E2A;&#x6838;&#x5904;&#x7406;&#x4E0D;&#x540C;&#x4EFB;&#x52A1;.&#x800C;&#x5728;&#x5355;&#x6838;&#x4E2D;,&#x4E3A;&#x4E86;&#x6253;&#x6D88;&#x540C;&#x6837;&#x7684;&#x6548;&#x679C;,&#x5C31;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x8BB2;&#x5230;&#x7684;&#x65F6;&#x95F4;&#x7247;&#x7684;&#x65B9;&#x5F0F;&#x901A;&#x8FC7;&#x4F2A;&#x591A;&#x4EFB;&#x52A1;&#x5B9E;&#x73B0;.</div><br></div>

<h3 id="&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;dispatch-queue-&#x961F;&#x5217;"><a href="#&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;dispatch-queue-&#x961F;&#x5217;" class="headerlink" title="&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;dispatch queue(&#x961F;&#x5217;)"></a>&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;<strong>dispatch queue(&#x961F;&#x5217;)</strong></h3><h4 id="&#x521B;&#x5EFA;&#x4E32;&#x884C;Dispatch-Queue"><a href="#&#x521B;&#x5EFA;&#x4E32;&#x884C;Dispatch-Queue" class="headerlink" title="&#x521B;&#x5EFA;&#x4E32;&#x884C;Dispatch Queue"></a>&#x521B;&#x5EFA;&#x4E32;&#x884C;Dispatch Queue</h4><p>&#x5E94;&#x7528;&#x7684;&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x6309;&#x7279;&#x5B9A;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x65F6;,&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x4E32;&#x884C;Dispatch Queue,&#x4E32;&#x884C;queue&#x6BCF;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E32;&#x884C;queue&#x6765;&#x66FF;&#x4EE3;&#x9501;,&#x4FDD;&#x62A4;&#x5171;&#x4EAB;&#x8D44;&#x6E90; &#x6216;&#x53EF;&#x53D8;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;&#x548C;&#x9501;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x662F;,&#x4E32;&#x884C;queue&#x786E;&#x4FDD;&#x4EFB;&#x52A1;&#x6309;&#x53EF;&#x9884;&#x6D4B;&#x7684;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x800C;&#x4E14;&#x53EA;&#x8981;&#x4F60;&#x5F02;&#x6B65;&#x5730;&#x63D0;&#x4EA4;&#x4EFB;&#x52A1;&#x5230;&#x4E32;&#x884C;queue,&#x5C31;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x6B7B;&#x9501;</p>
<p>&#x4F60;&#x5FC5;&#x987B;&#x663E;&#x5F0F;&#x5730;&#x521B;&#x5EFA;&#x548C;&#x7BA1;&#x7406;&#x6240;&#x6709;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x4E32;&#x884C;queue,&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x4E32;&#x884C;queue,&#x4F46;&#x4E0D;&#x8981;&#x4E3A;&#x4E86;&#x540C;&#x65F6;&#x6267;&#x884C;&#x66F4;&#x591A;&#x4EFB;&#x52A1;&#x800C;&#x521B;&#x5EFA;&#x66F4;&#x591A;&#x7684;&#x4E32;&#x884C;queue&#x3002;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x5E76;&#x53D1;&#x5730;&#x6267;&#x884C;&#x5927;&#x91CF;&#x4EFB;&#x52A1;,&#x5E94;&#x8BE5;&#x628A;&#x4EFB;&#x52A1;&#x63D0;&#x4EA4;&#x5230;&#x5168;&#x5C40;&#x5E76;&#x53D1;queue</p>
<p>&#x5229;&#x7528;dispatch_queue_create&#x51FD;&#x6570;&#x521B;&#x5EFA;&#x4E32;&#x884C;queue,&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;queue&#x540D;&#x548C;&#x4E00;&#x7EC4;queue&#x5C5E;&#x6027;</p>
<pre class="lang:objc decode:true">dispatch_queue_t queue = dispatch_queue_create(&quot;com.birdmichael.serial, NULL);</pre>
&#x6216;&#x8005;:
<pre class="lang:objc decode:true">dispatch_queue_t queue = dispatch_queue_create(&quot;com.birdmichael.serial, DISPATCH_QUEUE_SERIAL);</pre>
<pre class="lang:objc decode:true">/*!
 * @const DISPATCH_QUEUE_SERIAL
 * @discussion A dispatch queue that invokes blocks serially in FIFO order.
 */
#define DISPATCH_QUEUE_SERIAL NULL

/*!
 * @const DISPATCH_QUEUE_CONCURRENT
 * @discussion A dispatch queue that may invoke blocks concurrently and supports
 * barrier blocks submitted with the dispatch barrier API.
 */
#define DISPATCH_QUEUE_CONCURRENT \
        DISPATCH_GLOBAL_OBJECT(dispatch_queue_attr_t, \
        _dispatch_queue_attr_concurrent)
__OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_3)
DISPATCH_EXPORT
struct dispatch_queue_attr_s _dispatch_queue_attr_concurrent;
</pre>

<h4 id="&#x521B;&#x5EFA;&#x5E76;&#x884C;Dispatch-Queue"><a href="#&#x521B;&#x5EFA;&#x5E76;&#x884C;Dispatch-Queue" class="headerlink" title="&#x521B;&#x5EFA;&#x5E76;&#x884C;Dispatch Queue"></a>&#x521B;&#x5EFA;&#x5E76;&#x884C;Dispatch Queue</h4><p>&#x4E0E;&#x5168;&#x5C40;&#x83B7;&#x53D6;&#x5230;&#x5F97;&#x5E76;&#x884C;&#x961F;&#x5217;&#x533A;&#x522B;&#x662F;&#x591A;&#x4E86;&#x4E00;&#x4E2A;queue&#x540D;</p>
<pre class="lang:objc decode:true ">dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael.concurrent&quot;, DISPATCH_QUEUE_CONCURRENT);
</pre>
![QQ20150801-1@2x](http://birdmichael.com/wp-content/uploads/2015/07/QQ20150801-1@2x.png)

&#x5982;&#x56FE;&#x6240;&#x793A;:&#x8C03;&#x8BD5;&#x4E2D;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x770B;&#x5230;&#x5F53;&#x524D;&#x961F;&#x5217;&#x5728;&#x54EA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;

&#x5F53;&#x6709;&#x591A;&#x4E2A;&#x5E76;&#x53D1;&#x961F;&#x5217;&#x6216;&#x8005;&#x9700;&#x8981;&#x5BF9;&#x961F;&#x5217;&#x8C03;&#x8BD5;&#x624D;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x5E76;&#x884C;Queue,&#x4E00;&#x822C;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x516C;&#x5171;&#x5168;&#x5C40;Queue.

#### &#x83B7;&#x5F97;&#x516C;&#x5171;Queue

GCD&#x63D0;&#x4F9B;&#x4E86;&#x51FD;&#x6570;&#x8BA9;&#x5E94;&#x7528;&#x8BBF;&#x95EE;&#x51E0;&#x4E2A;&#x516C;&#x5171;dispatch queue:

&#x4F7F;&#x7528;dispatch_get_current_queue&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x8C03;&#x8BD5;&#x7528;&#x9014;,&#x6216;&#x8005;&#x6D4B;&#x8BD5;&#x5F53;&#x524D;queue&#x7684;&#x6807;&#x8BC6;.&#x5728;block&#x5BF9;&#x8C61;&#x4E2D;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4F1A;&#x8FD4;&#x56DE;block&#x63D0;&#x4EA4;&#x5230;&#x7684;queue(&#x8FD9;&#x4E2A;&#x65F6;&#x5019;queue&#x5E94;&#x8BE5;&#x6B63;&#x5728;&#x6267;&#x884C;&#x4E2D;).&#x5728;block&#x5BF9;&#x8C61;&#x4E4B;&#x5916;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4F1A;&#x8FD4;&#x56DE;&#x5E94;&#x7528;&#x7684;&#x9ED8;&#x8BA4;&#x5E76;&#x53D1;queue.
&#x4F7F;&#x7528;dispatch_get_main_queue&#x51FD;&#x6570;&#x83B7;&#x5F97;&#x5E94;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;&#x5173;&#x8054;&#x7684;&#x4E32;&#x884C;dispatch queue
&#x4F7F;&#x7528;dispatch_get_global_queue&#x6765;&#x83B7;&#x5F97;&#x5171;&#x4EAB;&#x7684;&#x5E76;&#x53D1;queue

##### &#x83B7;&#x5F97;&#x5168;&#x5C40;&#x5E76;&#x53D1;Dispatch Queue

&#x5E76;&#x53D1;dispatch queue&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5E76;&#x884C;&#x5730;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;,&#x4E0D;&#x8FC7;&#x5E76;&#x53D1;queue&#x4ECD;&#x7136;&#x6309;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x542F;&#x52A8;&#x4EFB;&#x52A1;&#x3002;&#x5E76;&#x53D1;queue&#x4F1A;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x4EFB;&#x52A1;&#x5B8C;&#x6210;&#x4E4B;&#x524D;&#x5C31;&#x51FA;&#x5217;&#x4E0B;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x5E76;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x3002;&#x5E76;&#x53D1;queue&#x540C;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x6570;&#x91CF;&#x4F1A;&#x6839;&#x636E;&#x5E94;&#x7528;&#x548C;&#x7CFB;&#x7EDF;&#x52A8;&#x6001;&#x53D8;&#x5316;,&#x5404;&#x79CD;&#x56E0;&#x7D20;&#x5305;&#x62EC;:**&#x53EF;&#x7528;&#x6838;&#x6570;&#x91CF;**&#x3001;&#x5176;&#x5B83;**&#x8FDB;&#x7A0B;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x5DE5;&#x4F5C;&#x6570;&#x91CF;**&#x3001;**&#x5176;&#x5B83;&#x4E32;&#x884C;dispatch queue&#x4E2D;&#x4F18;&#x5148;&#x4EFB;&#x52A1;&#x7684;&#x6570;&#x91CF;**&#x7B49;.

&#x7CFB;&#x7EDF;&#x7ED9;&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x63D0;&#x4F9B;&#x4E09;&#x4E2A;&#x5E76;&#x53D1;dispatch queue,&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x5185;&#x5168;&#x5C40;&#x5171;&#x4EAB;,&#x4E09;&#x4E2A;queue&#x7684;&#x533A;&#x522B;&#x662F;&#x4F18;&#x5148;&#x7EA7;&#x3002;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x5730;&#x521B;&#x5EFA;&#x8FD9;&#x4E9B;queue,&#x4F7F;&#x7528;dispatch_get_global_queue&#x51FD;&#x6570;&#x6765;&#x83B7;&#x53D6;&#x8FD9;&#x4E09;&#x4E2A;queue:
<pre class="lang:objc decode:true">// &#x83B7;&#x53D6;&#x9ED8;&#x8BA4;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x5168;&#x5C40;&#x5E76;&#x53D1;dispatch queue
    dispatch_queue_t  queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</pre>
&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x4F18;&#x5148;&#x7EA7;,&#x5206;&#x522B;&#x4F7F;&#x7528;DISPATCH_QUEUE_PRIORITY_HIGH&#x548C;DISPATCH_QUEUE_PRIORITY_LOW&#x4E24;&#x4E2A;&#x5E38;&#x91CF;&#x6765;&#x83B7;&#x53D6;&#x9AD8;&#x548C;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4E24;&#x4E2A;queue,&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<span class="s1">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>&#xFF1B;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x76EE;&#x524D;&#x672A;&#x4F7F;&#x7528;&#x5230;,&#x4E3A;&#x7CFB;&#x7EDF;&#x4FDD;&#x7559;&#x9879;,&#x9ED8;&#x8BA4;0&#x5373;&#x53EF;

&#x867D;&#x7136;dispatch queue&#x662F;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x7684;&#x5BF9;&#x8C61;,&#x4F46;&#x4F60;&#x4E0D;&#x9700;&#x8981;retain&#x548C;release&#x5168;&#x5C40;&#x5E76;&#x53D1;queue.(&#x5728;ARC&#x73AF;&#x5883;&#x4E2D;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x8BA1;&#x6570;&#x5668;)&#x56E0;&#x4E3A;&#x8FD9;&#x4E9B;queue&#x5BF9;&#x5E94;&#x7528;&#x662F;&#x5168;&#x5C40;&#x7684;,retain&#x548C;release&#x8C03;&#x7528;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;.&#x4F60;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x8FD9;&#x4E09;&#x4E2A;queue&#x7684;&#x5F15;&#x7528;,&#x6BCF;&#x6B21;&#x90FD;&#x76F4;&#x63A5;&#x8C03;&#x7528;dispatch_get_global_queue&#x83B7;&#x5F97;queue&#x5C31;&#x884C;&#x4E86;.

##### &#x83B7;&#x5F97;(&#x4E3B;&#x961F;&#x5217;)&#x4E32;&#x884C;Dispatch Queue

<pre class="lang:objc decode:true ">// &#x83B7;&#x53D6;&#x4E3B;&#x961F;&#x5217;&#x4E32;&#x884C;dispatch queue
    dispatch_queue_t  queue = dispatch_get_main_queue();</pre>
&#x4E3B;&#x961F;&#x5217;&#x662F;GCD&#x81EA;&#x5E26;&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x4E32;&#x884C;&#x961F;&#x5217;,&#x653E;&#x5728;&#x4E3B;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x4EFB;&#x52A1;,&#x90FD;&#x4F1A;&#x653E;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;.

#### Dispatch Queue&#x7684;&#x5185;&#x5B58;&#x7BA1;&#x7406;

**&#x5728;ARC&#x73AF;&#x5883;&#x4E2D;,&#x4E0D;&#x9700;&#x8981;&#x7BA1;&#x7406;dispatch queue&#x7684;&#x5185;&#x5B58;&#x95EE;&#x9898;,&#x4EA4;&#x7531;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;.&#x5728;&#x975E;ARC&#x4E2D;,&#x503C;&#x9700;&#x8981;release&#x521B;&#x5EFA;&#x7684;&#x961F;&#x5217;,get&#x7684;&#x4E0D;&#x7528;release.**

Dispatch Queue&#x548C;&#x5176;&#x5B83;dispatch&#x5BF9;&#x8C61;(&#x8FD8;&#x6709;dispatch source)&#x90FD;&#x662F;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;.&#x5F53;&#x4F60;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E32;&#x884C;dispatch queue&#x65F6;,&#x521D;&#x59CB;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x4E3A; 1,&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;dispatch_retain&#x548C;dispatch_release&#x51FD;&#x6570;&#x6765;&#x589E;&#x52A0;&#x548C;&#x51CF;&#x5C11;&#x5F15;&#x7528;&#x8BA1;&#x6570;.&#x5F53;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x5230;&#x8FBE; 0 &#x65F6;,&#x7CFB;&#x7EDF;&#x4F1A;&#x5F02;&#x6B65;&#x5730;&#x9500;&#x6BC1;&#x8FD9;&#x4E2A;queue

&#x5BF9;dispatch&#x5BF9;&#x8C61;(&#x5982;dispatch queue)retain&#x548C;release &#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;,&#x786E;&#x4FDD;&#x5B83;&#x4EEC;&#x88AB;&#x4F7F;&#x7528;&#x65F6;&#x80FD;&#x591F;&#x4FDD;&#x7559;&#x5728;&#x5185;&#x5B58;&#x4E2D;.&#x548C;OC&#x5BF9;&#x8C61;&#x4E00;&#x6837;,&#x901A;&#x7528;&#x7684;&#x89C4;&#x5219;&#x662F;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;queue,&#x4F60;&#x5E94;&#x8BE5;&#x5728;&#x4F7F;&#x7528;&#x524D;retain,&#x4F7F;&#x7528;&#x5B8C;&#x4E4B;&#x540E;release

&#x4F60;&#x4E0D;&#x9700;&#x8981;retain&#x6216;release&#x5168;&#x5C40;dispatch queue,&#x5305;&#x62EC;&#x5168;&#x5C40;&#x5E76;&#x53D1;dispatch queue&#x548C;main dispatch queue

&#x5373;&#x4F7F;&#x4F60;&#x5B9E;&#x73B0;&#x7684;&#x662F;&#x81EA;&#x52A8;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7684;&#x5E94;&#x7528;,&#x4E5F;&#x9700;&#x8981;retain&#x548C;release&#x521B;&#x5EFA;&#x7684;dispatch queue&#x548C;&#x5176;&#x5B83;dispatch&#x5BF9;&#x8C61;.GCD &#x4E0D;&#x652F;&#x6301;&#x5783;&#x573E;&#x6536;&#x96C6;&#x6A21;&#x578B;&#x6765;&#x56DE;&#x6536;&#x5185;&#x5B58;

### **&#x6DFB;&#x52A0;&#x4EFB;&#x52A1;(&#x64CD;&#x4F5C;)&#x5230;queue(&#x961F;&#x5217;)**

&#x8981;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;,&#x9996;&#x5148;&#x4F60;&#x9700;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x4EFB;&#x52A1;&#x7531;block&#x5C01;&#x88C5;&#x8D77;&#x6765;.&#x7136;&#x540E;&#x628A;&#x5B83;&#x4F60;&#x9700;&#x8981;&#x5C06;&#x5B83;&#x6DFB;&#x52A0;&#x5230;&#x4E00;&#x4E2A;&#x9002;&#x5F53;&#x7684;dispatch queue.&#x4F60;&#x53EF;&#x4EE5;&#x5355;&#x4E2A;&#x6216;&#x6309;&#x7EC4;&#x6765;&#x6DFB;&#x52A0;,&#x4E5F;&#x53EF;&#x4EE5;&#x540C;&#x6B65;&#x6216;&#x5F02;&#x6B65;&#x5730;&#x6267;&#x884C;&#x5355;&#x4E00;&#x4EFB;&#x52A1;.

#### **dispatch_async(&#x5F02;&#x6B65;&#x8C03;&#x7528;)**

<div>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x754C;&#x9762;&#x5728;&#x5904;&#x7406;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#x65F6;&#x5361;&#x6B7B;,&#x6BD4;&#x5982;&#x8BFB;&#x53D6;&#x7F51;&#x7EDC;&#x6570;&#x636E;,IO,&#x6570;&#x636E;&#x5E93;&#x8BFB;&#x5199;&#x7B49;,&#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;,&#x7136;&#x540E;&#x901A;&#x77E5;&#x4E3B;&#x7EBF;&#x7A0B;&#x66F4;&#x65B0;&#x754C;&#x9762;.</div>
<div>
<pre class="lang:objc decode:true">// &#x5C06;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x653E;&#x5165;&#x961F;&#x5217;&#x4E2D;
    dispatch_async(&lt;#dispatch_queue_t queue#&gt;, ^{
        &lt;#code#&gt;
    })</pre>

<h4 id="dispatch-sync-&#x540C;&#x6B65;&#x8C03;&#x7528;"><a href="#dispatch-sync-&#x540C;&#x6B65;&#x8C03;&#x7528;" class="headerlink" title="dispatch_sync(&#x540C;&#x6B65;&#x8C03;&#x7528;)"></a><strong>dispatch_sync(&#x540C;&#x6B65;&#x8C03;&#x7528;)</strong></h4><p>&#x5C11;&#x6570;&#x65F6;&#x5019;&#x4F60;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x540C;&#x6B65;&#x5730;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;,&#x4EE5;&#x907F;&#x514D;&#x7ADE;&#x4E89;&#x6761;&#x4EF6;&#x6216;&#x5176;&#x5B83;&#x540C;&#x6B65;&#x9519;&#x8BEF;.&#x6BD4;&#x5982;&#x963B;&#x585E;&#x5E76;&#x884C;&#x961F;&#x5217;&#x7684;&#x6267;&#x884C;,&#x8981;&#x6C42;&#x67D0;&#x4E00;&#x64CD;&#x4F5C;&#x6267;&#x884C;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x64CD;&#x4F5C;,&#x5982;&#x7528;&#x6237;&#x767B;&#x5F55;.</p>
<pre class="lang:objc decode:true ">// &#x5168;&#x5C40;&#x961F;&#x5217;&#xFF0C;&#x90FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0A;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4F1A;&#x6B7B;&#x9501;
dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
// &#x5E76;&#x884C;&#x961F;&#x5217;&#xFF0C;&#x90FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0A;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4F1A;&#x6B7B;&#x9501;
dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael.concurrent&quot;, DISPATCH_QUEUE_CONCURRENT);
// &#x4E32;&#x884C;&#x961F;&#x5217;&#xFF0C;&#x4F1A;&#x6B7B;&#x9501;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6267;&#x884C;&#x5D4C;&#x5957;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x7684;&#x4EE3;&#x7801;
dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael.serial&quot;, DISPATCH_QUEUE_SERIAL);
// &#x76F4;&#x63A5;&#x6B7B;&#x9501;
dispatch_queue_t q = dispatch_get_main_queue();

dispatch_sync(q, ^{
    NSLog(@&quot;&#x540C;&#x6B65;&#x4EFB;&#x52A1; %@&quot;, [NSThread currentThread]);
    dispatch_sync(q, ^{
        NSLog(@&quot;&#x540C;&#x6B65;&#x4EFB;&#x52A1; %@&quot;, [NSThread currentThread]);
    });
});
</pre>

<h3 id="&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x53CA;&#x961F;&#x5217;&#x7EBF;&#x7A0B;&#x7814;&#x7A76;&#x6D4B;&#x8BD5;"><a href="#&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x53CA;&#x961F;&#x5217;&#x7EBF;&#x7A0B;&#x7814;&#x7A76;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x53CA;&#x961F;&#x5217;&#x7EBF;&#x7A0B;&#x7814;&#x7A76;&#x6D4B;&#x8BD5;"></a>&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x53CA;&#x961F;&#x5217;&#x7EBF;&#x7A0B;&#x7814;&#x7A76;&#x6D4B;&#x8BD5;</h3><h4 id="&#x4E3B;&#x7EBF;&#x7A0B;"><a href="#&#x4E3B;&#x7EBF;&#x7A0B;" class="headerlink" title="&#x4E3B;&#x7EBF;&#x7A0B;"></a>&#x4E3B;&#x7EBF;&#x7A0B;</h4><p></p></div><p></p>
<div><br><pre class="lang:objc decode:true">//<br>//  ViewController.m<br>//  GCD<br>//<br>//  Created by &#x674E; &#x9633; on 15/7/31.<br>//  Copyright (c) 2015&#x5E74; BirdMIchael. All rights reserved.<br>//<br><br>#import &#x201C;ViewController.h&#x201D;<br><br>@interface ViewController ()<br><br>@end<br><br>@implementation ViewController<br><br>- (void)viewDidLoad {<br>    [super viewDidLoad];<br>    for (int i = 0;i &lt; 10 ;++i)<br>    {<br>        NSLog(@&#x201D;&#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)%@ -&gt;%d&#x201D;,[NSThread currentThread],i);<br>    }<br>}<br>@end</pre><br>&#x8F93;&#x51FA;&#x7ED3;&#x679C;:<br><pre class="lang:objc decode:true">2015-08-01 16:47:53.018 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;0<br>2015-08-01 16:47:53.018 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;1<br>2015-08-01 16:47:53.019 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;2<br>2015-08-01 16:47:53.019 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;3<br>2015-08-01 16:47:53.019 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;4<br>2015-08-01 16:47:53.019 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;5<br>2015-08-01 16:47:53.019 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;6<br>2015-08-01 16:47:53.019 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;7<br>2015-08-01 16:47:53.032 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;8<br>2015-08-01 16:47:53.034 GCD[98013:323175] &#x4E3B;&#x8FDB;&#x7A0B;(UI&#x8FDB;&#x7A0B;)&lt;NSThread: 0x7f8a52d289a0&gt;{number = 1, name = main} -&gt;9</pre><br>&#x7ED3;&#x8BBA;:&#x90FD;&#x5728;&#x7EBF;&#x7A0B;1(&#x4E3B;&#x7EBF;&#x7A0B;)&#x8FD0;&#x884C;,&#x4E0D;&#x4F1A;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;.<br><br>#### &#x4E32;&#x884C;&#x961F;&#x5217;&#x5F02;&#x6B65;&#x8C03;&#x7528;<br><br><pre class="lang:objc decode:true">- (void)viewDidLoad {<br>    [super viewDidLoad];<br><br>    [self gcdtest];<br>}<br>// &#x4E32;&#x884C; &#x5F02;&#x6B65;<br>- (void)gcdtest<br>{<br>    dispatch_queue_t q = dispatch_queue_create(&#x201C;com.birdmichael&#x201D;, DISPATCH_QUEUE_SERIAL);<br>    for (int i = 0;i &lt; 10 ;++i){<br>        dispatch_async(q, ^{<br>            NSLog(@&#x201D;&#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;%@ -&gt;%d&#x201D;,[NSThread currentThread],i);<br>            });<br>        }<br>}</pre><br>&#x8F93;&#x51FA;:<br><pre class="lang:objc decode:true ">2015-08-01 16:57:01.707 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;0<br>2015-08-01 16:57:01.728 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;1<br>2015-08-01 16:57:01.729 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;2<br>2015-08-01 16:57:01.729 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;3<br>2015-08-01 16:57:01.729 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;4<br>2015-08-01 16:57:01.729 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;5<br>2015-08-01 16:57:01.729 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;6<br>2015-08-01 16:57:01.729 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;7<br>2015-08-01 16:57:01.734 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;8<br>2015-08-01 16:57:01.734 GCD[99504:330237] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fa3094438f0&gt;{number = 2, name = (null)} -&gt;9</pre><br>&#x7ED3;&#x8BBA;:&#x90FD;<strong>&#x4EC5;</strong>&#x5728;&#x7EBF;&#x7A0B;2&#x8FD0;&#x884C;,&#x5F00;&#x542F;<strong>&#x65B0;&#x7EBF;&#x7A0B;</strong>,<strong>&#x6709;&#x5E8F;</strong>.<br><br></div><br><div><br><br>#### &#x5E76;&#x884C;&#x961F;&#x5217;&#x5F02;&#x6B65;&#x8C03;&#x7528;<br><br><pre class="lang:objc decode:true ">- (void)viewDidLoad {<br>    [super viewDidLoad];<br><br>    [self gcdtest2];<br>}<br>// &#x5E76;&#x884C; &#x5F02;&#x6B65;<br>- (void)gcdtest2<br>{<br>    dispatch_queue_t q = dispatch_queue_create(&#x201C;com.birdmichael2&#x201D;, DISPATCH_QUEUE_CONCURRENT);<br>    for (int i = 0;i &lt; 20 ;++i){<br>    dispatch_async(q, ^{<br>            NSLog(@&#x201D;&#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;%@ -&gt;%d&#x201D;,[NSThread currentThread],i);<br>    });<br>    }<br>}</pre><br>&#x8F93;&#x51FA;:<br><pre class="lang:objc decode:true ">2015-08-01 17:16:33.626 GCD[2997:344435] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dab5e0&gt;{number = 2, name = (null)} -&gt;0<br>2015-08-01 17:16:33.626 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;1<br>2015-08-01 17:16:33.630 GCD[2997:344435] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dab5e0&gt;{number = 2, name = (null)} -&gt;2<br>2015-08-01 17:16:33.632 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;3<br>2015-08-01 17:16:33.643 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;5<br>2015-08-01 17:16:33.643 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;6<br>2015-08-01 17:16:33.643 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;7<br>2015-08-01 17:16:33.644 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;8<br>2015-08-01 17:16:33.644 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;9<br>2015-08-01 17:16:33.644 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;10<br>2015-08-01 17:16:33.645 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;11<br>2015-08-01 17:16:33.645 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;12<br>2015-08-01 17:16:33.642 GCD[2997:344435] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dab5e0&gt;{number = 2, name = (null)} -&gt;4<br>2015-08-01 17:16:33.646 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;13<br>2015-08-01 17:16:33.646 GCD[2997:344435] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dab5e0&gt;{number = 2, name = (null)} -&gt;14<br>2015-08-01 17:16:33.646 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;15<br>2015-08-01 17:16:33.647 GCD[2997:344435] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dab5e0&gt;{number = 2, name = (null)} -&gt;16<br>2015-08-01 17:16:33.647 GCD[2997:344440] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dabe20&gt;{number = 4, name = (null)} -&gt;17<br>2015-08-01 17:16:33.648 GCD[2997:344437] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758d9c0d0&gt;{number = 3, name = (null)} -&gt;18<br>2015-08-01 17:16:33.649 GCD[2997:344435] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fd758dab5e0&gt;{number = 2, name = (null)} -&gt;19</pre><br>&#x7ED3;&#x8BBA;:&#x90FD;&#x5728;&#x7EBF;&#x7A0B;&#x4F1A;<strong>&#x591A;&#x5F00;N&#x4E2A;</strong>,&#x53EF;&#x4EE5;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;,<strong>&#x65E0;&#x5E8F;</strong>.<br><br></div>

<h4 id="&#x4E32;&#x884C;&#x961F;&#x5217;&#x540C;&#x6B65;&#x8C03;&#x7528;"><a href="#&#x4E32;&#x884C;&#x961F;&#x5217;&#x540C;&#x6B65;&#x8C03;&#x7528;" class="headerlink" title="&#x4E32;&#x884C;&#x961F;&#x5217;&#x540C;&#x6B65;&#x8C03;&#x7528;"></a>&#x4E32;&#x884C;&#x961F;&#x5217;&#x540C;&#x6B65;&#x8C03;&#x7528;</h4><pre class="lang:objc decode:true">- (void)viewDidLoad {
    [super viewDidLoad];

    [self gcdtest3 ];
}

// &#x4E32;&#x884C; &#x540C;&#x6B65;
- (void)gcdtest3
{
    dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael&quot;, DISPATCH_QUEUE_SERIAL);
    for (int i = 0;i &lt; 10 ;++i){
        dispatch_sync(q, ^{
            NSLog(@&quot;&#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true ">2015-08-01 17:24:15.133 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;0
2015-08-01 17:24:15.139 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;1
2015-08-01 17:24:15.139 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;2
2015-08-01 17:24:15.139 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;3
2015-08-01 17:24:15.139 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;4
2015-08-01 17:24:15.139 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;5
2015-08-01 17:24:15.140 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;6
2015-08-01 17:24:15.140 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;7
2015-08-01 17:24:15.145 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;8
2015-08-01 17:24:15.145 GCD[4215:349141] &#x4E32;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7fb1c1c28200&gt;{number = 1, name = main} -&gt;9</pre>
&#x7ED3;&#x8BBA;:&#x90FD;&#x518D;**&#x4E3B;&#x7EBF;&#x7A0B;**&#x8FD0;&#x884C;,**&#x4E0D;&#x5F00;&#x542F;**&#x65B0;&#x7EBF;&#x7A0B;,**&#x6709;&#x5E8F;**.

#### &#x5E76;&#x884C;&#x961F;&#x5217;&#x540C;&#x6B65;&#x8C03;&#x7528;

<pre class="lang:objc decode:true">- (void)viewDidLoad {
    [super viewDidLoad];

    [self gcdtest4];
}
// &#x5E76;&#x884C; &#x540C;&#x6B65;
- (void)gcdtest4
{
    dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael2&quot;, DISPATCH_QUEUE_CONCURRENT);
    for (int i = 0;i &lt; 20 ;++i){
        dispatch_sync(q, ^{
            NSLog(@&quot;&#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true ">2015-08-01 17:33:49.704 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;0
2015-08-01 17:33:49.704 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;1
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;2
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;3
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;4
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;5
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;6
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;7
2015-08-01 17:33:49.705 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;8
2015-08-01 17:33:49.706 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;9
2015-08-01 17:33:49.706 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;10
2015-08-01 17:33:49.706 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;11
2015-08-01 17:33:49.706 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;12
2015-08-01 17:33:49.706 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;13
2015-08-01 17:33:49.707 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;14
2015-08-01 17:33:49.707 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;15
2015-08-01 17:33:49.707 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;16
2015-08-01 17:33:49.707 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;17
2015-08-01 17:33:49.707 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;18
2015-08-01 17:33:49.717 GCD[5743:355585] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65;&#x8C03;&#x7528;&lt;NSThread: 0x7faa8ad11760&gt;{number = 1, name = main} -&gt;19</pre>
&#x7ED3;&#x8BBA;:&#x90FD;&#x518D;**&#x4E3B;&#x7EBF;&#x7A0B;**&#x8FD0;&#x884C;,**&#x4E0D;&#x5F00;&#x542F;**&#x65B0;&#x7EBF;&#x7A0B;,**&#x6709;&#x5E8F;**.

####  &#x5E76;&#x884C;&#x961F;&#x5217;&#x5148;&#x540C;&#x6B65;&#x540E;&#x5F02;&#x6B65;

<pre class="lang:objc decode:true ">- (void)viewDidLoad {
    [super viewDidLoad];

    [self gcdtest5];
}
// &#x5E76;&#x884C; &#x540C;&#x6B65;&#x540E;&#x5F02;&#x6B65;
- (void)gcdtest5
{
    dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael2&quot;, DISPATCH_QUEUE_CONCURRENT);
    for (int i = 0;i &lt; 20 ;++i){
        dispatch_sync(q, ^{
            NSLog(@&quot;&#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
    for (int i = 0;i &lt; 20 ;++i){
        dispatch_async(q, ^{
            NSLog(@&quot;&#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }

}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true ">2015-08-01 17:46:39.480 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;0
2015-08-01 17:46:39.480 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;1
2015-08-01 17:46:39.480 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;2
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;3
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;4
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;5
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;6
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;7
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;8
2015-08-01 17:46:39.481 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;9
2015-08-01 17:46:39.482 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;10
2015-08-01 17:46:39.482 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;11
2015-08-01 17:46:39.482 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;12
2015-08-01 17:46:39.482 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;13
2015-08-01 17:46:39.483 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;14
2015-08-01 17:46:39.483 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;15
2015-08-01 17:46:39.483 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;16
2015-08-01 17:46:39.483 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;17
2015-08-01 17:46:39.483 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;18
2015-08-01 17:46:39.483 GCD[7782:362965] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c28160&gt;{number = 1, name = main} -&gt;19
2015-08-01 17:46:39.488 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;0
2015-08-01 17:46:39.489 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;1
2015-08-01 17:46:39.489 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;2
2015-08-01 17:46:39.490 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;3
2015-08-01 17:46:39.491 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;4
2015-08-01 17:46:39.492 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;5
2015-08-01 17:46:39.492 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;6
2015-08-01 17:46:39.493 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;7
2015-08-01 17:46:39.494 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;8
2015-08-01 17:46:39.494 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;9
2015-08-01 17:46:39.494 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;10
2015-08-01 17:46:39.494 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;11
2015-08-01 17:46:39.495 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;12
2015-08-01 17:46:39.495 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;13
2015-08-01 17:46:39.502 GCD[7782:363061] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d4d510&gt;{number = 4, name = (null)} -&gt;16
2015-08-01 17:46:39.502 GCD[7782:363061] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d4d510&gt;{number = 4, name = (null)} -&gt;17
2015-08-01 17:46:39.502 GCD[7782:363061] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d4d510&gt;{number = 4, name = (null)} -&gt;18
2015-08-01 17:46:39.502 GCD[7782:363061] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d4d510&gt;{number = 4, name = (null)} -&gt;19
2015-08-01 17:46:39.501 GCD[7782:363054] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308d643d0&gt;{number = 2, name = (null)} -&gt;14
2015-08-01 17:46:39.501 GCD[7782:363057] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7fd308c52be0&gt;{number = 3, name = (null)} -&gt;15</pre>
&#x7ED3;&#x8BBA;:&#x5728;**&#x4E3B;&#x7EBF;&#x7A0B;**&#x6267;&#x884C;**&#x540C;&#x6B65;**&#x4EFB;&#x52A1;,**&#x6267;&#x884C;&#x5B8C;**&#x4EE5;&#x540E;,&#x5728;&#x5F00;&#x542F;**&#x65B0;&#x7EBF;&#x7A0B;**&#x6267;&#x884C;**&#x5F02;&#x6B65;&#x4EFB;&#x52A1;**.

####  &#x5E76;&#x884C;&#x961F;&#x5217;&#x5148;&#x5F02;&#x6B65;&#x540E;&#x540C;&#x6B65;

<div>
<pre class="lang:objc decode:true ">- (void)viewDidLoad {
    [super viewDidLoad];

    [self gcdtest5];
}
// &#x5E76;&#x884C; &#x540C;&#x6B65;&#x540E;&#x5F02;&#x6B65;
- (void)gcdtest5
{
    dispatch_queue_t q = dispatch_queue_create(&quot;com.birdmichael2&quot;, DISPATCH_QUEUE_CONCURRENT);
    for (int i = 0;i &lt; 20 ;++i){
        dispatch_async(q, ^{
            NSLog(@&quot;&#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
    for (int i = 0;i &lt; 20 ;++i){
        dispatch_sync(q, ^{
            NSLog(@&quot;&#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true ">2015-08-01 17:50:20.686 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;0
2015-08-01 17:50:20.686 GCD[8368:366651] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d96430&gt;{number = 3, name = (null)} -&gt;1
2015-08-01 17:50:20.686 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;0
2015-08-01 17:50:20.687 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;1
2015-08-01 17:50:20.687 GCD[8368:366651] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d96430&gt;{number = 3, name = (null)} -&gt;3
2015-08-01 17:50:20.687 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;4
2015-08-01 17:50:20.686 GCD[8368:366650] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d97670&gt;{number = 4, name = (null)} -&gt;2
2015-08-01 17:50:20.687 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;2
2015-08-01 17:50:20.687 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;6
2015-08-01 17:50:20.687 GCD[8368:366650] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d97670&gt;{number = 4, name = (null)} -&gt;7
2015-08-01 17:50:20.687 GCD[8368:366651] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d96430&gt;{number = 3, name = (null)} -&gt;5
2015-08-01 17:50:20.688 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;3
2015-08-01 17:50:20.689 GCD[8368:366651] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d96430&gt;{number = 3, name = (null)} -&gt;9
2015-08-01 17:50:20.689 GCD[8368:366650] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d97670&gt;{number = 4, name = (null)} -&gt;10
2015-08-01 17:50:20.688 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;8
2015-08-01 17:50:20.690 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;4
2015-08-01 17:50:20.690 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;11
2015-08-01 17:50:20.690 GCD[8368:366650] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d97670&gt;{number = 4, name = (null)} -&gt;12
2015-08-01 17:50:20.691 GCD[8368:366651] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d96430&gt;{number = 3, name = (null)} -&gt;13
2015-08-01 17:50:20.691 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;5
2015-08-01 17:50:20.691 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;14
2015-08-01 17:50:20.693 GCD[8368:366651] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d96430&gt;{number = 3, name = (null)} -&gt;15
2015-08-01 17:50:20.693 GCD[8368:366650] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d97670&gt;{number = 4, name = (null)} -&gt;16
2015-08-01 17:50:20.694 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;17
2015-08-01 17:50:20.694 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;6
2015-08-01 17:50:20.694 GCD[8368:366648] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d94450&gt;{number = 2, name = (null)} -&gt;18
2015-08-01 17:50:20.694 GCD[8368:366650] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3d97670&gt;{number = 4, name = (null)} -&gt;19
2015-08-01 17:50:20.694 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;7
2015-08-01 17:50:20.694 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;8
2015-08-01 17:50:20.695 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;9
2015-08-01 17:50:20.695 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;10
2015-08-01 17:50:20.695 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;11
2015-08-01 17:50:20.695 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;12
2015-08-01 17:50:20.697 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;13
2015-08-01 17:50:20.697 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;14
2015-08-01 17:50:20.697 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;15
2015-08-01 17:50:20.697 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;16
2015-08-01 17:50:20.697 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;17
2015-08-01 17:50:20.698 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;18
2015-08-01 17:50:20.698 GCD[8368:366567] &#x5E76;&#x884C;&#x961F;&#x5217;,&#x540C;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f94b3c28bd0&gt;{number = 1, name = main} -&gt;19</pre>
&#x7ED3;&#x8BBA;:&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x4F1A;**&#x7A7F;&#x63D2;**&#x5728;&#x540C;&#x6B65;&#x4EFB;&#x52A1;&#x4E2D;,&#x4E14;&#x540C;&#x6B65;&#x4EFB;&#x52A1;&#x4F9D;&#x7136;&#x5728;**&#x4E3B;&#x7EBF;&#x7A0B;**&#x6309;**&#x987A;&#x5E8F;**&#x6267;&#x884C;,&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x4F1A;&#x5F00;&#x542F;**&#x65B0;&#x7EBF;&#x7A0B;**&#x5728;&#x540C;&#x6B65;&#x4EFB;&#x52A1;&#x4E2D;&#x7A7F;&#x63D2;,&#x5E76;&#x4E14;**&#x65E0;&#x5E8F;**

#### &#x4E3B;&#x7EBF;&#x7A0B;&#x5F02;&#x6B65;&#x8C03;&#x7528;

<pre class="lang:objc decode:true ">- (void)viewDidLoad {
    [super viewDidLoad];

    [self gcdtest6];
}
// &#x4E3B;&#x7EBF;&#x7A0B; &#x5F02;&#x6B65;&#x4EFB;&#x52A1;
- (void)gcdtest6
{
    dispatch_queue_t q = dispatch_get_main_queue();
    for (int i = 0;i &lt; 10 ;++i){
        dispatch_async(q, ^{
            NSLog(@&quot;&#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true ">2015-08-01 18:03:18.321 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;0
2015-08-01 18:03:18.322 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;1
2015-08-01 18:03:18.322 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;2
2015-08-01 18:03:18.322 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;3
2015-08-01 18:03:18.322 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;4
2015-08-01 18:03:18.323 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;5
2015-08-01 18:03:18.323 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;6
2015-08-01 18:03:18.323 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;7
2015-08-01 18:03:18.323 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;8
2015-08-01 18:03:18.324 GCD[10410:374539] &#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;&lt;NSThread: 0x7f8d10d28ab0&gt;{number = 1, name = main} -&gt;9
</pre>
&#x7ED3;&#x8BBA;:&#x4E3B;&#x7EBF;&#x7A0B;&#x5F02;&#x6B65;&#x4F1A;&#x5728;**&#x4E3B;&#x7EBF;&#x7A0B;**&#x8FD0;&#x884C;,**&#x4E0D;&#x5F00;&#x542F;**&#x65B0;&#x7EBF;&#x7A0B;,&#x5E76;&#x4E14;**&#x6709;&#x5E8F;**

#### &#x4E3B;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x8C03;&#x7528;(&#x6B7B;&#x9501;)

<pre class="lang:objc decode:true ">- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@&quot;&#x662F;&#x5426;&#x88AB;&#x67F1;&#x585E;&#x4E86;?&quot;);
    [self gcdtest7];
    NSLog(@&quot;&#x662F;&quot;);
}
// &#x4E3B;&#x7EBF;&#x7A0B; &#x540C;&#x6B65;&#x4EFB;&#x52A1;
- (void)gcdtest7
{
    dispatch_queue_t q = dispatch_get_main_queue();
    for (int i = 0;i &lt; 10 ;++i){
        dispatch_sync(q, ^{
            NSLog(@&quot;&#x4E3B;&#x7EBF;&#x7A0B;,&#x5F02;&#x6B65; &lt;&#x8C03;&#x7528;%@ -&gt;%d&quot;,[NSThread currentThread],i);
        });
    }
}</pre>
&#x8F93;&#x51FA;:

&#x7A0B;&#x5E8F;&#x5361;&#x6B7B;

![QQ20150801-2@2x](http://birdmichael.com/wp-content/uploads/2015/07/QQ20150801-2@2x.png)
<pre class="lang:objc decode:true ">2015-08-01 18:07:14.994 GCD[11042:377997] &#x662F;&#x5426;&#x88AB;&#x67F1;&#x585E;&#x4E86;?
</pre>
&#x7ED3;&#x8BBA;:&#x9664;&#x975E;&#x8FDB;&#x7A0B;&#x9000;&#x51FA;,&#x4E0D;&#x7136;&#x7ED3;&#x675F;&#x4E3B;&#x7EBF;&#x7A0B;,&#x6240;&#x4EE5;&#x5C31;&#x65E0;&#x6CD5;&#x6267;&#x884C;&#x540C;&#x6B65;&#x8C03;&#x7528;.&#x540E;&#x9762;&#x5728;&#x4EE3;&#x7801;&#x8BB2;&#x90FD;&#x4F1A;&#x5361;&#x6B7B;&#x5728;&#x6B64;.

#### &#x603B;&#x7ED3;&#x8BBA;

1.  &#x5E76;&#x53D1;&#x961F;&#x5217;&#x53EF;&#x4EE5;&#x8BA9;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;&#x5E76;&#x53D1;(&#x540C;&#x65F6;)&#x6267;&#x884C;(&#x81EA;&#x52A8;&#x5F00;&#x542F;&#x591A;&#x4E2A;&#x60F3;&#x6210;&#x540C;&#x65F6;&#x6267;&#x884C;&#x4EFB;&#x52A1;)
2.  &#x5E76;&#x53D1;&#x961F;&#x5217;&#x7684;&#x529F;&#x80FD;&#x53EA;&#x6709;&#x5728;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#x4E0B;&#x624D;&#x4F1A;&#x7531;&#x6548;&#x679C;
3.  &#x4E32;&#x884C;&#x961F;&#x5217;&#x4F1A;&#x8BA9;&#x4EFB;&#x52A1;&#x4E00;&#x4E2A;&#x63A5;&#x4E00;&#x4E2A;&#x7684;&#x6267;&#x884C;(&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#x5728;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;)
4.  &#x540C;&#x6B65;(&#x4E0D;&#x5177;&#x5907;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;&#x80FD;&#x529B;,&#x90FD;&#x5F53;&#x524D;&#x533A;&#x6267;&#x884C;)(**&#x975E;&#x7EDD;&#x5BF9;**)
5.  &#x5F02;&#x6B65;(&#x5177;&#x5907;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;&#x80FD;&#x529B;,&#x5F02;&#x5C31;&#x662F;&#x4E3A;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x533A;&#x6267;&#x884C;)(**&#x975E;&#x7EDD;&#x5BF9;,&#x6BD4;&#x5982;&#x4E3B;&#x961F;&#x5217;**)
6.  &#x662F;&#x5426;&#x5177;&#x5907;&#x5F00;&#x542F;&#x7EBF;&#x7A0B;&#x80FD;&#x529B;&#x53EA;&#x4F1A;&#x56E0;&#x4E3A;&#x540C;&#x6B65;&#x8FD8;&#x662F;&#x5F02;&#x6B65;&#x800C;&#x5F71;&#x54CD;(&#x4E00;&#x822C;&#x60C5;&#x51B5;)
7.  &#x4EFB;&#x52A1;&#x7684;&#x6267;&#x884C;&#x65B9;&#x5F0F;&#x53EA;&#x4F1A;&#x56E0;&#x4E3A;&#x4E32;&#x884C;&#x548C;&#x5E76;&#x53D1;&#x800C;&#x5F71;&#x54CD;(&#x4E00;&#x822C;&#x60C5;&#x51B5;)
8.  &#x540C;&#x6B65;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x5728;&#x5D4C;&#x5957;&#x7684;&#x4EFB;&#x52A1;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x6CA1;&#x4EC0;&#x4E48;&#x7279;&#x522B;&#x5927;&#x7684;&#x610F;&#x4E49;,&#x56E0;&#x4E3A;&#x4F1A;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x6267;&#x884C;(&#x7B49;&#x4E8E;&#x76F4;&#x63A5;&#x6267;&#x884C;).
9.  &#x5F02;&#x6B65;&#x57FA;&#x672C;&#x5C31;&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x4EE3;&#x540D;&#x8BCD;.

### &#x5404;&#x961F;&#x5217;&#x6267;&#x884C;&#x6548;&#x679C;&#x5BF9;&#x6BD4;

![242038164084931](http://birdmichael.com/wp-content/uploads/2015/07/242038164084931.png)

### &#x5404;&#x79CD;&#x961F;&#x5217;&#x7684;&#x9009;&#x62E9;

#### &#x4E32;&#x884C;&#x961F;&#x5217;

&#x5BF9;&#x6267;&#x884C;&#x6548;&#x7387;&#x8981;&#x6C42;&#x4E0D;&#x9AD8;

&#x5BF9;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x8981;&#x6C42;&#x641E;&gt;(&#x5FC5;&#x987B;&#x5148;xx&#x624D;&#x53EF;&#x4EE5;xx)

&#x6027;&#x80FD;&#x6D88;&#x8017;&#x5C0F;

</div>

#### &#x5E76;&#x53D1;&#x961F;&#x5217;

&#x5BF9;&#x6267;&#x884C;&#x6548;&#x7387;&#x8981;&#x6C42;&#x9AD8;

&#x5BF9;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x8981;&#x6C42;&#x4E0D;&#x9AD8;

&#x5BF9;&#x7CFB;&#x80FD;&#x6D88;&#x8017;&#x5927;&gt;(&#x6D89;&#x53CA;&#x5173;&#x952E;&#x5B57;&quot;&#x7B49;.&quot;,&quot;&#x591A;&quot;&#x7B49;..)

#### &#x5168;&#x5C40;&#x961F;&#x5217;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;

&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x517C;&#x987E;MRC&#x4E2D;&#x7684;&#x961F;&#x5217;&#x91CA;&#x653E;.

### &#x5176;&#x4ED6;&#x7528;&#x6CD5;

#### &#x5EF6;&#x65F6;&#x6267;&#x884C;

&#x4E0D;&#x8981;&#x4F7F;&#x7528;<span class="s1">[NSThread sleepForTimeInterval:(NSTimeInterval)]; </span>

&#x539F;&#x56E0;:&#x4F1A;&#x5361;&#x5F53;&#x524D;&#x7A0B;.

##### <span class="s1">dispatch_after</span>

<pre class="lang:objc decode:true">void dispatch_after ( dispatch_time_t when, dispatch_queue_t queue, dispatch_block_t block );</pre>
when:&#x4ECE;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x7ECF;&#x8FC7;&#x591A;&#x5C11;&#x7EB3;&#x79D2;

queue:&#x540A;&#x7269;&#x4EFB;&#x52A1;&#x7684;&#x961F;&#x5217;

block:&#x4EE3;&#x7801;&#x5FEB;(&#x4EFB;&#x52A1;,&#x64CD;&#x4F5C;)
&gt; <span style="color: #ff0000;">**&#x4F46;&#x662F;!&#x4E00;&#x822C;&#x4F7F;&#x7528;xcode&#x9ED8;&#x8BA4;&#x7684;&#x4EE3;&#x7801;&#x5757;.&#x5982;&#x4E0B;&#x5C55;&#x793A;**</span>
![QQ20150803-1@2x](http://birdmichael.com/wp-content/uploads/2015/07/QQ20150803-1@2x.png)
<pre class="lang:objc decode:true ">dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(&lt;#delayInSeconds#&gt; * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    &lt;#code to be executed after a specified delay#&gt;
});</pre>

<p><span class="s1">&lt;#delayInSeconds#&gt;:&#x4ECE;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x7ECF;&#x8FC7;&#x591A;&#x5C11;&#x79D2;</span></p>
<p><span class="s1">&lt;#code to be executed after a specified delay#&gt;:&#x4EE3;&#x7801;&#x5757;</span></p>
<h6 id="&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;-&#x4E3B;&#x7EBF;&#x7A0B;"><a href="#&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;-&#x4E3B;&#x7EBF;&#x7A0B;" class="headerlink" title="&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;(&#x4E3B;&#x7EBF;&#x7A0B;):"></a>&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;(&#x4E3B;&#x7EBF;&#x7A0B;):</h6><pre class="lang:objc decode:true ">- (void)viewDidLoad {
    [super viewDidLoad];
    [self delay2];
}
- (void)delay2
{
    NSLog(@&quot;It is begin.&quot;);
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        NSLog(@&quot;open:birdmichael.com,The thread is%@&quot;,[NSThread currentThread]);
});
    NSLog(@&quot;it is next.&quot;);
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true ">2015-08-03 01:05:05.445 GCD[88456:650588] It is begin.
2015-08-03 01:05:05.446 GCD[88456:650588] it is next.
2015-08-03 01:05:07.643 GCD[88456:650588] open:birdmichael.com,The thread is&lt;NSThread: 0x7f86b9c28b80&gt;{number = 1, name = main}</pre>

<h6 id="&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;-&#x5B50;&#x7EBF;&#x7A0B;"><a href="#&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;-&#x5B50;&#x7EBF;&#x7A0B;" class="headerlink" title="&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;(&#x5B50;&#x7EBF;&#x7A0B;):"></a>&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;(&#x5B50;&#x7EBF;&#x7A0B;):</h6><pre class="lang:objc decode:true ">- (void)delay3
{
    NSLog(@&quot;It is begin.&quot;);
    // &#x83B7;&#x53D6;&#x5168;&#x5C40;&#x961F;&#x5217;
    dispatch_queue_t q = dispatch_get_global_queue(0, 0);

    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), q, ^{
        NSLog(@&quot;open:birdmichael.com,The thread is%@&quot;,[NSThread currentThread]);
});

    NSLog(@&quot;it is next.&quot;);
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true">2015-08-03 01:08:13.233 GCD[88947:653122] It is begin.
2015-08-03 01:08:13.233 GCD[88947:653122] it is next.
2015-08-03 01:08:15.234 GCD[88947:653225] open:birdmichael.com,The thread is&lt;NSThread: 0x7ff60a524240&gt;{number = 2, name = (null)}</pre>

<h5 id="performSelector"><a href="#performSelector" class="headerlink" title="performSelector"></a><span class="s1">performSelector</span></h5><pre class="lang:objc decode:true">[self performSelector:(SEL) withObject:(id) afterDelay:(NSTimeInterval)];</pre>
selector:&#x65B9;&#x6CD5;.

object:&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;

delay:&#x5EF6;&#x65F6;&#x65F6;&#x95F4;

&#x793A;&#x4F8B;&#x4EE3;&#x7801;:
<pre class="lang:objc decode:true">- (void)viewDidLoad {
    [super viewDidLoad];
    [self delay1];
}

// &#x5EF6;&#x65F6;&#x6267;&#x884C;
- (void)delay1
{
    NSLog(@&quot;It is begin.&quot;);
    [self performSelector:@selector(openMyWeb:) withObject:@&quot;birdmichael.com&quot; afterDelay:3];
    NSLog(@&quot;it is next.&quot;);
}
-(void)openMyWeb:(NSString *)url
{
    NSLog(@&quot;open:%@,The thread is %@&quot;, url,[NSThread currentThread]);
}</pre>
&#x8F93;&#x51FA;:
<pre class="lang:objc decode:true">2015-08-03 00:53:47.945 GCD[86660:641006] It is begin.
2015-08-03 00:53:47.946 GCD[86660:641006] it is next.
2015-08-03 00:53:50.947 GCD[86660:641006] open:birdmichael.com,The thread is &lt;NSThread: 0x7ff419c11c50&gt;{number = 1, name = main}</pre>

<h4 id="&#x8C03;&#x5EA6;-&#x961F;&#x5217;-&#x7EC4;"><a href="#&#x8C03;&#x5EA6;-&#x961F;&#x5217;-&#x7EC4;" class="headerlink" title="&#x8C03;&#x5EA6;(&#x961F;&#x5217;)&#x7EC4;"></a>&#x8C03;&#x5EA6;(&#x961F;&#x5217;)&#x7EC4;</h4><p>&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x51FA;&#x73B0;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x591A;&#x4E2A;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x4EE5;&#x540E;,&#x5728;&#x6267;&#x884C;&#x540E;&#x7EED;&#x7684;&#x5904;&#x7406;.</p>
<p>&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;,&#x6765;&#x611F;&#x53D7;&#x8C03;&#x5EA6;&#x7EC4;&#x7684;&#x597D;&#x5904;:</p>
<p>&#x4E0D;&#x4F7F;&#x7528;&#x8C03;&#x5EA6;&#x7EC4;,&#x4E3B;&#x7EBF;&#x7A0B;&#x4E32;&#x884C;&#x6267;&#x884C;:</p>
<p>1.&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7528;3&#x79D2;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;1</p>
<p>2.&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7528;4&#x79D2;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;2</p>
<p>3.&#x6211;&#x4EEC;&#x9700;&#x8981;2&#x79D2;&#x628A;&#x56FE;&#x7247;2&#x753B;&#x5230;&#x56FE;&#x7247;1&#x4E0A;.</p>
<p>&#x603B;&#x7ED3;:&#x6211;&#x4EEC;&#x9700;&#x8981;&#x901A;&#x8FC7;9&#x79D2;.</p>
<p>&#x4E0D;&#x4F7F;&#x7528;&#x8C03;&#x5EA6;&#x7EC4;,&#x5B50;&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#x6267;&#x884C;:</p>
<p>1.&#x6211;&#x4EEC;&#x9700;&#x8981;3&#x79D2;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;1,&#x9700;&#x8981;4&#x79D2;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;2</p>
<p>2.&#x5224;&#x65AD;&#x662F;&#x5426;&#x56FE;&#x7247;1&#x548C;&#x56FE;&#x7247;2&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6BD5;</p>
<p>3.&#x9700;&#x8981;2&#x79D2;&#x628A;&#x56FE;&#x7247;2&#x753B;&#x5728;&#x56FE;&#x7247;1&#x4E0A;.</p>
<p>&#x603B;&#x7ED3;:&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;6&#x79D2;.</p>
<p>&#x7F3A;&#x70B9;:1.&#x6211;&#x4EEC;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5224;&#x65AD;&#x662F;&#x5426;&#x56FE;&#x7247;1&#x548C;&#x56FE;&#x7247;2&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6BD5;&#x4E86;.2.&#x6574;&#x4E2A;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;,&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x5165;&#x591A;&#x4E2A;&#x8F85;&#x52A9;&#x6865;&#x63A5;&#x7684;&#x53D8;&#x91CF;.</p>
<p>&#x4F7F;&#x7528;&#x8C03;&#x5EA6;&#x7EC4;,&#x5B57;&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#x6267;&#x884C;:</p>
<p>1.&#x521B;&#x5EFA;&#x8C03;&#x5EA6;&#x7EC4;</p>
<p>2.&#x628A;3&#x79D2;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;1&#x548C;4&#x79D2;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;2&#x4E22;&#x5165;&#x8C03;&#x5EA6;&#x7EC4;</p>
<p>3.&#x83B7;&#x5F97;&#x8C03;&#x5EA6;&#x7EC4;&#x6267;&#x884C;&#x7ED3;&#x675F;&#x901A;&#x77E5;&#x540E;,&#x6267;&#x884C;2&#x79D2;&#x5427;&#x56FE;&#x7247;2&#x753B;&#x5728;&#x56FE;&#x7247;1&#x4E0A;(&#x81EA;&#x52A8;)</p>
<p>&#x4F18;&#x70B9;:&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5224;&#x65AD;&#x662F;&#x5426;&#x56FE;&#x7247;1&#x548C;&#x56FE;&#x7247;2&#x662F;&#x5426;&#x90FD;&#x4E0B;&#x8F7D;&#x5B8C;&#x6BD5;&#x4E86;.</p>
<p>&#x793A;&#x4F8B;&#x4EE3;&#x7801;:</p>
<pre class="lang:objc decode:true ">dispatch_group_t group = dispatch_group_create();
dispatch_group_async(group, dispatch_get_global_queue(0,0), ^{
// &#x5E76;&#x884C;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x4E00;
});
dispatch_group_async(group, dispatch_get_global_queue(0,0), ^{
// &#x5E76;&#x884C;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x4E8C;
});
dispatch_group_notify(group, dispatch_get_global_queue(0,0), ^{
// &#x6C47;&#x603B;&#x7ED3;&#x679C;
});</pre>

<h5 id="&#x624B;&#x52A8;&#x7BA1;&#x7406;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF08;&#x6216;&#x8BA1;&#x6570;&#xFF09;"><a href="#&#x624B;&#x52A8;&#x7BA1;&#x7406;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF08;&#x6216;&#x8BA1;&#x6570;&#xFF09;" class="headerlink" title="&#x624B;&#x52A8;&#x7BA1;&#x7406;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF08;&#x6216;&#x8BA1;&#x6570;&#xFF09;"></a>&#x624B;&#x52A8;&#x7BA1;&#x7406;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF08;&#x6216;&#x8BA1;&#x6570;&#xFF09;</h5><p>AFNetworking&#x6846;&#x67B6;&#x4E2D;&#x4F1A;&#x4F7F;&#x7528;,&#x4E86;&#x89E3;&#x5C31;&#x884C;,&#x51E0;&#x4E4E;&#x4E0D;&#x4F7F;&#x7528;.</p>
<p><strong>dispatch_group_enter<span class="s1">(group);</span></strong></p>
<p><strong>dispatch_group_leave<span class="s1">(group);</span></strong></p>
<p>&#x63D0;&#x793A;:&#x8FDB;&#x5165;&#x548C;&#x9000;&#x51FA;group&#x6B21;&#x6570;&#x5FC5;&#x987B;&#x5339;&#x914D;,&#x6709;&#x8FDB;&#x5165;&#x5C31;&#x5FC5;&#x987B;&#x6709;&#x9000;&#x51FA;</p>
<p>&#x793A;&#x4F8B;&#x4EE3;&#x7801;:</p>
<pre class="lang:objc decode:true ">// &#x81EA;&#x52A8;
dispatch_group_async(group, queue, ^{ 

&#x3000;&#x3000;// &#x6267;&#x884C;&#x4EE3;&#x7801;

}); 

// &#x624B;&#x52A8;,&#x7B49;&#x4EF7;&#x4E8E;&#x81EA;&#x52A8;

dispatch_group_enter(group);

dispatch_async(queue, ^{

&#x3000;&#x3000;//&#x6267;&#x884C;&#x4EE3;&#x7801;

&#x3000;&#x3000;dispatch_group_leave(group);

});</pre>
&#x5EF6;&#x4F38;&#x9605;&#x8BFB;:[&#x70B9;&#x51FB;&#x8FDB;&#x5165;](http://stackoverflow.com/questions/10643797/wait-until-multiple-networking-requests-have-all-executed-including-their-comp/10644282#10644282)

#### &#x4E00;&#x6B21;&#x6027;

&#x6709;&#x4E9B;&#x53D8;&#x91CF;&#x53EA;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x6B21;&#xFF08;&#x5982;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x8BFB;&#x53D6;&#x8BBE;&#x5907;&#x578B;&#x53F7;&#x7B49;&#x7B49;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;dispatch_once&#x6765;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x4F18;&#x5316;&#xFF0C;&#x4FDD;&#x8BC1;&#x53EA;&#x8C03;&#x7528;API&#x4E00;&#x6B21;&#xFF0C;&#x4EE5;&#x540E;&#x5C31;&#x53EA;&#x8981;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x53D8;&#x91CF;&#x5373;&#x53EF;.(**&#x5728;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x4E2D;&#x88AB;&#x5E7F;&#x6CDB;&#x7684;&#x4F7F;&#x7528;**)
<pre class="lang:objc decode:true">void dispatch_once ( dispatch_once_t *predicate, dispatch_block_t block );</pre>
<div>&#x8BE5;&#x51FD;&#x6570;&#x63A5;&#x6536;&#x4E00;&#x4E2A;dispatch_once&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x8BE5;&#x4EE3;&#x7801;&#x5757;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x8C03;&#x5EA6;&#x7684;&#x8C13;&#x8BCD;&#xFF08;&#x662F;&#x4E00;&#x4E2A;&#x957F;&#x6574;&#x578B;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x4F5C;&#x4E3A;BOOL&#x4F7F;&#x7528;&#xFF09;&#x3002;&#x5B83;&#x8FD8;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x5E0C;&#x671B;&#x5728;&#x5E94;&#x7528;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5185;&#x4EC5;&#x88AB;&#x8C03;&#x5EA6;&#x4E00;&#x6B21;&#x7684;&#x4EE3;&#x7801;&#x5757;&#xFF0C;&#x5BF9;&#x4E8E;&#x672C;&#x4F8B;&#x5C31;&#x7528;&#x4E8E;shared&#x5B9E;&#x4F8B;&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x3002;</div>
<div>dispatch_once&#x4E0D;&#x4EC5;&#x610F;&#x5473;&#x7740;&#x4EE3;&#x7801;&#x4EC5;&#x4F1A;&#x88AB;&#x8FD0;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x4F60;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x8BF8;&#x5982;@synchronized&#x4E4B;&#x7C7B;&#x7684;&#x6765;&#x9632;&#x6B62;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x6216;&#x8005;&#x961F;&#x5217;&#x65F6;&#x4E0D;&#x540C;&#x6B65;&#x7684;&#x95EE;&#x9898;&#x3002;</div>
<div>&#x540C;&#x6837;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x5757;&#x5C31;&#x597D;&#x4E86;.</div>
<div>![QQ20150803-2@2x](http://birdmichael.com/wp-content/uploads/2015/07/QQ20150803-2@2x.png)</div>
<div>
<pre class="lang:objc decode:true">static dispatch_once_t onceToken;
dispatch_once(&amp;onceToken, ^{
    &lt;#code to be executed once#&gt;
});</pre>

<p><span class="s1">&lt;#code to be executed once#&gt;:&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x7684;&#x4EE3;&#x7801;&#x5757;.</span></p>
<p></p></div><p></p>
<div>&#x793A;&#x4F8B;&#x4EE3;&#x7801;:</div><br><div><br><pre class="lang:objc decode:true">- (void)viewDidLoad {<br>    [super viewDidLoad];<br>    for (int i = 0;i &lt; 10; ++i){<br>        [self once1];<br>    }<br>}<br>-(void)once1<br>{<br>    NSLog(@&#x201D;&lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;&#x201D;);<br>    static dispatch_once_t onceToken;<br>dispatch_once(&amp;onceToken, ^{<br>    NSLog(@&#x201D;hello,birdmichael&#x201D;);<br>});<br>}</pre><br></div><br>&#x8F93;&#x51FA;&#x7ED3;&#x679C;:<br><pre class="lang:objc decode:true ">2015-08-03 01:23:31.058 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.058 GCD[91307:661637] hello,birdmichael<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.059 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;<br>2015-08-03 01:23:31.060 GCD[91307:661637] &lt; &#x91CD;&#x590D;&#x6D4B;&#x8BD5; &gt;</pre><br>&#xA0;<br><br>#### &#x91CD;&#x590D;&#x6267;&#x884C;<br><br>&#x91CD;&#x590D;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x4F46;&#x662F;&#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5F02;&#x6B65;&#x6267;&#x884C;&#xFF08;&#x4E3A;&#x4E86;&#x4E0D;&#x963B;&#x585E;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;dispatch_async()&#x5305;&#x88C5;&#x4E00;&#x4E0B;&#x518D;&#x6267;&#x884C;&#xFF09;&#x3002;<br><pre class="lang:objc decode:true ">void dispatch_apply ( size_t iterations, dispatch_queue_t queue, void (^block)(size_t) );</pre><br><em>iterations:&#x91CD;&#x590D;&#x6B21;&#x6570;, queue:&#x961F;&#x5217; ,block:&#x4EE3;&#x7801;&#x5FEB;</em><br><br>#### &#x5176;&#x4ED6;<br><br>dispatch_time()&#xFF1A;&#x5EF6;&#x8FDF;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x540E;&#x6267;&#x884C;&#x3002;<br><br>dispatch_barrier_async()&#xFF1A;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x7684;&#x4EFB;&#x52A1;&#x9996;&#x5148;&#x4F1A;&#x67E5;&#x770B;&#x961F;&#x5217;&#x4E2D;&#x6709;&#x6CA1;&#x6709;&#x522B;&#x7684;&#x4EFB;&#x52A1;&#x8981;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x5219;&#x4F1A;&#x7B49;&#x5F85;&#x5DF2;&#x6709;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x518D;&#x6267;&#x884C;&#xFF1B;&#x540C;&#x65F6;&#x5728;&#x6B64;&#x65B9;&#x6CD5;&#x540E;&#x6DFB;&#x52A0;&#x7684;&#x4EFB;&#x52A1;&#x5FC5;&#x987B;&#x7B49;&#x5F85;&#x6B64;&#x65B9;&#x6CD5;&#x4E2D;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x540E;&#x624D;&#x80FD;&#x6267;&#x884C;&#x3002;&#xFF08;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF0C;&#x4F8B;&#x5982;&#x524D;&#x9762;&#x5148;&#x52A0;&#x8F7D;&#x6700;&#x540E;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x7684;&#x9700;&#x6C42;&#x5C31;&#x53EF;&#x4EE5;&#x5148;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C06;&#x6700;&#x540E;&#x4E00;&#x5F20;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x7684;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;dispatch_async()&#x6DFB;&#x52A0;&#x5176;&#x4ED6;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#x4EFB;&#x52A1;&#xFF09;<br><br>GCD&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x7528;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079" target="_blank" rel="external">&#x5B98;&#x65B9;&#x6587;&#x6863;</a><br><br>### &#x603B;&#x7ED3;(&#x601D;&#x7EF4;&#x5BFC;&#x56FE;)<br><br><a href="http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png" target="_blank" rel="external"><img src="http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png" alt="GCD"></a><br><br>&#xA0;<br><br>&#x7531;&#x4E8E;&#x56FE;&#x7247;&#x81EA;&#x52A8;&#x4F38;&#x7F29;,&#x5EFA;&#x8BAE;&#x70B9;&#x51FB;&#x56FE;&#x7247;&#x67E5;&#x770B;&#x539F;&#x56FE;,&#x6216;&#x4FDD;&#x5B58;&#x5230;&#x672C;&#x5730;&#x67E5;&#x770B;<br><br>## NSThread<br><br>NSThread&#x662F;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x5F00;&#x53D1;&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x4E5F;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;NSThread&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;<strong>+ (void)detachNewThreadSelector:(SEL)selector toTarget:(id)target withObject:(id)argument</strong>&#x76F4;&#x63A5;&#x5C06;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x7EBF;&#x7A0B;&#x4E2D;&#x5E76;&#x542F;&#x52A8;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;<strong>- (instancetype)initWithTarget:(id)target selector:(SEL)selector object:(id)argument </strong>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;start&#x65B9;&#x6CD5;&#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x3002;<br><br>### &#x521B;&#x5EFA;&#x5E76;&#x5F00;&#x542F;&#x7EBF;&#x7A0B;<br><br>#### &#x52A8;&#x6001;&#x65B9;&#x6CD5;<br><br>&#x4F18;&#x70B9;:&#x53EF;&#x4EE5;&#x62FF;&#x5230;&#x7EBF;&#x7A0B;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;,&#x6BD4;&#x5982;&#x540D;&#x5B57;,&#x4F18;&#x5148;&#x7EA7;&#x7B49;<br><br>&#x7F3A;&#x70B9;:&#x9700;&#x8981;&#x624B;&#x52A8;&#x542F;&#x52A8;&#x7EBF;&#x7A0B;.<br><br><pre class="lang:objc decode:true ">- (id)initWithTarget:(id)target selector:(SEL)selector object:(id)argument;</pre><br><table class="t1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td class="td1" valign="top"><br><br><span class="s1"><em>target</em></span><br><br></td><br><td class="td2" valign="middle"><br><br>&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;selector&#x6700;&#x591A;&#x53EA;&#x80FD;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x53C2;&#x6570;<br><br></td><br></tr><br><tr><br><td class="td1" valign="top"><br><br><span class="s1"><em>selector</em></span><br><br></td><br><td class="td2" valign="middle"><br><br><span class="s1">selector&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7684;&#x5BF9;&#x8C61;. &#x5E76;&#x4E14;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x6700;&#x591A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;,&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;..</span><br><br></td><br></tr><br><tr><br><td class="td1" valign="top"><br><br><span class="s1"><em>argument</em></span><br><br></td><br><td class="td2" valign="middle"><br><br><span class="s1">&#x4F20;&#x7ED9;selector&#x7684;&#x552F;&#x4E00;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;nil.</span><br><br></td><br></tr><br></tbody><br></table><br>&#x793A;&#x4F8B;&#x4EE3;&#x7801;:<br><pre class="lang:objc decode:true  ">// &#x521D;&#x59CB;&#x5316;&#x7EBF;&#x7A0B;<br>NSThread <em>thread = [[NSThread alloc] initWithTarget:self selector:@selector(downImage) object:nil];<br>// &#x8BBE;&#x7F6E;&#x7EBF;&#x7A0B;&#x7684;&#x4F18;&#x5148;&#x7EA7;(0.0 - 1.0&#xFF0C;1.0&#x6700;&#x9AD8;&#x7EA7;)<br>thread.threadPriority = 1;<br>// &#x5F00;&#x542F;&#x7EBF;&#x7A0B;<br>[thread start];</em></pre><br><br>#### &#x9759;&#x6001;&#x65B9;&#x6CD5;<br><br>&#x4F18;&#x70B9;:&#x4F1A;&#x81EA;&#x52A8;&#x53BB;&#x5F00;&#x542F;&#x7EBF;&#x7A0B;,&#x5E76;&#x4E14;&#x4F9D;&#x636E;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;<br><br>&#x7F3A;&#x70B9;:&#x4E0D;&#x80FD;&#x62FF;&#x5230;&#x7EBF;&#x7A0B;,&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;.<br><br><pre class="lang:objc decode:true ">+ (void)detachNewThreadSelector:(SEL)selector toTarget:(id)target withObject:(id)argument;</pre><br><table class="t1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td class="td1" valign="top"><br><br><span class="s1"><em>target</em></span><br><br></td><br><td class="td2" valign="middle"><br><br>&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;selector&#x6700;&#x591A;&#x53EA;&#x80FD;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x53C2;&#x6570;<br><br></td><br></tr><br><tr><br><td class="td1" valign="top"><br><br><span class="s1"><em>selector</em></span><br><br></td><br><td class="td2" valign="middle"><br><br><span class="s1">selector&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7684;&#x5BF9;&#x8C61;. &#x5E76;&#x4E14;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x6700;&#x591A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;,&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x503C;..</span><br><br></td><br></tr><br><tr><br><td class="td1" valign="top"><br><br><span class="s1"><em>argument</em></span><br><br></td><br><td class="td2" valign="middle"><br><br><span class="s1">&#x4F20;&#x7ED9;selector&#x7684;&#x552F;&#x4E00;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;nil.</span><br><br></td><br></tr><br></tbody><br></table><br>&#x793A;&#x4F8B;&#x4EE3;&#x7801;:<br><pre class="lang:objc decode:true">[NSThread detachNewThreadSelector:@selector(downImage) toTarget:self withObject:nil];<br>// &#x8C03;&#x7528;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x4F1A;&#x9A6C;&#x4E0A;&#x521B;&#x5EFA;&#x5E76;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;</pre><br><br>#### &#x9690;&#x5F0F;&#x65B9;&#x6CD5;<br><br><pre class="lang:objc decode:true ">    [self performSelectorInBackground:&lt;#(SEL)#&gt; withObject:&lt;#(id)#&gt;]</pre><br>&#x548C;<br><pre class="lang:objc decode:true">    [self performSelector:&lt;#(SEL)#&gt; onThread:&lt;#(NSThread )#&gt; withObject:&lt;#(id)#&gt; waitUntilDone:&lt;#(BOOL)#&gt;];<br>    [self performSelector:&lt;#(SEL)#&gt; onThread:&lt;#(NSThread <em>)#&gt; withObject:&lt;#(id)#&gt; waitUntilDone:&lt;#(BOOL)#&gt; modes:&lt;#(NSArray </em>)#&gt;]</pre><br>&#x793A;&#x4F8B;&#x4EE3;&#x7801;:<br><pre class="lang:objc decode:true">[self performSelectorInBackground:@selector(downIamge) withObject:nil];</pre><br><br>### &#x7EBF;&#x7A0B;&#x7684;&#x6267;&#x884C;&#x72B6;&#x6001;<br><br>#### &#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;(&#x65B0;&#x5EFA;)<br><br>&#x5B9E;&#x4F8B;&#x5316;&#x7EBF;&#x7A0B;&#x5BF9;&#x8C61;,&#x4F46;&#x662F;&#x5E76;&#x6CA1;&#x6709;start.<br><br>&#x6CE8;&#x610F;:&#x4F7F;&#x7528;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x548C;&#x9690;&#x5F0F;&#x65B9;&#x6CD5;&#x8DF3;&#x8FC7;&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;.<br><br>#### &#x5C31;&#x7EEA;(&#x786E;&#x5B9A;&#x6267;&#x884C;)<br><br>&#x5F53;&#x7EBF;&#x7A0B;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x4E86;start&#x65B9;&#x6CD5;,&#x7EBF;&#x7A0B;&#x7ACB;&#x9A6C;&#x88AB;&#x52A0;&#x5165;&#x53EF;&#x8C03;&#x5EA6;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;(&#x662F;&#x5426;&#x6267;&#x884C;&#x5B8C;&#x5168;&#x4F9D;&#x9760;CPU&#x63A7;&#x5236;,&#x7A0B;&#x5E8F;&#x4E0E;&#x662F;&#x4E0D;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x7684;)<br><br>#### &#x8FD0;&#x884C;(&#x6267;&#x884C;&#x4E2D;)<br><br>&#x6B64;&#x65F6;CPU&#x6765;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;&#x53EF;&#x4EE5;&#x8C03;&#x5EA6;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;.&#x67D0;&#x4E00;&#x4E2A;&#x65F6;&#x523B;,&#x6267;&#x884C;&#x7684;&#x90A3;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x72B6;&#x6001;&#x5C31;&#x662F;&#x6267;&#x884C;&#x4E2D;&#x72B6;&#x6001;<br><br>&#x7EBF;&#x7A0B;&#x4F1A;&#x5728;&#x5C31;&#x7EEA;&#x4E0E;&#x8FD0;&#x884C;&#x4E2D;&#x81EA;&#x52A8;&#x5FEB;&#x901F;&#x5207;&#x6362;(&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x5148;&#x7406;&#x89E3;&#x4E0A;&#x6587;&#x63D0;&#x5230;&#x7684;&#x65F6;&#x95F4;&#x7247;)<br><br>&#x8FD0;&#x884C;&#x4E2D;&#x7684;&#x72B6;&#x6001;&#x53EA;&#x6709;&#x4E24;&#x79CD;&#x540E;&#x7EED;&#x72B6;&#x6001;:1.&#x963B;&#x585E;2.&#x5B8C;&#x6210;<br><br>#### &#x963B;&#x585E;(&#x53D6;&#x6D88;)<br><br>&#x6765;&#x5230;&#x963B;&#x585E;&#x72B6;&#x6001;,&#x8BF4;&#x660E;&#x6B64;&#x523B;&#x7684;&#x7EBF;&#x7A0B;&#x5DF2;&#x7ECF;&#x79FB;&#x51FA;&#x4E86;&#x8C03;&#x5EA6;&#x6C60;(&#x4F46;&#x662F;&#x5BF9;&#x8C61;&#x5E76;&#x4E0D;&#x4F1A;&#x9500;&#x6BC1;,&#x8FD8;&#x6709;&#x52A0;&#x5165;&#x8C03;&#x5EA6;&#x6C60;&#x7684;&#x53EF;&#x80FD;&#x6027;).<br><br>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x963B;&#x585E;&#x4F1A;&#x4EE5;&#x4E0B;2&#x79CD;&#x60C5;&#x51B5;&#x51FA;&#x73B0;:1.&#x8C03;&#x7528;&#x4E86;sleep.2.&#x7B49;&#x5F85;&#x540C;&#x6B65;&#x9501;<br><br>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x963B;&#x585E;&#x7EBF;&#x7A0B;&#x56DE;&#x5230;&#x8C03;&#x5EA6;&#x6C60;&#x4E5F;&#x6709;2&#x79CD;&#x60C5;&#x51B5;:1.sleep&#x5230;&#x65F6;.2.&#x5F97;&#x5230;&#x540C;&#x6B65;&#x9501;<br><br>#### &#x6B7B;&#x4EA1;(&#x5B8C;&#x6210;)<br><br>##### &#x6B63;&#x5E38;&#x6B7B;&#x4EA1;<br><br>&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;,&#x4F1A;&#x81EA;&#x52A8;&#x9500;&#x6BC1;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;<br><br>##### &#x975E;&#x6B63;&#x5E38;&#x6B7B;&#x4EA1;<br><br>&#x5F02;&#x5E38;:&#x975E;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x5BFC;&#x81F4;(&#x53EF;&#x80FD;&#x56E0;&#x4E3A;cpu,&#x5185;&#x5B58;&#x7B49;&#x4E0D;&#x53EF;&#x77E5;&#x539F;&#x56E0;)<br><br>&#x5F3A;&#x5236;&#x9000;&#x51FA;:&#x5BF9;&#x8C61;&#x88AB;&#x7EC8;&#x6B62;(&#x8C03;&#x7528;exit&#x65B9;&#x6CD5;)<br><pre class="lang:objc decode:true ">+ (void)exit</pre><br>&#x6CE8;&#x610F;:&#x6B7B;&#x4EA1;&#x5BF9;&#x8C61;&#x662F;&#x4E0D;&#x53EF;&#x590D;&#x6D3B;&#x7684;(&#x4E0D;&#x53EF;&#x518D;&#x8DF3;&#x8F6C;&#x5176;&#x4ED6;&#x72B6;&#x6001;)<br><br>### &#x7EBF;&#x7A0B;&#x7684;sleep<br><br>sleep&#x65B9;&#x6CD5;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5236;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x963B;&#x585E;&#x72B6;&#x6001;&#x7684;&#x65B9;&#x6CD5;.<br><pre class="lang:objc decode:true">// &#x4F11;&#x7720;&#x6307;&#x5B9A;&#x65F6;&#x5E38;:2s<br>[NSThread sleepForTimeInterval:2];<br><br>// &#x4F11;&#x7720;&#x5230;&#x6307;&#x5B9A;&#x65F6;&#x95F4;:&#x4ECE;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x540E;&#x7684;2s<br>NSDate <em>date = [NSDate dateWithTimeInterval:2 sinceDate:[NSDate date]];<br>[NSThread sleepUntilDate:date];</em></pre><br><br>### &#x7EBF;&#x7A0B;&#x7684;&#x5C5E;&#x6027;<br><br>#### <span class="s1">name</span><br><br>&#x7EBF;&#x7A0B;&#x540D;&#x5B57;.<br><br>#### <span class="s1">stackSize</span><br><br>&#x8BBE;&#x7F6E;&#x4E00;&#x6761;&#x7EBF;&#x7A0B;&#x7684;&#x5927;&#x5C0F;,&#x5FC5;&#x987B;&#x5728;&#x5F00;&#x542F;&#x4E4B;&#x524D;&#x6267;&#x884C;.&#x4E00;&#x822C;&#x90FD;&#x4E0D;&#x4F7F;&#x7528;.<br><br>&#x63D0;&#x793A;:&#x5927;&#x5C0F;&#x5FC5;&#x987B;&#x4E3A;4kb&#x7684;&#x500D;&#x6570;<br><br>### &#x7EBF;&#x7A0B;&#x7684;&#x65B9;&#x6CD5;<br><br>#### &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;<br><br>&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;,&#x7EBF;&#x7A0B;&#x540D;&#x7B49;&#x7B49;<br><pre class="lang:objc decode:true">+ (NSThread )currentThread;</pre><br><br>#### &#x83B7;&#x53D6;&#x4E3B;&#x7EBF;&#x7A0B;<br><br><pre class="lang:objc decode:true  ">+ (NSThread <em>)mainThread</em></pre><br><br>### &#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;&#x670D;&#x52A1;&#x8D28;&#x91CF;<br><br><pre class="lang:objc decode:true ">+ (double)threadPriority;<br>+ (BOOL)setThreadPriority:(double)p;<br><br>@property double threadPriority NS_AVAILABLE(10_6, 4_0); // To be deprecated; use qualityOfService below<br><br>@property NSQualityOfService qualityOfService NS_AVAILABLE(10_10, 8_0); // read-only after the thread is started</pre><br>&#x5728;IOS8&#x4EE5;&#x540E;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x8D28;&#x91CF;:<br><pre class="lang:objc decode:true">/ The following Quality of Service (QoS) classifications are used to indicate to the system the nature and importance of work.  They are used by the system to manage a variety of resources.  Higher QoS classes receive more resources than lower ones during resource contention. <em>/<br>typedef NS_ENUM(NSInteger, NSQualityOfService) {<br>    /</em> UserInteractive QoS is used for work directly involved in providing an interactive UI such as processing events or drawing to the screen. <em>/<br>    NSQualityOfServiceUserInteractive = 0x21,<br><br>    /</em> UserInitiated QoS is used for performing work that has been explicitly requested by the user and for which results must be immediately presented in order to allow for further user interaction.  For example, loading an email after a user has selected it in a message list. <em>/<br>    NSQualityOfServiceUserInitiated = 0x19,<br><br>    /</em> Utility QoS is used for performing work which the user is unlikely to be immediately waiting for the results.  This work may have been requested by the user or initiated automatically, does not prevent the user from further interaction, often operates at user-visible timescales and may have its progress indicated to the user by a non-modal progress indicator.  This work will run in an energy-efficient manner, in deference to higher QoS work when resources are constrained.  For example, periodic content updates or bulk file operations such as media import. <em>/<br>    NSQualityOfServiceUtility = 0x11,<br><br>    /</em> Background QoS is used for work that is not user initiated or visible.  In general, a user is unaware that this work is even happening and it will run in the most efficient manner while giving the most deference to higher QoS work.  For example, pre-fetching content, search indexing, backups, and syncing of data with external systems. <em>/<br>    NSQualityOfServiceBackground = 0x09,<br><br>    /</em> Default QoS indicates the absence of QoS information.  Whenever possible QoS information will be inferred from other sources.  If such inference is not possible, a QoS between UserInitiated and Utility will be used. <em>/<br>    NSQualityOfServiceDefault = -1<br>} NS_ENUM_AVAILABLE(10_10, 8_0);<br></em></pre><br><br>## &#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x8BAF;<br><br>&#x5728;1&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#xFF0C;&#x7EBF;&#x7A0B;&#x5F80;&#x5F80;&#x4E0D;&#x662F;&#x5B64;&#x7ACB;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x9700;&#x8981;&#x7ECF;&#x5E38;&#x8FDB;&#x884C;&#x901A;&#x4FE1;<br><br>### &#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x4F53;&#x73B0;<br><br>1&#x4E2A;&#x7EBF;&#x7A0B;&#x4F20;&#x9012;&#x6570;&#x636E;&#x7ED9;&#x53E6;1&#x4E2A;&#x7EBF;&#x7A0B;<br><br>&#x5728;1&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x5B8C;&#x7279;&#x5B9A;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x8F6C;&#x5230;&#x53E6;1&#x4E2A;&#x7EBF;&#x7A0B;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x4EFB;&#x52A1;<br><br>### &#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x5E38;&#x7528;&#x65B9;&#x6CD5;:NSOperation<br><br><pre class="lang:objc decode:true">    NSOperationQueue queue = [[NSOperationQueue alloc] init];<br><br>    [queue addOperationWithBlock:^{<br>        NSLog(@&#x201D;&#x8017;&#x65F6;&#x64CD;&#x4F5C; %@&#x201D;, [NSThread currentThread]);<br><br>        // &#x4E3B;&#x7EBF;&#x7A0B;&#x66F4;&#x65B0; UI<br>        [[NSOperationQueue mainQueue] addOperationWithBlock:^{<br>            NSLog(@&#x201D;&#x66F4;&#x65B0; UI %@&#x201D;, [NSThread currentThread]);<br>        }];<br>    }];</pre><br><br>### &#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x5E38;&#x7528;&#x65B9;&#x6CD5;:NSThread<br><br><pre class="lang:objc decode:true">- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait;<br><br>- (void)performSelector:(SEL)aSelector onThread:(NSThread <em>)thr withObject:(id)arg waitUntilDone:(BOOL)wait;</em></pre><br><br>### &#x793A;&#x4F8B;&#x4EE3;&#x7801;<br><br>#### &#x521D;&#x7EA7;&#x4F53;&#x9A8C;<br><br><pre class="lang:objc decode:true">- (void)touchesBegan:(NSSet )touches withEvent:(UIEvent <em>)event<br>{<br><br>    NSLog(@&#x201D;&#x70B9;&#x51FB;&#x5C4F;&#x5E55;,&#x786E;&#x8BA4;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x2013;%@&#x201D;,[NSThread currentThread]);<br>    // &#x4E32;&#x884C;&#x5F02;&#x6B65;<br>    dispatch_async(dispatch_get_global_queue(0, 0), ^{<br>        NSLog(@&#x201D;&#x5F00;&#x59CB;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;,%@&#x201D;,[NSThread currentThread]);<br><br>        NSLog(@&#x201D;&#x63D0;&#x793A;&#x2019;&#x56FE;&#x7247;&#x6B63;&#x5728;&#x4E0B;&#x8F7D;,&#x8BF7;&#x7B49;&#x5F85;&#x2019;,%@&#x201D;,[NSThread currentThread]);<br>        NSURL </em>url = [NSURL URLWithString:@&#x201D;<a href="http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png" target="_blank" rel="external">http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png</a>&#x201C;];<br>        NSData <em>date = [NSData dataWithContentsOfURL:url];<br>        UIImage </em>image = [UIImage imageWithData:date];<br><br>        NSLog(@&#x201D;&#x56FE;&#x7247;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;,%@&#x201D;,[NSThread currentThread]);<br><br>    // &#x4E3B;&#x7EBF;&#x7A0B;&#x5F02;&#x6B65;&gt;&#x56E0;&#x4E3A;&#x6D89;&#x53CA;&#x5230;UI<br>        dispatch_async(dispatch_get_main_queue(), ^{<br>        NSLog(@&#x201D;&#x8BBE;&#x7F6E;&#x63A7;&#x4EF6;&#x7684;&#x80CC;&#x666F;&#x4E3A;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x56FE;&#x7247;(%@)-%@&#x201D;,image,[NSThread currentThread]);<br>        });<br>    });<br><br>}</pre><br>&#x8F93;&#x51FA;:&#x8BF7;&#x91CD;&#x70B9;&#x89C2;&#x5BDF;&#x65F6;&#x95F4;(&#x56E0;&#x4E3A;&#x56FE;&#x7247;&#x8F83;&#x5927;)<br><pre class="lang:objc decode:true">2015-08-02 14:45:08.039 GCD[72660:594772] &#x70B9;&#x51FB;&#x5C4F;&#x5E55;,&#x786E;&#x8BA4;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x2013;&lt;NSThread: 0x7fd820d02b00&gt;{number = 1, name = main}<br>2015-08-02 14:45:08.040 GCD[72660:594851] &#x5F00;&#x59CB;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;,&lt;NSThread: 0x7fd820d17740&gt;{number = 2, name = (null)}<br>2015-08-02 14:45:08.040 GCD[72660:594851] &#x63D0;&#x793A;&#x2019;&#x56FE;&#x7247;&#x6B63;&#x5728;&#x4E0B;&#x8F7D;,&#x8BF7;&#x7B49;&#x5F85;&#x2019;,&lt;NSThread: 0x7fd820d17740&gt;{number = 2, name = (null)}<br>2015-08-02 14:46:02.067 GCD[72660:594851] &#x56FE;&#x7247;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;,&lt;NSThread: 0x7fd820d17740&gt;{number = 2, name = (null)}<br>2015-08-02 14:46:02.068 GCD[72660:594772] &#x8BBE;&#x7F6E;&#x63A7;&#x4EF6;&#x7684;&#x80CC;&#x666F;&#x4E3A;&#x9700;&#x8981;&#x4E0B;&#x8F7D;&#x7684;&#x56FE;&#x7247;(&lt;UIImage: 0x7fd820cf5f20&gt;, {2297, 2417})-&lt;NSThread: 0x7fd820d02b00&gt;{number = 1, name = main}</pre><br><br>#### Sending Messages&#x65B9;&#x6CD5;<br><br><pre class="lang:objc decode:true">#import &#x201C;ViewController.h&#x201D;<br>@interface ViewController ()<br>@property (weak, nonatomic) IBOutlet UIImageView <em>iconView;<br>@end<br><br>@implementation YYViewController<br><br>- (void)viewDidLoad<br>{<br>    [super viewDidLoad];<br>}<br><br>-(void)touchesBegan:(NSSet </em>)touches withEvent:(UIEvent <em>)event<br>{<br><br>// &#x5728;&#x5B50;&#x7EBF;&#x7A0B;&#x4E2D;&#x8C03;&#x7528;download&#x65B9;&#x6CD5;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;<br>    [self performSelectorInBackground:@selector(download) withObject:nil];<br>}<br>-(void)download<br>{<br>    //1.&#x6839;&#x636E;URL&#x4E0B;&#x8F7D;&#x56FE;&#x7247;<br>    //&#x4ECE;&#x7F51;&#x7EDC;&#x4E2D;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;<br>    NSURL </em>urlstr=[NSURL URLWithString:@&#x201D;<a href="http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png" target="_blank" rel="external">http://birdmichael.com/wp-content/uploads/2015/07/GCD1.png</a>&#x201C;];<br><br>    //&#x628A;&#x56FE;&#x7247;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x6570;&#x636E;<br>    NSData <em>data=[NSData dataWithContentsOfURL:urlstr];<br>    //&#x628A;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x6210;&#x56FE;&#x7247;<br>    UIImage </em>image=[UIImage imageWithData:data];<br><br>    //2.&#x56DE;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8BBE;&#x7F6E;&#x56FE;&#x7247;<br>    [self performSelectorOnMainThread:@selector(settingImage:) withObject:image waitUntilDone:NO];<br>}<br><br>//&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x56FE;&#x7247;<br>-(void)settingImage:(UIImage <em>)image<br>{<br>    self.iconView.image=image;<br>}<br></em></pre><br><br>#### Sending Messages&#x65B9;&#x6CD5;&#x5EF6;&#x4F38;<br><br><pre class="lang:objc mark:36-43 decode:true">#import &#x201C;ViewController.h&#x201D;<br>#import &lt;NSData.h&gt;<br><br>@interface ViewController ()<br>@property (weak, nonatomic) IBOutlet UIImageView iconView;<br>@end<br><br>@implementation YYViewController<br><br>- (void)viewDidLoad<br>{<br>    [super viewDidLoad];<br>}<br><br>-(void)touchesBegan:(NSSet <em>)touches withEvent:(UIEvent </em>)event<br>{<br>// &#x5728;&#x5B50;&#x7EBF;&#x7A0B;&#x4E2D;&#x8C03;&#x7528;download&#x65B9;&#x6CD5;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;<br><br>    [self performSelectorInBackground:@selector(download) withObject:nil];<br>}<br><br>-(void)download<br>{<br><br>    //1.&#x6839;&#x636E;URL&#x4E0B;&#x8F7D;&#x56FE;&#x7247;<br>    //&#x4ECE;&#x7F51;&#x7EDC;&#x4E2D;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;<br>    NSURL <em>urlstr=[NSURL URLWithString:@&#x201D;fdsf&#x201D;];<br><br>    //&#x628A;&#x56FE;&#x7247;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x6570;&#x636E;<br>    NSData </em>data=[NSData dataWithContentsOfURL:urlstr];//&#x8FD9;&#x4E00;&#x884C;&#x64CD;&#x4F5C;&#x4F1A;&#x6BD4;&#x8F83;&#x8017;&#x65F6;<br><br>    //&#x628A;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x6210;&#x56FE;&#x7247;<br>    UIImage <em>image=[UIImage imageWithData:data];<br><br>    //2.&#x56DE;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8BBE;&#x7F6E;&#x56FE;&#x7247;<br>    //&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;<br>//    [self performSelectorOnMainThread:@selector(settingImage:) withObject:image waitUntilDone:NO];<br><br>    //&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;<br>    //    [self.imageView performSelector:@selector(setImage:) onThread:[NSThread mainThread] withObject:image waitUntilDone:NO];<br><br>    //&#x7B2C;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;<br>   [self.iconView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:NO];<br>}<br><br>//&#x8BBE;&#x7F6E;&#x663E;&#x793A;&#x56FE;&#x7247;<br>//-(void)settingImage:(UIImage </em>)image<br>//{<br>//    self.iconView.image=image;<br>//}<br><br>@end</pre><br><br>### &#x5EF6;&#x4F38;&#x9605;&#x8BFB;<br><br>&#x5B98;&#x65B9;&#x6587;&#x6863;:<a href="file:///Users/birdmichael126/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.iOS.docset/Contents/Resources/Documents/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/index.html#//apple_ref/doc/uid/20000050-SW20" target="_blank" rel="external">&#x70B9;&#x51FB;&#x8FDB;&#x5165;</a><br><br>## &#x7EBF;&#x7A0B;&#x540C;&#x6B65;(&#x5B89;&#x5168;)<br><br>&#x8BF4;&#x5230;&#x591A;&#x7EBF;&#x7A0B;,&#x6211;&#x4EEC;&#x5728;&#x4E0D;&#x65AD;&#x63D0;&#x9AD8;&#x9F50;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x7684;&#x6027;&#x80FD;&#x7684;&#x540C;&#x65F6;,&#x56E0;&#x4E3A;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#x65FA;&#x65FA;&#x662F;&#x5F88;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x6267;&#x884C;&#x7684;,&#x800C;&#x8FD9;&#x5199;&#x7EBF;&#x7A0B;&#x6781;&#x6709;&#x53EF;&#x80FD;&#x53BB;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;(&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;,&#x540C;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;,&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;),&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x673A;&#x5236;&#x6765;&#x63A7;&#x5236;,&#x5C31;&#x5F88;&#x5BB9;&#x6613;&#x5F15;&#x53D1;<strong>&#x6570;&#x636E;&#x9519;&#x4E71;&#x548C;&#x6570;&#x636E;&#x5B89;&#x5168;</strong>&#x7684;&#x95EE;&#x9898;.<br>&gt; &#x793A;&#x4F8B;&#x5206;&#x6790;:&#x6BCF;&#x5E74;&#x6625;&#x8282;&#x90FD;&#x662F;&#x4E00;&#x7968;&#x96BE;&#x6C42;&#xFF0C;&#x5728;12306&#x4E70;&#x7968;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6210;&#x767E;&#x4E0A;&#x5343;&#x7684;&#x7968;&#x77AC;&#x95F4;&#x5C31;&#x6D88;&#x5931;&#x4E86;&#x3002;&#x4E0D;&#x59A8;&#x5047;&#x8BBE;&#x67D0;&#x8F86;&#x8F66;&#x6709;1&#x5343;&#x5F20;&#x7968;&#xFF0C;&#x540C;&#x65F6;&#x6709;&#x51E0;&#x4E07;&#x4EBA;&#x5728;&#x62A2;&#x8FD9;&#x5217;&#x8F66;&#x7684;&#x8F66;&#x7968;&#xFF0C;&#x987A;&#x5229;&#x7684;&#x8BDD;&#x524D;&#x9762;&#x7684;&#x4EBA;&#x90FD;&#x80FD;&#x4E70;&#x5230;&#x7968;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x73B0;&#x5728;&#x53EA;&#x5269;&#x4E0B;&#x4E00;&#x5F20;&#x7968;&#x4E86;&#xFF0C;&#x800C;&#x540C;&#x65F6;&#x8FD8;&#x6709;&#x51E0;&#x5343;&#x4EBA;&#x5728;&#x8D2D;&#x4E70;&#x8FD9;&#x5F20;&#x7968;&#xFF0C;&#x867D;&#x7136;&#x5728;&#x8FDB;&#x5165;&#x8D2D;&#x7968;&#x73AF;&#x8282;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7968;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x524D;&#x5DF2;&#x7ECF;&#x6709;100&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x8D2D;&#x7968;&#x7684;&#x73AF;&#x8282;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#x5B8C;&#x7968;&#x6570;&#x90FD;&#x4F1A;&#x51CF;1,100&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x5F53;&#x524D;&#x7968;&#x6570;&#x4E3A;-99&#xFF0C;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5F88;&#x660E;&#x663E;&#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x7684;&#x3002;<br>&gt;<br>&gt;<br>&gt; &#x65B9;&#x6848;:&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;?&#x5927;&#x5BB6;&#x90FD;&#x4E0A;&#x8FC7;&#x516C;&#x5171;&#x5395;&#x6240;,&#x5982;&#x4F55;&#x907F;&#x514D;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6B63;&#x5728;&#x65B9;&#x4FBF;&#x7684;&#x65F6;&#x5019;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x4EBA;&#x8D70;&#x8FDB;&#x6765;&#x770B;&#x5230;&#x88F8;&#x9732;&#x7684;&#x81EA;&#x5DF1;&#x5462;?&#x5BF9;,&#x4F60;&#x4E00;&#x8FDB;&#x5395;&#x6240;,&#x4F60;&#x5C31;&#x628A;&#x5395;&#x6240;&#x9501;&#x8D77;&#x6765;.&#x5176;&#x4ED6;&#x4EBA;&#x770B;&#x5230;&#x5395;&#x6240;&#x9501;&#x8D77;&#x6765;,&#x5C31;&#x4EE3;&#x8868;&#x8FD9;&#x4E2A;&#x5395;&#x6240;&#x91CC;&#x6709;&#x4EBA;,&#x5C31;&#x53EA;&#x80FD;&#x7B49;&#x5F85;&#x4F60;&#x65B9;&#x4FBF;&#x5B8C;&#x6BD5;.&#x800C;&#x4F60;&#x4E00;&#x51FA;&#x5395;&#x6240;,&#x5C31;&#x628A;&#x9501;&#x89E3;&#x5F00;.&#x5176;&#x4ED6;&#x4EBA;&#x5C31;&#x53EF;&#x4EE5;&#x987A;&#x5229;&#x8FDB;&#x5165;&#x5395;&#x6240;.<br><br>### &#x9501;&#x7684;&#x5F15;&#x5165;<br><br>&#x6B63;&#x5982;&#x4EE5;&#x4E0A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4E00;&#x6837;,&#x9501;&#x7684;&#x5F15;&#x5165;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x7684;&#x65B9;&#x6848;.&#x201D;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x201D;&#x5F88;&#x50CF;&#x201D;&#x540C;&#x6B65;&#x8C03;&#x7528;&#x201D;,&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x504F;&#x6FC0;&#x7684;&#x7406;&#x89E3;&#x6210;:&#x8BB2;&#x5E76;&#x884C;&#x5F02;&#x6B65;&#x8C03;&#x7528;,&#x56E0;&#x4E3A;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x7EDF;&#x4E00;&#x8D44;&#x6E90;,&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;,&#x6682;&#x65F6;&#x8F6C;&#x4E3A;&#x540C;&#x6B65;.&#x8BBF;&#x95EE;&#x5B8C;&#x8D44;&#x6E90;&#x540E;,&#x518D;&#x5F02;&#x6B65;.<br><br>&#x6CE8;&#x610F;:&#x6309;&#x7406;&#x8BF4;,&#x8D8A;&#x5B89;&#x5168;&#x7EA6;&#x597D;,&#x662F;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x90FD;&#x5E94;&#x8BE5;&#x9501;&#x4F4F;,&#x4FDD;&#x8BC1;&#x9F50;&#x5B89;&#x5168;&#x5462;?<br><br><strong>&#x4EFB;&#x4F55;&#x9501;&#x90FD;&#x662F;&#x9700;&#x8981;&#x6D88;&#x8017;&#x5927;&#x91CF;&#x7684;CPU&#x8D44;&#x6E90;&#x7684;!&#x6240;&#x4EE5;,&#x4E0D;&#x662F;<span style="color: #ff0000;">&#x975E;&#x5FC5;&#x8981;&#x60C5;&#x51B5;&#x90FD;&#x4E0D;&#x7528;</span>.</strong><br><br><img src="http://birdmichael.com/wp-content/uploads/2015/07/QQ20150803-3@2x.png" alt="QQ20150803-3@2x"><br><br>### synchronized&#x4EE3;&#x7801;&#x5757;(&#x4E92;&#x65A5;&#x9501;)<br><br>&#x4F7F;&#x7528;@synchronized&#x662F;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x95EE;&#x9898;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x65E5;&#x5E38;&#x5F00;&#x53D1;&#x4E2D;&#x4E5F;&#x66F4;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;&#x9996;&#x5148;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x540C;&#x6B65;&#x5BF9;&#x8C61;(&#x4E5F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x9501;&#x5BF9;&#x8C61;)&#xFF08;&#x4E00;&#x822C;&#x4F7F;&#x7528;self&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x201D;&#x52A0;&#x9501;&#x4EE3;&#x7801;&#x201D;&#xFF08;&#x4E89;&#x593A;&#x8D44;&#x6E90;&#x7684;&#x8BFB;&#x53D6;&#x3001;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#xFF09;&#x653E;&#x5230;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x3002;@synchronized&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x65F6;&#x5148;&#x68C0;&#x67E5;&#x540C;&#x6B65;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x88AB;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5360;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x5360;&#x7528;&#x8BE5;&#x7EBF;&#x7A0B;&#x5C31;&#x4F1A;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#xFF0C;&#x76F4;&#x5230;&#x540C;&#x6B65;&#x5BF9;&#x8C61;&#x88AB;&#x91CA;&#x653E;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6F14;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528;@synchronized&#x8FDB;&#x884C;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF1A;<br><pre class="lang:objc decode:true">@synchronized(self){<br>        if (_imageNames.count&gt;0) {<br>           // &#x52A0;&#x9501;&#x4EE3;&#x7801;<br>        }<br>    }</pre><br>&#x6CE8;&#x610F;:&#x9501;&#x5B9A;1&#x4EFD;&#x4EE3;&#x7801;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x628A;&#x9501;,&#x7528;&#x591A;&#x628A;&#x9501;&#x662F;&#x65E0;&#x6548;&#x7684;.(&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x624D;&#x4F1A;&#x7528;self).<br><br>&#x4E92;&#x65A5;&#x9501;&#x5B9E;&#x9645;&#x7684;&#x6548;&#x7387;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x8BA9;&#x4EBA;&#x63A5;&#x53D7;&#x7684;&#xFF0C;&#x52A0;&#x9501;&#x7684;&#x65F6;&#x95F4;&#x5927;&#x6982;100ns&#x5DE6;&#x53F3;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x4E0A;&#x4E92;&#x65A5;&#x9501;&#x7684;&#x4E00;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x5148;&#x81EA;&#x65CB;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x5F53;&#x81EA;&#x65CB;&#x7684;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x9600;&#x503C;&#x4E4B;&#x540E;&#x518D;&#x5C06;&#x7EBF;&#x7A0B;&#x6295;&#x5165;&#x7761;&#x7720;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x5E76;&#x53D1;&#x8FD0;&#x7B97;&#x4E2D;&#x4F7F;&#x7528;&#x4E92;&#x65A5;&#x9501;&#xFF08;&#x6BCF;&#x6B21;&#x5360;&#x7528;&#x9501;&#x7684;&#x65F6;&#x95F4;&#x5F88;&#x77ED;&#xFF09;&#x7684;&#x6548;&#x679C;&#x53EF;&#x80FD;&#x4E0D;&#x4E9A;&#x4E8E;&#x4F7F;&#x7528;&#x81EA;&#x65CB;&#x9501;&#x3002;<br>&gt; &#x63D0;&#x793A;:&#x7531;&#x4E8E;&#x5FFD;&#x89C6;&#x9501;&#x5BF9;&#x6027;&#x80FD;&#x7684;&#x6548;&#x679C;&#x592A;&#x5927;,&#x82F9;&#x679C;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;,&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x81EA;&#x52A8;&#x63D0;&#x9192;&#x529F;&#x80FD;.<br><br>### &#x539F;&#x5B50;&#x548C;&#x975E;&#x539F;&#x5B50;<br><br>OC&#x5728;&#x5B9A;&#x4E49;&#x5C5E;&#x6027;&#x65F6;&#x6709;nonatomic&#x548C;atomic&#x4E24;&#x79CD;&#x9009;&#x62E9;,&#x524D;&#x8005;&#x4E3A;&#x975E;&#x539F;&#x5B50;,&#x540E;&#x8005;&#x4E3A;&#x539F;&#x5B50;.<br><br><strong>&#x63D0;&#x793A;:&#x539F;&#x5B50;&#x91C7;&#x7528;&#x7684;&#x662F;&#x201D;&#x81EA;&#x65CB;&#x9501;&#x201D;.</strong><br><br>#### <strong>atomic</strong><br><br>&#x4F1A;&#x81EA;&#x52A8;&#x4E3A;setter&#x65B9;&#x6CD5;&#x52A0;&#x9501;(&#x9ED8;&#x8BA4;&#x5C31;&#x662F;atomic)<br><br>atomic&#x662F;Objc&#x4F7F;&#x7528;&#x7684;&#x4E00;&#x79CD;&#x7EBF;&#x7A0B;&#x4FDD;&#x62A4;&#x6280;&#x672F;,&#x57FA;&#x672C;&#x4E0A;&#x6765;&#x8BB2;,&#x662F;&#x9632;&#x6B62;&#x5728;&#x5199;&#x672A;&#x5B8C;&#x6210;&#x7684;&#x65F6;&#x5019;&#x88AB;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BFB;&#x53D6;,&#x9020;&#x6210;&#x6570;&#x636E;&#x9519;&#x8BEF;.<br><br>&#x7279;&#x70B9;:&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x9700;&#x8981;&#x6D88;&#x8017;&#x5927;&#x91CF;&#x7684;&#x8D44;&#x6E90;<br><br>#### nonatomic<br><br>&#x7279;&#x70B9;:&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x9002;&#x5408;&#x5185;&#x5B58;&#x5C0F;&#x7684;&#x79FB;&#x52A8;&#x8BBE;&#x5907;<br><br><span style="color: #ff0000;">IOS&#x5F00;&#x53D1;&#x5EFA;&#x8BAE;</span>:1.&#x6240;&#x6709;&#x5C5E;&#x6027;&#x90FD;&#x58F0;&#x660E;&#x4E3A;nonatomic,2.&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x591A;&#x7EBF;&#x7A0B;&#x62A2;&#x593A;&#x540C;&#x4E00;&#x5757;&#x8D44;&#x6E90;(<strong>&#x4F7F;&#x7528;&#x5E76;&#x53D1;&#x53D8;&#x6210;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x6027;&#x80FD;,&#x8BA9;&#x66F4;&#x591A;&#x7684;&#x4EE3;&#x7801;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x8D77;&#x6765;,&#x8FBE;&#x5230;&#x5E76;&#x53D1;&#x8FD0;&#x8425;&#x7684;&#x76EE;&#x7684;,&#x800C;&#x52A0;&#x5165;&#x9501;&#x53CD;&#x800C;&#x4F1A;&#x8BA9;&#x6027;&#x80FD;&#x53EF;&#x80FD;&#x66F4;&#x4F4E;</strong>)<br><br>&#x5982;&#x679C;&#x4E07;&#x4E0D;&#x5F97;&#x5DF2;:&#x5C3D;&#x91CF;&#x5C06;&#x52A0;&#x9501;&#x3001;&#x8D44;&#x6E90;&#x62A2;&#x593A;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x4EA4;&#x7ED9;<strong>&#x670D;&#x52A1;&#x5668;</strong>&#x7AEF;&#x5904;&#x7406;&#xFF0C;&#x51CF;&#x5C0F;&#x79FB;&#x52A8;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x538B;&#x529B;.<br><br>### <strong>&#x81EA;&#x65CB;&#x9501;(spinlock)</strong><br><br>&#x540C;&#x6837;&#x7528;&#x6765;&#x6807;&#x8BB0;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x8BE5;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x7EBF;&#x7A0B;&#x591A;&#x6B21;&#x52A0;&#x9501;&#x64CD;&#x4F5C;&#x4F1A;&#x9020;&#x6210;&#x6B7B;&#x9501;&#xFF1B;&#x4F7F;&#x7528;&#x786C;&#x4EF6;&#x63D0;&#x4F9B;&#x7684;swap&#x6307;&#x4EE4;&#x6216;test_and_set&#x6307;&#x4EE4;&#x5B9E;&#x73B0;&#xFF1B;&#x540C;&#x4E92;&#x65A5;&#x9501;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x5728;&#x9501;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x5019;&#x5E76;&#x4E0D;&#x662F;&#x7761;&#x7720;&#x7B49;&#x5F85;&#x5524;&#x9192;&#xFF0C;&#x800C;&#x662F;&#x5FAA;&#x73AF;&#x68C0;&#x6D4B;&#x4FDD;&#x6301;&#x8005;&#x5DF2;&#x7ECF;&#x91CA;&#x653E;&#x4E86;&#x9501;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x662F;&#x8282;&#x7701;&#x4E86;&#x7EBF;&#x7A0B;&#x4ECE;&#x7761;&#x7720;&#x72B6;&#x6001;&#x5230;&#x5524;&#x9192;&#x4E4B;&#x95F4;&#x5185;&#x6838;&#x4F1A;&#x4EA7;&#x751F;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x5728;&#x52A0;&#x9501;&#x65F6;&#x95F4;&#x77ED;&#x6682;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#x8FD9;&#x70B9;&#x4F1A;&#x63D0;&#x9AD8;&#x5F88;&#x5927;&#x6548;&#x7387;<br><br>#### &#x4E0E;&#x4E92;&#x65A5;&#x9501;&#x5BF9;&#x6BD4;<br><br>&#x76F8;&#x540C;:<br><br>&#x90FD;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x7EDF;&#x4E00;&#x65F6;&#x95F4;,&#x53EA;&#x6709;&#x4E00;&#x6761;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x9501;&#x5B9A;&#x8303;&#x56F4;&#x7684;&#x4EE3;&#x7801;<br><br>&#x4E0D;&#x540C;:<br><br>&#x4E92;&#x65A5;&#x9501;:&#x5F53;&#x53D1;&#x73B0;&#x6709;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x9501;&#x5B9A;&#x7684;&#x4EE3;&#x7801;,&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4F1A;&#x8FDB;&#x5165;&#x4F11;&#x7720;&#x72B6;&#x6001;,&#x7B49;&#x5F85;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;,&#x6253;&#x5F00;&#x9501;&#x4EE5;&#x540E;,&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4F1A;&#x88AB;&#x5524;&#x9192;.<br><br>&#x81EA;&#x65CB;&#x9501;:&#x5F53;&#x53D1;&#x73B0;&#x6709;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x9501;&#x5B9A;&#x7684;&#x4EE3;&#x7801;,&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4F1A;&#x4EE5;&#x6B7B;&#x7384;&#x5E7B;&#x7684;&#x65B9;&#x5F0F;,&#x4E00;&#x76F4;&#x7B49;&#x5230;&#x9501;&#x5B9A;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;&#x6210;<br><br>&#x6240;&#x4EE5;:&#x81EA;&#x65CB;&#x9501;&#x66F4;&#x4F73;&#x9002;&#x5408;&#x8D85;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x5B9A;&#x4EE3;&#x7801;.<br><br>### &#x5176;&#x4ED6;&#x9501;<br><br>&#x5728;iOS&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x9664;&#x4E86;&#x540C;&#x6B65;&#x9501;&#x6709;&#x65F6;&#x5019;&#x8FD8;&#x4F1A;&#x7528;&#x5230;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x9501;&#x7C7B;&#x578B;&#xFF0C;&#x5728;&#x6B64;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#xFF1A;<br><br>NSRecursiveLock &#xFF1A;&#x9012;&#x5F52;&#x9501;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x201C;&#x52A0;&#x9501;&#x4EE3;&#x7801;&#x201D;&#x4E2D;&#x5B58;&#x5728;&#x9012;&#x5F52;&#x8C03;&#x7528;&#xFF0C;&#x9012;&#x5F52;&#x5F00;&#x59CB;&#x524D;&#x52A0;&#x9501;&#xFF0C;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x5F00;&#x59CB;&#x540E;&#x4F1A;&#x91CD;&#x590D;&#x6267;&#x884C;&#x6B64;&#x65B9;&#x6CD5;&#x4EE5;&#x81F3;&#x4E8E;&#x53CD;&#x590D;&#x6267;&#x884C;&#x52A0;&#x9501;&#x4EE3;&#x7801;&#x6700;&#x7EC8;&#x9020;&#x6210;&#x6B7B;&#x9501;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x9012;&#x5F52;&#x9501;&#x6765;&#x89E3;&#x51B3;&#x3002;&#x4F7F;&#x7528;&#x9012;&#x5F52;&#x9501;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x53CD;&#x590D;&#x83B7;&#x53D6;&#x9501;&#x800C;&#x4E0D;&#x9020;&#x6210;&#x6B7B;&#x9501;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x8BB0;&#x5F55;&#x83B7;&#x53D6;&#x9501;&#x548C;&#x91CA;&#x653E;&#x9501;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x53EA;&#x6709;&#x6700;&#x540E;&#x4E24;&#x8005;&#x5E73;&#x8861;&#x9501;&#x624D;&#x88AB;&#x6700;&#x7EC8;&#x91CA;&#x653E;&#x3002;<br><br>NSDistributedLock&#xFF1A;&#x5206;&#x5E03;&#x9501;&#xFF0C;&#x5B83;&#x672C;&#x8EAB;&#x662F;&#x4E00;&#x4E2A;&#x4E92;&#x65A5;&#x9501;&#xFF0C;&#x57FA;&#x4E8E;&#x6587;&#x4EF6;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x53EF;&#x4EE5;&#x8DE8;&#x8FDB;&#x7A0B;&#x8BBF;&#x95EE;&#x3002;<br><br>pthread_mutex_t&#xFF1A;&#x540C;&#x6B65;&#x9501;&#xFF0C;&#x57FA;&#x4E8E;C&#x8BED;&#x8A00;&#x7684;&#x540C;&#x6B65;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x4E0E;&#x5176;&#x4ED6;&#x540C;&#x6B65;&#x9501;&#x673A;&#x5236;&#x7C7B;&#x4F3C;&#x3002;<br><br>rwlock&#xFF1A;&#x8BFB;&#x5199;&#x9501;,&#x9AD8;&#x7EA7;&#x522B;&#x9501;&#xFF0C;&#x533A;&#x5206;&#x8BFB;&#x548C;&#x5199;&#xFF0C;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x65F6;&#x5141;&#x8BB8;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x3002;&#x5904;&#x4E8E;&#x8BFB;&#x9501;&#x64CD;&#x4F5C;&#x65F6;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x548C;&#x672C;&#x7EBF;&#x7A0B;&#x7684;&#x8BFB;&#x9501;&#xFF0C; &#x4F46;&#x4E0D;&#x5141;&#x8BB8;&#x5199;&#x9501;&#xFF0C; &#x5904;&#x4E8E;&#x5199;&#x9501;&#x65F6;&#x5219;&#x4EFB;&#x4F55;&#x9501;&#x64CD;&#x4F5C;&#x90FD;&#x4F1A;&#x7761;&#x7720;&#x7B49;&#x5F85;&#xFF1B;&#x5E38;&#x89C1;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4F1A;&#x5728;&#x5199;&#x9501;&#x7B49;&#x5F85;&#x65F6;&#x5C4F;&#x853D;&#x540E;&#x7EED;&#x7684;&#x8BFB;&#x9501;&#x64CD;&#x4F5C;&#x4EE5;&#x9632;&#x5199;&#x9501;&#x88AB;&#x65E0;&#x9650;&#x5B64;&#x7ACB;&#x800C;&#x7B49;&#x5F85;&#xFF0C;&#x5728;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0D;&#x652F;&#x6301;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x7528;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x52A0;&#x5199;&#x4F18;&#x5148;&#x7B49;&#x5F85;&#x6765;&#x7528;&#x4E92;&#x65A5;&#x9501;&#x5B9E;&#x73B0;&#x3002; &#x8BFB;&#x5199;&#x9501;&#x9002;&#x7528;&#x4E8E;&#x5927;&#x91CF;&#x8BFB;&#x5C11;&#x91CF;&#x5199;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x5176;&#x7279;&#x6B8A;&#x7684;&#x903B;&#x8F91;&#x4F7F;&#x5F97;&#x5176;&#x6548;&#x7387;&#x76F8;&#x5BF9;&#x666E;&#x901A;&#x7684;&#x4E92;&#x65A5;&#x9501;&#x548C;&#x81EA;&#x65CB;&#x9501;&#x8981;&#x6162;&#x4E00;&#x4E2A;&#x6570;&#x91CF;&#x7EA7;&#xFF1B;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x70B9;&#x662F;&#x6309;POSIX&#x6807;&#x51C6; &#x5728;&#x7EBF;&#x7A0B;&#x7533;&#x8BF7;&#x8BFB;&#x9501;&#x5E76;&#x672A;&#x91CA;&#x653E;&#x524D;&#x672C;&#x7EBF;&#x7A0B;&#x7533;&#x8BF7;&#x5199;&#x9501;&#x662F;&#x6210;&#x529F;&#x7684;&#xFF0C;&#x4F46;&#x8FD0;&#x884C;&#x540E;&#x7684;&#x903B;&#x8F91;&#x7ED3;&#x679C;&#x662F;&#x65E0;&#x6CD5;&#x9884;&#x6D4B;<br><br>### &#x6B7B;&#x9501;<br><br>&#x4E92;&#x65A5;&#x9501;&#x89E3;&#x51B3;&#x4E86;&#x7ADE;&#x6001;&#x6761;&#x4EF6;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x5F88;&#x4E0D;&#x5E78;&#x540C;&#x65F6;&#x8FD9;&#x4E5F;&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x95EE;&#x9898;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x5C31;&#x662F;&#x6B7B;&#x9501;&#x3002;&#x5F53;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x76F8;&#x4E92;&#x7B49;&#x5F85;&#x7740;&#x5BF9;&#x65B9;&#x7684;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x6B7B;&#x9501;&#xFF0C;&#x8FD9;&#x65F6;&#x7A0B;&#x5E8F;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x5361;&#x4F4F;&#x3002;<br><br>&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;<br><pre class="lang:objc decode:true">dispatch_sync(_queue, ^{<br>  dispatch_sync(_queue, ^{<br>      //do something<br>  });<br>})</pre><br>&#x518D;&#x6BD4;&#x5982;&#xFF1A;<br><br><figure class="code"><figcaption></figcaption><br><div class="highlight"><br><pre class="lang:objc decode:true">main() {<br>dispatch_sync(dispatch_get_main_queue(), ^{<br>  //do something<br>});<br>}</pre><br></div><br></figure>&#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x4F8B;&#x5B50;&#x4E5F;&#x53EF;&#x4EE5;&#x8BF4;&#x660E; dispatch_sync &#x8FD9;&#x4E2A;API&#x662F;&#x5371;&#x9669;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x7528;&#x3002;<br><br><strong>&#x5F53;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x6709;&#x6B7B;&#x9501;&#x7684;&#x53EF;&#x80FD;&#x65F6;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x53D1;&#x751F;</strong><br><br>### &#x8D44;&#x6E90;&#x9965;&#x997F;<br><br>&#x5F53;&#x4F60;&#x8BA4;&#x4E3A;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x4E86;&#x89E3;&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x9762;&#x4E34;&#x7684;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x53C8;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x3002;&#x9501;&#x5B9A;&#x7684;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x4F1A;&#x5F15;&#x8D77;&#x8BFB;&#x5199;&#x95EE;&#x9898;&#x3002;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9650;&#x5236;&#x8D44;&#x6E90;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x8BBF;&#x95EE;&#x5176;&#x5B9E;&#x662F;&#x975E;&#x5E38;&#x6D6A;&#x8D39;&#x7684;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x8D44;&#x6E90;&#x4E0A;&#x6CA1;&#x6709;&#x5199;&#x5165;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6301;&#x6709;&#x4E00;&#x4E2A;&#x8BFB;&#x53D6;&#x9501;&#x662F;&#x88AB;&#x5141;&#x8BB8;&#x7684;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6301;&#x6709;&#x8BFB;&#x53D6;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x5728;&#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x5199;&#x5165;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x4ED6;&#x5E0C;&#x671B;&#x8BFB;&#x53D6;&#x8D44;&#x6E90;&#x7684;&#x7EBF;&#x7A0B;&#x5219;&#x56E0;&#x4E3A;&#x65E0;&#x6CD5;&#x83B7;&#x5F97;&#x8FD9;&#x4E2A;&#x8BFB;&#x53D6;&#x9501;&#x800C;&#x5BFC;&#x81F4;&#x8D44;&#x6E90;&#x9965;&#x997F;&#x7684;&#x53D1;&#x751F;&#x3002;<br><br>### &#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;<br><br>&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#x662F;&#x6307;&#x7A0B;&#x5E8F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#x963B;&#x585E;&#x4E86;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x6709;&#x6548;&#x7684;&#x53CD;&#x8F6C;&#x4E86;&#x4EFB;&#x52A1;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;GCD&#x63D0;&#x4F9B;&#x4E86;3&#x79CD;&#x7EA7;&#x522B;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#xFF0C;&#x5206;&#x522B;&#x662F;Default, High, Low&#x3002; &#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x548C;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#x3002;&#x5F53;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#x83B7;&#x5F97;&#x4E86;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x7684;&#x9501;&#x65F6;&#xFF0C;&#x8BE5;&#x4EFB;&#x52A1;&#x5E94;&#x8BE5;&#x8FC5;&#x901F;&#x5B8C;&#x6210;&#xFF0C;&#x5E76;&#x91CA;&#x653E;&#x6389;&#x9501;&#xFF0C;&#x8FD9;&#x6837;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6CA1;&#x6709;&#x660E;&#x663E;&#x5EF6;&#x65F6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;&#x7136;&#x800C;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x4F1A;&#x5728;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#x6301;&#x6709;&#x9501;&#x7684;&#x671F;&#x95F4;&#x88AB;&#x963B;&#x585E;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x65F6;&#x5019;&#x6709;&#x4E00;&#x4E2A;&#x4E2D;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;(&#x8BE5;&#x4EFB;&#x52A1;&#x4E0D;&#x9700;&#x8981;&#x90A3;&#x4E2A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;)&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x62A2;&#x5360;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x800C;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x6B64;&#x65F6;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x662F;&#x88AB;&#x963B;&#x585E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E2D;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x662F;&#x76EE;&#x524D;&#x6240;&#x6709;&#x53EF;&#x8FD0;&#x884C;&#x4EFB;&#x52A1;&#x4E2D;&#x4F18;&#x5148;&#x7EA7;&#x6700;&#x9AD8;&#x7684;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x4E2D;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x5C31;&#x4F1A;&#x963B;&#x585E;&#x7740;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#xFF0C;&#x5BFC;&#x81F4;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x4E0D;&#x80FD;&#x91CA;&#x653E;&#x6389;&#x9501;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x4F1A;&#x5F15;&#x8D77;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x4E00;&#x76F4;&#x5728;&#x7B49;&#x5F85;&#x9501;&#x7684;&#x91CA;&#x653E;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><br><img src="http://blog.cnbluebox.com/images/priority-inversion.png" alt=""><br><br>&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x591A;&#x4E2A;&#x961F;&#x5217;&#x542C;&#x8D77;&#x6765;&#x867D;&#x7136;&#x4E0D;&#x9519;&#xFF0C;&#x4F46;&#x6BD5;&#x7ADF;&#x662F;&#x7EB8;&#x4E0A;&#x8C08;&#x5175;&#x3002;&#x5B83;&#x5C06;&#x8BA9;&#x672C;&#x6765;&#x5C31;&#x590D;&#x6742;&#x7684;&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x548C;&#x4E0D;&#x53EF;&#x9884;&#x89C1;&#x3002;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5199;&#x4EE3;&#x7801;&#x7684;&#x65F6;&#x5019;&#x6700;&#x597D;&#x53EA;&#x7528;Default&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x961F;&#x5217;&#x6765;&#x8BA9;&#x95EE;&#x9898;&#x590D;&#x6742;&#x5316;&#x3002;<br><br>&#x5173;&#x4E8E;dispatch_queue&#x7684;&#x5E95;&#x5C42;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x8BBE;&#x8BA1;&#x53EF;&#x53C2;&#x8003;&#xFF1A;<a href="http://webfrogs.me/2013/07/18/low-level_concurrency_apis/" target="_blank" rel="external">&#x5E95;&#x5C42;&#x5E76;&#x53D1; API</a><br><br>## NSOperation<br><br>### &#x4ECB;&#x7ECD;<br><br>&#x4F7F;&#x7528;NSOperation&#x548C;NSOperationQueue&#x8FDB;&#x884C;&#x591A;&#x7EBF;&#x7A0B;&#x5F00;&#x53D1;&#x7C7B;&#x4F3C;&#x4E8E;GCD,&#x4F46;&#x4E0D;&#x50CF;GCD&#x662F;&#x7EAF;C&#x8BED;&#x8A00;&#x7684;,&#x8FD9;&#x4E2A;&#x662F;OC&#x7684;.&#x4F46;&#x76F8;&#x6BD4;&#x8F83;&#x4E4B;&#x4E0B;GCD&#x4F1A;&#x66F4;&#x5FEB;&#x4E00;&#x4E9B;,&#x4F46;&#x672C;&#x8D28;&#x4E0A;NSOPeration&#x5176;&#x5B9E;&#x5C31;&#x662F;GCD&#x5C01;&#x88C5;&#x7684;.&#x6240;&#x4EE5;&#x548C;GCD&#x4E00;&#x6837;,&#x53EA;&#x8981;&#x5C06;&#x4E00;&#x4E2A;NSOperation(GCD&#x64CD;&#x4F5C;)(&#x5B9E;&#x9645;&#x5F00;&#x4E2D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5176;&#x5B50;&#x7C7B;NSInvocationOperation&#x3001;NSBlockOperation)&#x653E;&#x5230;NSOperationQueue(GCD&#x7684;&#x961F;&#x5217;)&#x8FD9;&#x4E2A;&#x961F;&#x5217;&#x4E2D;&#x7EBF;&#x7A0B;&#x5C31;&#x4F1A;&#x4F9D;&#x6B21;&#x542F;&#x52A8;.NSOperationQueue&#x8D1F;&#x8D23;&#x7BA1;&#x7406;,&#x6267;&#x884C;&#x6240;&#x6709;&#x7684;NSOperation,&#x5728;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x7684;&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;&#x603B;&#x6570;&#x548C;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;.<br><br>### NSOperation<br><br>#### &#x4ECB;&#x7ECD;<br><br>NSOperation&#x662F;&#x4E00;&#x500B;&#x62BD;&#x8C61;&#x7684;&#x7C7B;&#xFF0C;&#x4F5C;&#x7528;&#x662F;&#x53EF;&#x4EE5;&#x8BB2;&#x4EE3;&#x7801;&#x548C;&#x6570;&#x636E;&#x5C01;&#x88C5;&#x6210;&#x4EFB;&#x52A1;,&#x4EE5;&#x4FBF;&#x6267;&#x884C;.(&#x5728;GCD&#x4E2D;,&#x6211;&#x4EEC;&#x4E5F;&#x628A;&#x4EE3;&#x7801;&#x5C01;&#x88C5;&#x5728;&#x4E00;&#x4E2A;block&#x4E2D;).<br><br>&#x56E0;&#x4E3A;&#x4ED6;&#x65F6;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;,&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7EE7;&#x627F;&#x7684;&#x5B50;&#x7C7B;&#x6765;&#x4F7F;&#x7528;,&#x6216;&#x8005;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x7684;&#x4E24;&#x4E2A;&#x5B50;&#x7C7B;:NSInvocationOperation&#x6216;NSBlockOperation&#x4F7F;&#x7528;&#x65B9;&#x6CD5;.<br><br>&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;&#xFF08;operation&#xFF09;&#x4E2D;&#x6DFB;&#x52A0;&#x9644;&#x5C5E;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x91CD;&#x7528;&#x64CD;&#x4F5C;&#xFF0C;&#x53D6;&#x6D88;&#x6216;&#x8005;&#x6682;&#x505C;&#x4ED6;&#x4EEC;&#x3002;NSOperation&#x548C; Key-Value Observation (KVO)&#x662F;&#x517C;&#x5BB9;&#x7684;&#xFF1B;&#x4F8B;&#x5982;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x76D1;&#x542C;NSNotificationCenter&#x53BB;&#x8BA9;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x3002;<br><br>#### NSOperation&#x5C5E;&#x6027;<br><br>##### &#x72B6;&#x6001;<br><br><div>isCancelled - read-only property</div><br><div>&#xFF08;&#x662F;&#x5426;&#x53D6;&#x6D88;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;</div><br><div><del>isConcurrent - read-only property</del></div><br><div>&#xFF08;&#x662F;&#x5426;&#x5E76;&#x884C;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09; // &#x5DF2;&#x7ECF;&#x88AB;&#x9057;&#x5F03;,&#x4F7F;&#x7528;Asynchronous&#x4EE3;&#x66FF;,&#x5982;&#x679C;&#x4F7F;&#x7528;NSOperationQueue&#x6765;&#x63A7;&#x5236;NSOperation&#x7684;&#x8BDD;&#xFF0C;&#x6C92;&#x6709;&#x7406;&#x7531;&#x8BA9;&#x4ED6;&#x5E76;&#x884C;.</div><br><div>isExecuting - read-only property</div><br><div>&#xFF08;&#x662F;&#x5426;&#x6267;&#x884C;&#x4E2D;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;</div><br><div>isFinished - read-only property</div><br><div>&#xFF08;&#x662F;&#x5426;&#x5B8C;&#x6210;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;</div><br><div>isReady - read-only property</div><br><div>&#xFF08;&#x662F;&#x5426;&#x5C31;&#x7EEA;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;</div><br><div>isAsynchronous - read-only property</div><br><div>&#xFF08;&#x662F;&#x5426;&#x5F02;&#x6B65;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09; // <span class="s2">ios</span><span class="s1"> </span><span class="s2">7 &#x540E;&#x88AB;&#x652F;&#x6301;</span></div>

<h5 id="&#x65B9;&#x6CD5;"><a href="#&#x65B9;&#x6CD5;" class="headerlink" title="&#x65B9;&#x6CD5;"></a>&#x65B9;&#x6CD5;</h5><div>dependencies - read-only property</div><br><div>&#xFF08;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09; // &#x4F46;&#x63D0;&#x4F9B;<span class="s1">- (</span><span class="s2">void</span><span class="s1">)addDependency:&#x589E;&#x52A0;&#x65B9;&#x6CD5; &#x548C; </span><span class="s1">- (</span><span class="s2">void</span><span class="s1">)removeDependency:&#x79FB;&#x9664;&#x65B9;&#x6CD5;</span></div><br><div>queuePriority - readable and writable property</div><br><div>&#xFF08;&#x961F;&#x5217;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x8BFB;&#x5199;&#xFF09;</div><br><div>completionBlock - readable and writable property</div><br><div>&#xFF08;&#x5B8C;&#x6210;&#x540E;&#x6267;&#x884C;block&#xFF0C;&#x8BFB;&#x5199;&#xFF09;</div><br><div><br><br>#### operation&#x540C;&#x6B65;vs&#x5F02;&#x6B65;<br><br>##### &#x540C;&#x6B65;<br><br>&#x53EF;&#x4EE5;&#x5728;&#x6CA1;&#x6709;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x624B;&#x52A8;&#x6267;&#x884C;operation,&#x4F46;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;.&#x5C24;&#x5176;&#x662F;operation&#x5BF9;&#x8C61;&#x5FC5;&#x987B;&#x51C6;&#x5907;&#x597D;&#x8FD0;&#x884C;,&#x5E76;&#x4FDD;&#x8BC1;&#x662F;&#x8C03;&#x7528;start&#x65B9;&#x6CD5;&#x6765;&#x6267;&#x884C;.<br><br>&#x4E00;&#x4E2A;operation&#x53EA;&#x6709;&#x5728;&#x5176;isReady&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;YES&#x65F6;&#x624D;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x53EF;&#x8FD0;&#x884C;&#x7684;.isReady&#x65B9;&#x6CD5;&#x4F1A;&#x88AB;&#x6574;&#x5408;&#x8FDB;NSOperation&#x7684;&#x4F9D;&#x8D56;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x6765;&#x4FDD;&#x8BC1;operation&#x7684;&#x4F9D;&#x8D56;&#x72B6;&#x6001;.&#x53EA;&#x6709;&#x5728;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x6E05;&#x695A;&#x540E;,operation&#x624D;&#x5F00;&#x59CB;&#x8FD0;&#x884C;.<br><br>start&#x65B9;&#x6CD5;&#x5728;&#x6B63;&#x5F0F;&#x6267;&#x884C;&#x4F60;&#x5F97;&#x4EE3;&#x7801;&#x4E4B;&#x524D;&#x4F1A;&#x505A;&#x51E0;&#x4E2A;&#x5B89;&#x5168;&#x6027;&#x68C0;&#x6D4B;.&#x9ED8;&#x8BA4;&#x7684;start&#x65B9;&#x6CD5;&#x4F1A;&#x751F;&#x6210;operation&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x6240;&#x9700;&#x7684;KVO&#x901A;&#x77E5;.&#x540C;&#x65F6;&#x4FDD;&#x8BC1;&#x5DF2;&#x53D6;&#x6D88;&#x7684;operation&#x4E0D;&#x4F1A;&#x518D;&#x6267;&#x884C;,&#x4EE5;&#x53CA;&#x5728;operation&#x6CA1;&#x5C31;&#x7EEA;&#x5C31;&#x5F00;&#x59CB;&#x8FD0;&#x884C;&#x65F6;&#x629B;&#x51FA;&#x5F02;&#x5E38;.<br><br>&#x4F46;&#x662F;,&#x53EA;&#x8981;NSBlockOperation&#x5C01;&#x88C5;&#x7684;&#x64CD;&#x4F5C;&#x6570; &gt; 1,&#x5C31;&#x4F1A;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x64CD;&#x4F5C;.<br>&gt; &#x4F46;&#x662F;,&#x8FD9;&#x6837;&#x505A;&#x662F;&#x6BEB;&#x65E0;&#x610F;&#x4E49;&#x7684;.&#x56E0;&#x4E3A;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x4EE3;&#x7801;.<br><br>##### &#x5F02;&#x6B65;<br><br></div><br><div>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#x5F02;&#x6B65;&#x6267;&#x884C;,&#x4F60;&#x53EA;&#x9700;&#x8981;&#x628A;&#x64CD;&#x4F5C;&#x4E22;&#x4EBA;&#x961F;&#x5217;,&#x7A0B;&#x5E8F;&#x4F1A;&#x81EA;&#x52A8;&#x5F00;&#x542F;&#x7EBF;&#x7A0B;&#x6267;&#x884C;.</div><br><div>&#x6216;&#x8005;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x60C5;&#x51B5;,&#x5728;NSBlockOperation&#x5982;&#x679C;&#x4F7F;&#x7528;<span class="s1">+ (</span><span class="s2">instancetype</span><span class="s1">)blockOperationWithBlock:&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;N&#x4E2A;&#x64CD;&#x4F5C;.&#x518D;&#x8C03;&#x7528;-(void)start&#x65B9;&#x6CD5;,&#x4E5F;&#x4F1A;&#x5F00;&#x542F;&#x7EBF;&#x7A0B;,&#x5E76;&#x4E14;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E5F;&#x4F1A;&#x6267;&#x884C;.</span></div>

<h4 id="NSInvocationOperation"><a href="#NSInvocationOperation" class="headerlink" title="NSInvocationOperation"></a>NSInvocationOperation</h4><h5 id="start"><a href="#start" class="headerlink" title="start"></a>start</h5><p>start &#x65B9;&#x6CD5; &#x4F1A;&#x5728;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C; @selector &#x65B9;&#x6CD5;,&#x6240;&#x4EE5;&#x6BEB;&#x65E0;&#x610F;&#x4E49;,&#x7B49;&#x4EF7;&#x4E8E;&#x76F4;&#x63A5;self&#x8C03;&#x7528;- (void)downloadImage:&#x65B9;&#x6CD5;</p>
<pre class="lang:objc decode:true">-(void)bmDemo1{
    /*&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x64CD;&#x4F5C;
     object:&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x53C2;&#x6570;
    */
    NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(downloadImage:) object:@&quot;Invocation&quot;];
    //&#x521B;&#x5EFA;&#x5B8C;NSInvocationOperation&#x5BF9;&#x8C61;&#x5E76;&#x4E0D;&#x4F1A;&#x8C03;&#x7528;&#xFF0C;&#x5B83;&#x7531;&#x4E00;&#x4E2A;start&#x65B9;&#x6CD5;&#x542F;&#x52A8;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x6CE8;&#x610F;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x8C03;&#x7528;start&#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x6B64;&#x64CD;&#x4F5C;&#x4F1A;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x8FD9;&#x4E48;&#x64CD;&#x4F5C;,&#x800C;&#x662F;&#x6DFB;&#x52A0;&#x5230;NSOperationQueue&#x4E2D;
//    [invocationOperation start];

}
- (void)downloadImage:(id)obj {

    NSLog(@&quot;%@ %@&quot;, [NSThread currentThread], obj);
}</pre>

<h5 id="&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;"><a href="#&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;" class="headerlink" title="&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;"></a>&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;</h5><p>&#x5C06;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;&#xFF0C;&#x4F1A;<q>&#x5F02;&#x6B65;</q>&#x6267;&#x884C; selector &#x65B9;&#x6CD5;</p>
<pre class="lang:objc decode:true">- (void)bmDemo2 {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(downloadImage:) object:@&quot;queue&quot;];

    [queue addOperation:invocationOperation];
}</pre>

<h5 id="&#x6DFB;&#x52A0;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;"><a href="#&#x6DFB;&#x52A0;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;" class="headerlink" title="&#x6DFB;&#x52A0;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;"></a>&#x6DFB;&#x52A0;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;</h5><p>&#x4F1A;&#x5F00;&#x542F;&#x591A;&#x6761;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x662F;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x4E0E;GCD&#x4E2D;&#x5E76;&#x53D1;&#x961F;&#x5217;&amp;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x6548;&#x679C;&#x4E00;&#x6837;&#xFF01;</p>
<pre class="lang:objc decode:true ">- (void)bmDemo3 {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    for (int i = 0; i &lt; 5; ++i) {
        NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(downloadImage:) object:@(i)];

        [queue addOperation:invocationOperation];
    }
}</pre>

<h5 id="&#x7ED3;&#x8BBA;"><a href="#&#x7ED3;&#x8BBA;" class="headerlink" title="&#x7ED3;&#x8BBA;"></a>&#x7ED3;&#x8BBA;</h5><p>&#x64CD;&#x4F5C; -&gt; &#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;</p>
<p>&#x961F;&#x5217; -&gt; &#x5168;&#x5C40;&#x961F;&#x5217;</p>
<p>&#x63D0;&#x793A;:&#x4E00;&#x822C;&#x4E0D;&#x4F7F;&#x7528;,&#x56E0;&#x4E3A;&#x8003;&#x8651;&#x5230;&#x6548;&#x7387;&#x548C;&#x4FBF;&#x6377;&#x89D2;&#x5EA6;,&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x6CA1;&#x4EFB;&#x4F55;&#x610F;&#x4E49;.</p>
<h4 id="NSBlockOperation"><a href="#NSBlockOperation" class="headerlink" title="NSBlockOperation"></a>NSBlockOperation</h4><p>NSBlockOperation&#x6BD4;NSInvocationOperation&#x66F4;&#x52A0;&#x7075;&#x6D3B;,&#x5E76;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x51C6;&#x5907;&#x4E00;&#x4E2A;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;.</p>
<h5 id="&#x5C06;&#x4EFB;&#x52A1;&#x6DFB;&#x52A0;&#x5230;&#x64CD;&#x4F5C;"><a href="#&#x5C06;&#x4EFB;&#x52A1;&#x6DFB;&#x52A0;&#x5230;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5C06;&#x4EFB;&#x52A1;&#x6DFB;&#x52A0;&#x5230;&#x64CD;&#x4F5C;"></a>&#x5C06;&#x4EFB;&#x52A1;&#x6DFB;&#x52A0;&#x5230;&#x64CD;&#x4F5C;</h5><pre class="lang:objc decode:true ">- (void)bmDemo1 {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    NSBlockOperation *NSBlockOperation = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@&quot;%@&quot;, [NSThread currentThread]);
    }];

    [queue addOperation:NSBlockOperation];
}</pre>

<h5 id="&#x5411;&#x961F;&#x5217;&#x4E2D;&#x6DFB;&#x52A0;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;"><a href="#&#x5411;&#x961F;&#x5217;&#x4E2D;&#x6DFB;&#x52A0;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5411;&#x961F;&#x5217;&#x4E2D;&#x6DFB;&#x52A0;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;"></a>&#x5411;&#x961F;&#x5217;&#x4E2D;&#x6DFB;&#x52A0;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;</h5><pre class="lang:objc decode:true ">- (void)opDemo5 {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    NSBlockOperation *operation1 = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@&quot;block %@&quot;, [NSThread currentThread]);
    }];
    [queue addOperation:operation1];

    NSInvocationOperation *operation2 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(downloadImage:) object:@&quot;invocation&quot;];
    [queue addOperation:operation2];
}</pre>
&#x53EF;&#x4EE5;&#x5728;&#x540C;&#x4E00;&#x4E2A;NSOperationQueue&#x4E2D;&#x6DFB;&#x52A0;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;NSOperation&#x7684;&#x5B50;`&#x7C7B;`
&gt; &#x63D0;&#x793A;:&#x53EA;&#x8981;NSBlockOperation&#x5C01;&#x88C5;&#x7684;&#x64CD;&#x4F5C;&#x6570; &gt; 1,&#x5C31;&#x4F1A;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x64CD;&#x4F5C;.

#### 

#### &#x6B63;&#x786E;&#x7684;&#x54CD;&#x5E94;Cancel&#x4E8B;&#x4EF6;

operation&#x5F00;&#x59CB;&#x6267;&#x884C;&#x4E4B;&#x540E;,&#x4F1A;&#x4E00;&#x76F4;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x76F4;&#x5230;&#x5B8C;&#x6210;,&#x6216;&#x8005;&#x663E;&#x5F0F;&#x5730;&#x53D6;&#x6D88;&#x64CD;&#x4F5C;&#x3002;&#x53D6;&#x6D88;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;,&#x751A;&#x81F3;&#x5728;operation&#x6267;&#x884C;&#x4E4B;&#x524D;&#x3002;&#x5C3D;&#x7BA1;NSOperation&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;,&#x8BA9;&#x5E94;&#x7528;&#x53D6;&#x6D88;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;,&#x4F46;&#x662F;&#x8BC6;&#x522B;&#x51FA;&#x53D6;&#x6D88;&#x4E8B;&#x4EF6;&#x5219;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x5982;&#x679C;operation&#x76F4;&#x63A5;&#x7EC8;&#x6B62;, &#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x56DE;&#x6536;&#x6240;&#x6709;&#x5DF2;&#x5206;&#x914D;&#x7684;&#x5185;&#x5B58;&#x6216;&#x8D44;&#x6E90;&#x3002;&#x56E0;&#x6B64;operation&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x68C0;&#x6D4B;&#x53D6;&#x6D88;&#x4E8B;&#x4EF6;,&#x5E76;&#x4F18;&#x96C5;&#x5730;&#x9000;&#x51FA;&#x6267;&#x884C;

NSOperation&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x5B9A;&#x671F;&#x5730;&#x8C03;&#x7528;isCancelled&#x65B9;&#x6CD5;&#x68C0;&#x6D4B;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x53D6;&#x6D88;,&#x5982;&#x679C;&#x8FD4;&#x56DE;YES(&#x8868;&#x793A;&#x5DF2;&#x53D6;&#x6D88;),&#x5219;&#x7ACB;&#x5373;&#x9000;&#x51FA;&#x6267;&#x884C;&#x3002;&#x4E0D;&#x7BA1;&#x662F;&#x81EA;&#x5B9A;&#x4E49;NSOperation&#x5B50;&#x7C7B;,&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x7684;&#x4E24;&#x4E2A;&#x5177;&#x4F53;&#x5B50;&#x7C7B;,&#x90FD;&#x9700;&#x8981;&#x652F;&#x6301;&#x53D6;&#x6D88;&#x3002;isCancelled&#x65B9;&#x6CD5;&#x672C;&#x8EAB;&#x975E;&#x5E38;&#x8F7B;&#x91CF;,&#x53EF;&#x4EE5;&#x9891;&#x7E41;&#x5730;&#x8C03;&#x7528;&#x800C;&#x4E0D;&#x4EA7;&#x751F;&#x5927;&#x7684;&#x6027;&#x80FD;&#x635F;&#x5931;

&#x4EE5;&#x4E0B;&#x5730;&#x65B9;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8C03;&#x7528;isCancelled:
* &#x5728;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x5B9E;&#x9645;&#x7684;&#x5DE5;&#x4F5C;&#x4E4B;&#x524D;
* &#x5728;&#x5FAA;&#x73AF;&#x7684;&#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x8FC7;&#x7A0B;&#x4E2D;,&#x5982;&#x679C;&#x6BCF;&#x4E2A;&#x8FED;&#x4EE3;&#x76F8;&#x5BF9;&#x8F83;&#x957F;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8C03;&#x7528;&#x591A;&#x6B21;
* &#x4EE3;&#x7801;&#x4E2D;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x4E2D;&#x6B62;&#x64CD;&#x4F5C;&#x7684;&#x4EFB;&#x4F55;&#x5730;&#x65B9;

&#x793A;&#x4F8B;&#x4EE3;&#x7801;
<pre class="lang:objc decode:true">- (void)demo1 
{
    BOOL isDone = NO;
    while (![self isCancelled] &amp;&amp; !isDone) {     
        // ..code..
        if([self isCancelled]){
            return ;      
        }
        // ..code..
    }
}</pre>

<h4 id="NSOperation&#x4F9D;&#x8D56;&#x5173;&#x7CFB;"><a href="#NSOperation&#x4F9D;&#x8D56;&#x5173;&#x7CFB;" class="headerlink" title="NSOperation&#x4F9D;&#x8D56;&#x5173;&#x7CFB;"></a>NSOperation&#x4F9D;&#x8D56;&#x5173;&#x7CFB;</h4><p>&#x524D;&#x9762;&#x4F7F;&#x7528;GCD&#x5F88;&#x96BE;&#x5728;&#x5E76;&#x884C;&#x4E2D;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;,&#x4F46;&#x662F;&#x4F7F;&#x7528;NSOperation&#x5C31;&#x5BB9;&#x6613;&#x591A;&#x4E86;,&#x6BCF;&#x4E2A;NSOperation&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4F9D;&#x8D56;&#x7EBF;&#x7A0B;.&#x8C03;&#x7528;addDependency: &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x4E24;&#x4E2A;operation&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;.&#x8BE5;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x4E86;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x5230;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x5355;&#x5411;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;.&#x8FD9;&#x4E2A;&#x5355;&#x5411;&#x5173;&#x7CFB;&#x8868;&#x660E;&#x5F53;&#x524D;operation&#x5BF9;&#x8C61;&#x53EA;&#x6709;&#x5728;&#x76EE;&#x6807;operation&#x5BF9;&#x8C61;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x6267;&#x884C;.&#x8C03;&#x7528;removeDependency:&#x53EF;&#x4EE5;&#x79FB;&#x9664;2&#x4E2A;operation&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;.</p>
<p>operation&#x5BF9;&#x8C61;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;<strong>&#x4E0D;&#x9650;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x961F;&#x5217;.</strong>&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;operation&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x4E2D;.&#x4F46;&#x662F;operation&#x4E4B;&#x95F4;<span style="color: #ff0000;"><strong>&#x4E0D;&#x80FD;&#x6DFB;&#x52A0;&#x5FAA;&#x73AF;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;</strong></span>(A&#x4F9D;&#x8D56;&#x4E8E;B,B&#x4F9D;&#x8D56;&#x4E8E;A).</p>
<p><a href="http://birdmichael.com/wp-content/uploads/2015/07/1359821609_3145.png" target="_blank" rel="external"><img src="http://birdmichael.com/wp-content/uploads/2015/07/1359821609_3145.png" alt="1359821609_3145"></a></p>
<p>operation&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5EFA;&#x7ACB;&#x5728;operation&#x5BF9;&#x8C61;&#x95F4;KVO&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;.&#x81EA;&#x5B9A;&#x4E49;&#x7684;operation&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x5408;&#x9002;&#x4F4D;&#x7F6E;&#x6765;&#x6DFB;&#x52A0;KVO&#x901A;&#x77E5;.</p>
<blockquote>
<p>&#x6362;&#x4E00;&#x53E5;&#x8BDD;&#x8BF4;,&#x8BBE;&#x7F6E;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5C31;&#x662F;&#x8BBE;&#x7F6E;&#x7EBF;&#x7A0B;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;,&#x5E76;&#x4E14;&#x91C7;&#x7528;&#x86C7;&#x5F62;&#x7ED3;&#x6784;,&#x4E5F;&#x5C31;&#x662F;&#x8BF4;:&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x5148;&#x6267;&#x884C;A,&#x518D;&#x6267;&#x884C;B,&#x6700;&#x540E;&#x6267;&#x884C;C.&#x90A3;&#x4E48;&#x5C31;C&#x4F9D;&#x8D56;B,B&#x4F9D;&#x8D56;A.</p>
</blockquote>
<h5 id="&#x793A;&#x4F8B;&#x4EE3;&#x7801;"><a href="#&#x793A;&#x4F8B;&#x4EE3;&#x7801;" class="headerlink" title="&#x793A;&#x4F8B;&#x4EE3;&#x7801;"></a>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</h5><pre class="lang:objc decode:true">- (void)dependency {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    NSBlockOperation *operation1 = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@&quot;&#x767B;&#x5F55; %@&quot;, [NSThread currentThread]);
    }];
    NSBlockOperation *operation2 = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@&quot;&#x8F6F;&#x4EF6;&#x4ED8;&#x8D39; %@&quot;, [NSThread currentThread]);
    }];
    NSBlockOperation *operation3 = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@&quot;&#x83B7;&#x53D6;&#x4E0B;&#x8F7D;&#x94FE;&#x63A5; %@&quot;, [NSThread currentThread]);
    }];
    NSBlockOperation *operation4 = [NSBlockOperation blockOperationWithBlock:^{
        NSLog(@&quot;&#x901A;&#x77E5;&#x7528;&#x6237;&#x6B63;&#x5728;&#x4E0B;&#x8F7D;&#x4E2D; %@&quot;, [NSThread currentThread]);
    }];

    [operation2 addDependency:operation1];
    [operation3 addDependency:operation2];
    [operation4 addDependency:operation3];
    // &#x6CE8;&#x610F;&#x4E0D;&#x8981;&#x5FAA;&#x73AF;&#x4F9D;&#x8D56;
    //    [operation1 addDependency:operation4]; // &#x4E25;&#x91CD;&#x9519;&#x8BEF;!!!

    [queue addOperations:@[operation1, operation2, operation3] waitUntilFinished:NO];
    [[NSOperationQueue mainQueue] addOperation:operation4];

    NSLog(@&quot;&#x6B22;&#x8FCE;&#x754C;&#x9762;,&#x8BA9;&#x7528;&#x6237;&#x4E0B;&#x8F7D;&quot;);
}</pre>

<h5 id="&#x8F93;&#x51FA;&#x7ED3;&#x679C;"><a href="#&#x8F93;&#x51FA;&#x7ED3;&#x679C;" class="headerlink" title="&#x8F93;&#x51FA;&#x7ED3;&#x679C;"></a>&#x8F93;&#x51FA;&#x7ED3;&#x679C;</h5><pre class="lang:objc decode:true ">2015-08-07 05:33:06.812 NSThread[58353:1941467] &#x6B22;&#x8FCE;&#x754C;&#x9762;,&#x8BA9;&#x7528;&#x6237;&#x4E0B;&#x8F7D;
2015-08-07 05:33:06.812 NSThread[58353:1941581] &#x767B;&#x5F55; &lt;NSThread: 0x7f875acaf660&gt;{number = 2, name = (null)}
2015-08-07 05:33:06.820 NSThread[58353:1941581] &#x8F6F;&#x4EF6;&#x4ED8;&#x8D39; &lt;NSThread: 0x7f875acaf660&gt;{number = 2, name = (null)}
2015-08-07 05:33:06.821 NSThread[58353:1941581] &#x83B7;&#x53D6;&#x4E0B;&#x8F7D;&#x94FE;&#x63A5; &lt;NSThread: 0x7f875acaf660&gt;{number = 2, name = (null)}
2015-08-07 05:33:06.822 NSThread[58353:1941467] &#x901A;&#x77E5;&#x7528;&#x6237;&#x6B63;&#x5728;&#x4E0B;&#x8F7D;&#x4E2D; &lt;NSThread: 0x7f875ac17380&gt;{number = 1, name = main}</pre>

<h4 id="&#x5176;&#x4ED6;&#x65B9;&#x6CD5;"><a href="#&#x5176;&#x4ED6;&#x65B9;&#x6CD5;" class="headerlink" title="&#x5176;&#x4ED6;&#x65B9;&#x6CD5;"></a>&#x5176;&#x4ED6;&#x65B9;&#x6CD5;</h4><h5 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h5><div>&#x521D;&#x59CB;&#x5316;</div><br><div><del> &#x2013; init </del>  //  Available in OS X v10.5 through OS X v10.9</div><br><div></div>

<h5 id="Executing-the-Operation"><a href="#Executing-the-Operation" class="headerlink" title="Executing the Operation"></a>Executing the Operation</h5><div>&#x6267;&#x884C;&#x5DE5;&#x4F5C;</div><br><div> &#x2013; start</div><br><div> &#x2013; main</div><br><div> &#x2013; completionBlock</div><br><div> &#x2013; setCompletionBlock:</div><br><div></div>

<h5 id="Waiting-for-Completion"><a href="#Waiting-for-Completion" class="headerlink" title="Waiting for Completion"></a>Waiting for Completion</h5><div>&#x7B49;&#x5F85;&#x6267;&#x884C;</div><br><div> &#x2013; waitUntilFinished Instance Methods</div><br>&#xA0;<br><br>### NSOperationQueue<br><br>#### &#x4ECB;&#x7ECD;<br><br><div>NSOperationQueue &#x6709;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x961F;&#x5217;&#xFF1A;&#x4E3B;&#x961F;&#x5217;&#x548C;&#x81EA;&#x5B9A;&#x4E49;&#x961F;&#x5217;&#x3002;&#x4E3B;&#x961F;&#x5217;&#x8FD0;&#x884C;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E4B;&#x4E0A;&#xFF0C;&#x800C;&#x81EA;&#x5B9A;&#x4E49;&#x961F;&#x5217;&#x5728;&#x540E;&#x53F0;&#x6267;&#x884C;&#x3002;&#x5728;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x961F;&#x5217;&#x6240;&#x5904;&#x7406;&#x7684;&#x4EFB;&#x52A1;&#x90FD;&#x4F7F;&#x7528; NSOperation &#x7684;&#x5B50;&#x7C7B;&#x6765;&#x8868;&#x8FF0;&#x3002;</div><br><div><br><br>#### NSOperationQueue&#x5C5E;&#x6027;<br><br></div><br><div>operations - read-only property</div><br><div>&#xFF08;&#x64CD;&#x4F5C;&#x7EC4;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;</div><br><div>operationCount - read-only property</div><br><div>&#xFF08;&#x64CD;&#x4F5C;&#x6570;&#x91CF;&#xFF0C;&#x53EA;&#x8BFB;&#xFF09;</div><br><div>maxConcurrentOperationCount - readable and writable property</div><br><div>&#xFF08;&#x6700;&#x5927;&#x5E76;&#x884C;&#x5904;&#x7406;&#x64CD;&#x4F5C;&#x6570;(&#x6700;&#x5927;&#x7EBF;&#x7A0B;)&#xFF0C;&#x8BFB;&#x5199;&#xFF09;</div><br><div>suspended - readable and writable property</div><br><div>&#xFF08;&#x662F;&#x5426;&#x6682;&#x505C;&#xFF0C;&#x8BFB;&#x5199;&#xFF09;</div><br><div>name - readable and writable property</div><br><div>&#xFF08;&#x540D;&#x79F0;&#xFF0C;&#x8BFB;&#x5199;&#xFF09;</div><br><div><br><br>#### &#x591A;&#x6838;&#x5FC3;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9805;<br><br><div>&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x5355;&#x4E00;&#x7684;&#x7BA1;&#x7406;&#x5668;&#xFF08;NSOperationQueue&#xFF09;&#x662F;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x9501;&#x53BB;&#x540C;&#x6B65;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;</div><br></div>

<h4 id="&#x961F;&#x5217;&#x4E2D;Operations&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;"><a href="#&#x961F;&#x5217;&#x4E2D;Operations&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;" class="headerlink" title="&#x961F;&#x5217;&#x4E2D;Operations&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;"></a><strong>&#x961F;&#x5217;&#x4E2D;Operations&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;</strong></h4><p>&#x5BF9;&#x4E8E;&#x6DFB;&#x52A0;&#x5230;queue&#x4E2D;&#x7684;operations&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x53D6;&#x51B3;&#x4E8E;2&#x70B9;&#xFF1A;</p>
<p>1.&#x9996;&#x5148;&#x770B;&#x770B;NSOperation&#x662F;&#x5426;&#x51C6;&#x5907;&#x597D;&#x4E86;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;.</p>
<p>2.&#x7136;&#x540E;&#x518D;&#x6839;&#x636E;&#x6240;&#x6709;NSOperation&#x7684;&#x76F8;&#x5BF9;&#x4F18;&#x5148;&#x7EA7;&#x6765;&#x786E;&#x5B9A;.&#x4F18;&#x5148;&#x7EA7;&#x7B49;&#x7EA7;&#x5219;&#x662F;operation&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x7684;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;.&#x9ED8;&#x8BA4;&#x6240;&#x6709;operation&#x90FD;&#x62E5;&#x6709;&#x201C;&#x666E;&#x901A;&#x201D;&#x4F18;&#x5148;&#x7EA7;,&#x4E0D;&#x8FC7;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;setQueuePriority:&#x65B9;&#x6CD5;&#x6765;&#x63D0;&#x5347;&#x6216;&#x964D;&#x4F4E;operation&#x5BF9;&#x8C61;&#x7684;&#x4F18;&#x5148;&#x7EA7;.&#x4F18;&#x5148;&#x7EA7;&#x53EA;&#x80FD;&#x5E94;&#x7528;&#x4E8E;&#x76F8;&#x540C;queue&#x4E2D;&#x7684;operations.&#x5982;&#x679C;&#x5E94;&#x7528;&#x6709;&#x591A;&#x4E2A;operation queue,&#x6BCF;&#x4E2A;queue&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x7B49;&#x7EA7;&#x662F;&#x4E92;&#x76F8;&#x72EC;&#x7ACB;&#x7684;.&#x56E0;&#x6B64;&#x4E0D;&#x540C;queue&#x4E2D;&#x7684;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x64CD;&#x4F5C;&#x4ECD;&#x7136;&#x53EF;&#x80FD;&#x6BD4;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x64CD;&#x4F5C;&#x66F4;&#x65E9;&#x6267;&#x884C;.</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x4F18;&#x5148;&#x7EA7;&#x4E0D;&#x80FD;&#x66FF;&#x4EE3;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;,&#x4F18;&#x5148;&#x7EA7;&#x53EA;&#x662F;&#x5BF9;&#x5DF2;&#x7ECF;&#x51C6;&#x5907;&#x597D;&#x7684; operations&#x786E;&#x5B9A;&#x6267;&#x884C;&#x987A;&#x5E8F;.&#x5148;&#x6EE1;&#x8DB3;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;,&#x7136;&#x540E;&#x518D;&#x6839;&#x636E;&#x4F18;&#x5148;&#x7EA7;&#x4ECE;&#x6240;&#x6709;&#x51C6;&#x5907;&#x597D;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#x9009;&#x62E9;&#x4F18;&#x5148;&#x7EA7;&#x6700;&#x9AD8;&#x7684;&#x90A3;&#x4E2A;&#x6267;&#x884C;.(&#x591A;&#x4E2A;operations&#x5355;&#x7EAF;&#x8BBE;&#x8BA1;&#x4F18;&#x5148;&#x7EA7;&#x65E0;&#x6CD5;&#x7CBE;&#x51C6;&#x63A7;&#x5236;)</p>
</blockquote>
<h4 id="&#x6700;&#x5927;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x6570;&#x91CF;"><a href="#&#x6700;&#x5927;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x6570;&#x91CF;" class="headerlink" title="&#x6700;&#x5927;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x6570;&#x91CF;"></a><strong>&#x6700;&#x5927;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x6570;&#x91CF;</strong></h4><p>&#x961F;&#x5217;&#x7684;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x6570;&#x91CF;,&#x610F;&#x601D;&#x662F;&#x961F;&#x5217;&#x4E2D;&#x6700;&#x591A;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x51E0;&#x6761;&#x7EBF;&#x7A0B;,&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;-1,&#x4E5F;&#x5C31;&#x662F;&#x6CA1;&#x6709;&#x9650;&#x5236;,&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x64CD;&#x4F5C;(&#x4F46;&#x4E0D;&#x4E00;&#x5B9A;&#x6709;&#x591A;&#x5C11;&#x64CD;&#x4F5C;,&#x5C31;&#x4F1A;&#x5F00;&#x542F;&#x591A;&#x5C11;&#x7EBF;&#x7A0B;,&#x5177;&#x4F53;&#x5F00;&#x542F;&#x591A;&#x5C11;&#x7EBF;&#x7A0B;&#x7531;&#x7CFB;&#x7EDF;&#x6765;&#x51B3;&#x5B9A;).</p>
<p>&#x867D;&#x7136;NSOperationQueue&#x7C7B;&#x8BBE;&#x8BA1;&#x7528;&#x4E8E;&#x5E76;&#x53D1;&#x6267;&#x884C;Operations,&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5F3A;&#x5236;&#x5355;&#x4E2A;queue&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;Operation.setMaxConcurrentOperationCount:&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;queue&#x7684;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x6570;&#x91CF;.&#x8BBE;&#x4E3A;1&#x5C31;&#x8868;&#x793A;queue&#x6BCF;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;.&#x4E0D;&#x8FC7;operation&#x6267;&#x884C;&#x7684;&#x987A;&#x5E8F;&#x4ECD;&#x7136;&#x4F9D;&#x8D56;&#x4E8E;&#x5176;&#x5B83;&#x56E0;&#x7D20;,&#x6BD4;&#x5982;operation&#x662F;&#x5426;&#x51C6;&#x5907;&#x597D;&#x548C;operation&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x7B49;.&#x56E0;&#x6B64;&#x4E32;&#x884C;&#x5316;&#x7684;operation queue&#x5E76;&#x4E0D;&#x7B49;&#x540C;&#x4E8E;GCD&#x4E2D;&#x7684;&#x4E32;&#x884C;dispatch queue.</p>
<p>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</p>
<pre class="lang:objc decode:true ">// &#x6BCF;&#x6B21;&#x53EA;&#x80FD;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;  
queue.maxConcurrentOperationCount = 1;  
// &#x6216;&#x8005;&#x8FD9;&#x6837;&#x5199;  
[queue setMaxConcurrentOperationCount:1];</pre>

<h4 id="&#x5168;&#x5C40;&#x961F;&#x5217;"><a href="#&#x5168;&#x5C40;&#x961F;&#x5217;" class="headerlink" title="&#x5168;&#x5C40;&#x961F;&#x5217;"></a>&#x5168;&#x5C40;&#x961F;&#x5217;</h4><p>&#x65B9;&#x4FBF;&#x64CD;&#x4F5C;&#x961F;&#x5217;,&#x540C;&#x4E00;&#x51A0;&#x4EE5;&#x6240;&#x6709;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;(&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x907F;&#x514D;&#x591A;&#x6B21;&#x521B;&#x5EFA;)</p>
<pre class="lang:objc decode:true">@property (nonatomic, strong) NSOperationQueue *queue;

- (NSOperationQueue *)queue {
    if (_queue == nil) {
        _queue = [[NSOperationQueue alloc] init];
    }
    return _queue;
}</pre>

<h4 id="&#x6682;&#x505C;&#x548C;&#x7EE7;&#x7EED;"><a href="#&#x6682;&#x505C;&#x548C;&#x7EE7;&#x7EED;" class="headerlink" title="&#x6682;&#x505C;&#x548C;&#x7EE7;&#x7EED;"></a><strong>&#x6682;&#x505C;&#x548C;&#x7EE7;&#x7EED;</strong></h4><p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4E34;&#x65F6;&#x6682;&#x505C;Operations&#x7684;&#x6267;&#x884C;,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;queue&#x7684;setSuspended:&#x65B9;&#x6CD5;&#x6682;&#x505C;queue.&#x4E0D;&#x8FC7;&#x6682;&#x505C;&#x4E00;&#x4E2A;queue&#x4E0D;&#x4F1A;&#x5BFC;&#x81F4;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;operation&#x5728;&#x4EFB;&#x52A1;&#x4E2D;&#x9014;&#x6682;&#x505C;,&#x53EA;&#x662F;&#x7B80;&#x5355;&#x5730;&#x963B;&#x6B62;&#x8C03;&#x5EA6;&#x65B0;Operation&#x6267;&#x884C;.&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x65F6;,&#x6682;&#x505C;&#x4E00;&#x4E2A;queue&#x6765;&#x6682;&#x505C;&#x7B49;&#x5F85;&#x4E2D;&#x7684;&#x4EFB;&#x52A1;.&#x7A0D;&#x540E;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;,&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x8C03;&#x7528;setSuspended:&#x65B9;&#x6CD5;&#x7EE7;&#x7EED;queue&#x4E2D;operation&#x7684;&#x6267;&#x884C;</p>
<blockquote>
<p>&#x6BD4;&#x5982;&#x7528;&#x6237;&#x6EDA;&#x52A8;cell,&#x7ACB;&#x9A6C;&#x6682;&#x505C;.&#x6EDA;&#x52A8;&#x505C;&#x6B62;,&#x7ACB;&#x9A6C;&#x6062;&#x590D;.</p>
<p><pre class="lang:objc decode:true ">// &#x6682;&#x505C;queue<br>[queue setSuspended:YES];  </pre></p>
</blockquote>
<p>// &#x7EE7;&#x7EED;queue<br>[queue setSuspended:NO];</p>
<h4 id="&#x6302;&#x8D77;&#x548C;&#x56DE;&#x590D;&#x961F;&#x5217;"><a href="#&#x6302;&#x8D77;&#x548C;&#x56DE;&#x590D;&#x961F;&#x5217;" class="headerlink" title="&#x6302;&#x8D77;&#x548C;&#x56DE;&#x590D;&#x961F;&#x5217;"></a>&#x6302;&#x8D77;&#x548C;&#x56DE;&#x590D;&#x961F;&#x5217;</h4><p>&#x8C03;&#x7528;NSOperationQueue&#x5BF9;&#x8C61;&#x7684;setSuspended: &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x6302;&#x8D77;.&#x6302;&#x8D77;&#x961F;&#x5217;&#x4E0D;&#x4F1A;&#x963B;&#x788D;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x6267;&#x884C;&#x4E2D;&#x7684;operation,&#x5B83;&#x53EA;&#x662F;&#x963B;&#x6B62;&#x65B0;&#x7684;operation&#x7684;&#x6267;&#x884C;.&#x4E3A;&#x4E86;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x8BF7;&#x6C42;,&#x4F60;&#x53EF;&#x4EE5;&#x5173;&#x8D77;&#x4EFB;&#x4F55;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x5904;&#x7406;&#x7684;&#x5DE5;&#x4F5C;,&#x56E0;&#x4E3A;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x4F1A;&#x6700;&#x7EC8;&#x91CD;&#x65B0;&#x6062;&#x590D;&#x961F;&#x5217;&#x6267;&#x884C;.</p>
<h3 id="&#x53D6;&#x6D88;Operations"><a href="#&#x53D6;&#x6D88;Operations" class="headerlink" title="&#x53D6;&#x6D88;Operations"></a><strong>&#x53D6;&#x6D88;Operations</strong></h3><p>&#x4E00;&#x65E6;&#x6DFB;&#x52A0;&#x5230;operation queue,queue&#x5C31;&#x62E5;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;Operation&#x5BF9;&#x8C61;&#x5E76;&#x4E14;&#x4E0D;&#x80FD;&#x88AB;&#x5220;&#x9664;,&#x552F;&#x4E00;&#x80FD;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x662F;&#x53D6;&#x6D88;.&#x4F60;&#x53EF;&#x4EE5;&#x8C03;&#x7528;Operation&#x5BF9;&#x8C61;&#x7684;cancel&#x65B9;&#x6CD5;&#x53D6;&#x6D88;&#x5355;&#x4E2A;&#x64CD;&#x4F5C;,&#x4E5F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;operation queue&#x7684;cancelAllOperations&#x65B9;&#x6CD5;&#x53D6;&#x6D88;&#x5F53;&#x524D;queue&#x4E2D;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;.</p>
<blockquote>
<p>&#x6BD4;&#x5982;&#x7C7B;&#x5B58;&#x8B66;&#x544A;&#x65F6;,&#x5C31;&#x53EF;&#x80FD;&#x4F1A;&#x7528;&#x5230;.</p>
</blockquote>
<h4 id="&#x793A;&#x4F8B;&#x4EE3;&#x7801;-1"><a href="#&#x793A;&#x4F8B;&#x4EE3;&#x7801;-1" class="headerlink" title="&#x793A;&#x4F8B;&#x4EE3;&#x7801;"></a>&#x793A;&#x4F8B;&#x4EE3;&#x7801;</h4><pre class="lang:objc decode:true ">// &#x53D6;&#x6D88;&#x5355;&#x4E2A;&#x64CD;&#x4F5C;  
[operation cancel];  

// &#x53D6;&#x6D88;queue&#x4E2D;&#x6240;&#x6709;&#x7684;&#x64CD;&#x4F5C;  
[queue cancelAllOperations];</pre>

<h3 id="&#x7B49;&#x5F85;Options&#x5B8C;&#x6210;"><a href="#&#x7B49;&#x5F85;Options&#x5B8C;&#x6210;" class="headerlink" title="&#x7B49;&#x5F85;Options&#x5B8C;&#x6210;"></a><strong>&#x7B49;&#x5F85;Options&#x5B8C;&#x6210;</strong></h3><p>&#x4E3A;&#x4E86;&#x6700;&#x4F73;&#x7684;&#x6027;&#x80FD;,&#x4F60;&#x5E94;&#x8BE5;&#x8BBE;&#x8BA1;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;,&#x8BA9;&#x5E94;&#x7528;&#x5728;Operation&#x6B63;&#x5728;&#x6267;&#x884C;&#x65F6;&#x53EF;&#x4EE5;&#x53BB;&#x5904;&#x7406;&#x5176;&#x5B83;&#x4E8B;&#x60C5;.<strong>&#x5982;&#x679C;&#x9700;&#x8981;&#x5728;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E2D;&#x5904;&#x7406;operation&#x5B8C;&#x6210;&#x540E;&#x7684;&#x7ED3;&#x679C;,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;NSOperation&#x7684;waitUntilFinished&#x65B9;&#x6CD5;&#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x7B49;&#x5F85;operation&#x5B8C;&#x6210;.</strong>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x907F;&#x514D;&#x7F16;&#x5199;&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;,&#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x53EF;&#x80FD;&#x662F;&#x4E00;&#x79CD;&#x7B80;&#x4FBF;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;,&#x4F46;&#x662F;&#x5B83;&#x5F15;&#x5165;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x4E32;&#x884C;&#x4EE3;&#x7801;,&#x9650;&#x5236;&#x4E86;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7684;&#x5E76;&#x53D1;&#x6027;,&#x540C;&#x65F6;&#x4E5F;&#x964D;&#x4F4E;&#x4E86;&#x7528;&#x6237;&#x4F53;&#x9A8C;.<strong>&#x7EDD;&#x5BF9;&#x4E0D;&#x8981;&#x5728;&#x5E94;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x7B49;&#x5F85;&#x4E00;&#x4E2A;Operation,&#x53EA;&#x80FD;&#x5728;&#x7B2C;&#x4E8C;&#x6216;&#x6B21;&#x8981;&#x7EBF;&#x7A0B;&#x4E2D;&#x7B49;&#x5F85;.&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#x5C06;&#x5BFC;&#x81F4;&#x5E94;&#x7528;&#x65E0;&#x6CD5;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x4E8B;&#x4EF6;,&#x5E94;&#x7528;&#x4E5F;&#x5C06;&#x8868;&#x73B0;&#x4E3A;&#x65E0;&#x54CD;&#x5E94;&#x3002;</strong></p>
<p><pre class="lang:objc decode:true ">// &#x4F1A;&#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x7B49;&#x5230;&#x67D0;&#x4E2A;operation&#x6267;&#x884C;&#x5B8C;&#x6BD5;<br>[operation waitUntilFinished];</pre><br>&#x9664;&#x4E86;&#x7B49;&#x5F85;&#x5355;&#x4E2A;Operation&#x5B8C;&#x6210;,&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x7B49;&#x5F85;&#x4E00;&#x4E2A;queue&#x4E2D;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;,&#x4F7F;&#x7528;NSOperationQueue&#x7684;waitUntilAllOperationsAreFinished&#x65B9;&#x6CD5;.&#x6CE8;&#x610F;:&#x5728;&#x7B49;&#x5F85;&#x4E00;&#x4E2A; queue&#x65F6;,&#x5E94;&#x7528;&#x7684;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5F80;queue&#x4E2D;&#x6DFB;&#x52A0;Operation,&#x56E0;&#x6B64;&#x53EF;&#x80FD;&#x4F1A;&#x52A0;&#x957F;&#x7EBF;&#x7A0B;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x95F4;.</p>
<p><pre class="lang:objc decode:true ">// &#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x7B49;&#x5F85;queue&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x6267;&#x884C;&#x5B8C;&#x6BD5;<br>[queue waitUntilAllOperationsAreFinished];</pre></p>
<blockquote>
<p><span style="color: #ff0000;"><strong>&#x63D0;&#x793A;:&#x6C38;&#x8FDC;&#x4E0D;&#x80FD;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0A;&#x7B49;&#x5F85;&#x4E00;&#x4E2A;operation&#x7ED3;&#x675F;&#x3002;</strong></span></p>
</blockquote>
<h3 id="&#x5F00;&#x53D1;&#x5EFA;&#x8BAE;"><a href="#&#x5F00;&#x53D1;&#x5EFA;&#x8BAE;" class="headerlink" title="&#x5F00;&#x53D1;&#x5EFA;&#x8BAE;"></a>&#x5F00;&#x53D1;&#x5EFA;&#x8BAE;</h3><p>&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x5411;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x4E2D;&#x6DFB;&#x52A0;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;operation&#x5BF9;&#x8C61;,&#x4F46;&#x8FD9;&#x4E48;&#x505A;&#x5176;&#x5B9E;&#x662F;&#x4E0D;&#x73B0;&#x5B9E;&#x7684;.&#x5982;&#x5176;&#x5B83;&#x5BF9;&#x8C61;&#x4E00;&#x6837;,NSoperation&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x4E5F;&#x662F;&#x8981;&#x6D88;&#x8017;&#x5185;&#x5B58;,&#x5E76;&#x6267;&#x884C;&#x4E5F;&#x4F1A;&#x8017;&#x65F6;.&#x521B;&#x5EFA;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x7684;&#x5B8C;&#x6210;&#x5C0F;&#x529F;&#x80FD;&#x7684;operation&#x5BF9;&#x8C61;,&#x56E0;&#x8FC7;&#x5EA6;&#x6D3E;&#x53D1;&#x548C;&#x6267;&#x884C;,&#x4F1A;&#x5BFC;&#x81F4;&#x8D85;&#x51FA;&#x4EFB;&#x52A1;&#x672C;&#x8EAB;&#x6240;&#x9700;&#x6D88;&#x8017;&#x7684;&#x4E0D;&#x826F;&#x7ED3;&#x679C;.&#x5982;&#x679C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x7684;&#x5185;&#x5B58;&#x7528;&#x91CF;&#x5DF2;&#x5F88;&#x7D27;&#x4FCF;,&#x90A3;&#x4E48;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x6210;&#x5343;&#x4E0A;&#x4E07;&#x7684;operation&#x5BF9;&#x8C61;&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x964D;&#x4F4E;&#x4F60;&#x5E94;&#x7528;&#x7684;&#x6027;&#x80FD;.</p>
<p>&#x4F7F;&#x7528;operation&#x5BF9;&#x8C61;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;,&#x5728;&#x4EFB;&#x52A1;&#x5DE5;&#x4F5C;&#x91CF;&#x4E0E;&#x4FDD;&#x8BC1;&#x8BA1;&#x7B97;&#x673A;&#x65F6;&#x523B;&#x5904;&#x4E8E;&#x7E41;&#x5FD9;&#x72B6;&#x6001;&#x4E4B;&#x95F4;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x5408;&#x7406;&#x7684;&#x5E73;&#x8861;&#x70B9;.&#x5C1D;&#x8BD5;&#x786E;&#x4FDD;operation&#x5BF9;&#x8C61;&#x6240;&#x5B8C;&#x6210;&#x5DE5;&#x4F5C;&#x7684;&#x5408;&#x7406;&#x6027;.&#x4F8B;&#x5982;,&#x540C;&#x65F6;&#x521B;&#x5EFA;100&#x4E2A;&#x5B8C;&#x6210;&#x540C;&#x6837;&#x5DE5;&#x4F5C;&#x7684;operation&#x5BF9;&#x8C61;,&#x5219;&#x4E0D;&#x5982;&#x5206;10&#x6B21;,&#x6BCF;&#x6B21;&#x540C;&#x65F6;&#x521B;&#x5EFA;10&#x4E2A;&#x8BE5;operation&#x5BF9;&#x8C61;.</p>
<p>&#x907F;&#x514D;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x4E2D;&#x4E00;&#x6B21;&#x6DFB;&#x52A0;&#x5927;&#x91CF;&#x7684;operation&#x5BF9;&#x8C61;,&#x907F;&#x514D;&#x6DFB;&#x52A0;operation&#x7684;&#x901F;&#x5EA6;&#x8D85;&#x8FC7;operation&#x672C;&#x8EAB;&#x7684;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x7684;&#x60C5;&#x51B5;.&#x4E00;&#x80A1;&#x8111;&#x7684;&#x5C06;&#x6240;&#x6709;operation&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x5230;&#x64CD;&#x4F5C;&#x961F;&#x5217;,&#x5219;&#x4E0D;&#x5982;&#x6309;&#x6279;&#x6B21;&#x6DFB;&#x52A0;.&#x5F53;&#x4E00;&#x4E2A;&#x6279;&#x6B21;&#x5B8C;&#x6210;&#x4E4B;&#x540E;,&#x5229;&#x7528;completion block&#x6765;&#x544A;&#x8BC9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x521B;&#x5EFA;&#x4E0B;&#x4E00;&#x6279;&#x6B21;.&#x6709;&#x5927;&#x91CF;&#x4EFB;&#x52A1;&#x8981;&#x5904;&#x7406;&#x65F6;,&#x5C3D;&#x91CF;&#x585E;&#x6EE1;&#x64CD;&#x4F5C;&#x961F;&#x5217;&#x4F1A;&#x4FDD;&#x8BC1;&#x673A;&#x5668;&#x91CD;&#x590D;&#x8FD0;&#x8F6C;,&#x4F46;&#x5927;&#x91CF;&#x7684;operation&#x5BF9;&#x8C61;&#x4F1A;&#x9A6C;&#x4E0A;&#x8017;&#x5149;&#x4F60;&#x5F97;&#x5185;&#x5B58;.</p>
<p>&#x603B;&#x800C;&#x8A00;&#x4E4B;,&#x5728;&#x4F7F;&#x7528;operation&#x65F6;,&#x5C3D;&#x91CF;&#x5728;&#x6548;&#x7387;&#x548C;&#x65F6;&#x95F4;&#x4E4B;&#x95F4;&#x627E;&#x5230;&#x5E73;&#x8861;&#x70B9;.</p>
<h2 id="NSOperation-VS-GCD"><a href="#NSOperation-VS-GCD" class="headerlink" title="NSOperation.VS.GCD"></a>NSOperation.VS.GCD</h2><blockquote>
<ol>
<li>NSOperation&#x62E5;&#x6709;&#x66F4;&#x591A;&#x7684;&#x51FD;&#x6570;&#x53EF;&#x7528;&#xFF0C;&#x5177;&#x4F53;&#x67E5;&#x770B;api&#x3002;NSOperationQueue &#x662F;&#x5728;GCD&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;GCD&#x66F4;&#x9AD8;&#x4E00;&#x5C42;&#x7684;&#x62BD;&#x8C61;&#x3002;</li>
<li>&#x5728;NSOperationQueue&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x5404;&#x4E2A;NSOperation&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;</li>
<li>NSOperationQueue&#x652F;&#x6301;KVO&#x3002;&#x53EF;&#x4EE5;&#x76D1;&#x6D4B;operation&#x662F;&#x5426;&#x6B63;&#x5728;&#x6267;&#x884C;&#xFF08;isExecuted&#xFF09;&#x3001;&#x662F;&#x5426;&#x7ED3;&#x675F;&#xFF08;isFinished&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x53D6;&#x6D88;&#xFF08;isCanceld&#xFF09;</li>
<li>GCD &#x53EA;&#x652F;&#x6301;FIFO &#x7684;&#x961F;&#x5217;&#xFF0C;&#x800C;NSOperationQueue&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x961F;&#x5217;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF08;&#x901A;&#x8FC7;&#x8C03;&#x6574;&#x6743;&#x91CD;&#xFF09;&#x3002;NSOperationQueue&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7684;&#x7BA1;&#x7406;&#x5E76;&#x53D1;&#x3001;NSOperation&#x4E4B;&#x95F4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;</li>
<li>&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5BF9;NSOperation&#x8FDB;&#x884C;&#x7EE7;&#x627F;&#xFF0C;&#x5728;&#x8FD9;&#x4E4B;&#x4E0A;&#x6DFB;&#x52A0;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E0E;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF0C;&#x63D0;&#x9AD8;&#x6574;&#x4E2A;&#x4EE3;&#x7801;&#x7684;&#x590D;&#x7528;&#x5EA6;&#xFF0C;&#x8FD9;&#x6BD4;&#x7B80;&#x5355;&#x5730;&#x5C06;block&#x4EFB;&#x52A1;&#x6392;&#x5165;&#x6267;&#x884C;&#x961F;&#x5217;&#x66F4;&#x6709;&#x81EA;&#x7531;&#x5EA6;&#xFF0C;&#x80FD;&#x591F;&#x5728;&#x5176;&#x4E4B;&#x4E0A;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x81EA;&#x5B9A;&#x5236;&#x7684;&#x529F;&#x80FD;&#x3002;<br>&#x4F7F;&#x7528;NSOperation&#x7684;&#x60C5;&#x51B5;:&#x5404;&#x4E2A;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3001;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x53D6;&#x6D88;&#x6682;&#x505C;&#x3001;&#x5E76;&#x53D1;&#x7BA1;&#x7406;&#x3001;&#x63A7;&#x5236;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x9650;&#x5236;&#x540C;&#x65F6;&#x80FD;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;.&#x8BA9;&#x7EBF;&#x7A0B;&#x5728;&#x67D0;&#x65F6;&#x523B;&#x505C;&#x6B62;/&#x7EE7;&#x7EED;&#x7B49;&#x3002;</li>
</ol>
</blockquote>
<p>&#x4F7F;&#x7528;GCD&#x7684;&#x60C5;&#x51B5;:&#x4E00;&#x822C;&#x7684;&#x9700;&#x6C42;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x64CD;&#x4F5C;,&#x7528;GCD&#x90FD;&#x53EF;&#x4EE5;&#x4E86;,&#x7B80;&#x5355;&#x9AD8;&#x6548;.</p>
<blockquote>
<p>&#x4ECE;&#x7F16;&#x7A0B;&#x539F;&#x5219;&#x6765;&#x8BF4;&#xFF0C;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528;&#x9AD8;&#x7B49;&#x7EA7;,&#x5C01;&#x88C5;&#x5B8C;&#x7F8E;&#x7684;API,&#x5728;&#x5FC5;&#x987B;&#x65F6;&#x624D;&#x4F7F;&#x7528;&#x5E95;&#x5C42;API.&#x5F53;&#x9700;&#x6C42;&#x7B80;&#x5355;,&#x7B80;&#x6D01;&#x7684;GCD&#x6216;&#x8BB8;&#x662F;&#x4E2A;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;,&#x800C;Operation queue &#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x80FD;&#x66F4;&#x591A;&#x7684;&#x9009;&#x62E9;.</p>
</blockquote>
<h2 id="RunLoop"><a href="#RunLoop" class="headerlink" title="RunLoop"></a>RunLoop</h2><p>&#x5728;cocoa&#x4E2D;&#x8BB2;&#x5230;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x8BB2;&#x5230;RunLoop&#x3002; &#x5728;ios/mac&#x7684;&#x7F16;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F3C;&#x4E4E;&#x4E0D;&#x9700;&#x8981;&#x8FC7;&#x591A;&#x5173;&#x5FC3;&#x4EE3;&#x7801;&#x662F;&#x5982;&#x4F55;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x4E00;&#x5207;&#x4EFF;&#x4F5B;&#x90A3;&#x4E48;&#x81EA;&#x7136;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5F53;&#x6ED1;&#x52A8;&#x624B;&#x52BF;&#x65F6;&#xFF0C;tableView&#x5C31;&#x4F1A;&#x6EDA;&#x52A8;&#xFF0C;&#x542F;&#x52A8;&#x4E00;&#x4E2A;NSTimer&#x4E4B;&#x540E;&#xFF0C;timer&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#xFF0C; &#x4F46;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF0C;&#x5176;&#x5B9E;&#x662F;RunLoop&#x5728;&#x5E2E;&#x6211;&#x4EEC;&#x505A;&#x8FD9;&#x4E9B;&#x4E8B;&#x60C5;&#xFF1A;&#x5206;&#x53D1;&#x6D88;&#x606F;&#x3002;</p>
<h3 id="&#x4EC0;&#x4E48;&#x662F;RunLoop"><a href="#&#x4EC0;&#x4E48;&#x662F;RunLoop" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;RunLoop"></a>&#x4EC0;&#x4E48;&#x662F;RunLoop</h3><p>&#x4F60;&#x5E94;&#x8BE5;&#x770B;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x4F2A;&#x4EE3;&#x7801;&#x89E3;&#x91CA;ios&#x7684;app&#x4E2D;main&#x51FD;&#x6570;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#xFF1A;</p>
<p><figure class="code"><figcaption></figcaption></figure></p>
<p><div class="highlight"></div></p>
<p><pre class="lang:objc decode:true">int main(int argc, char * argv[])<br>{<br>    while (true) {<br>      [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];<br>    }<br>}</pre><br><br>&#x4E5F;&#x5E94;&#x8BE5;&#x770B;&#x8FC7;&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;&#x7528;&#x6765;&#x963B;&#x585E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF1A;</p>
<p><figure class="code"><figcaption></figcaption></figure></p>
<p><div class="highlight"></div></p>
<p><pre class="lang:objc decode:true">while (!complete) {<br>    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];<br>}</pre><br><br>&#x6216;&#x8BB8;&#x4F60;&#x611F;&#x89C9;&#x5230;&#x4ED6;&#x4EEC;&#x6709;&#x4E9B;&#x795E;&#x5947;&#xFF0C;&#x5E0C;&#x671B;&#x6211;&#x7684;&#x89E3;&#x91CA;&#x80FD;&#x8BA9;&#x4F60;&#x660E;&#x767D;&#x4E00;&#x4E9B;.</p>
<p>&#x6211;&#x4EEC;&#x5148;&#x601D;&#x8003;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A; &#x5F53;&#x6211;&#x4EEC;&#x6253;&#x5F00;&#x4E00;&#x4E2A;IOS&#x5E94;&#x7528;&#x4E4B;&#x540E;&#xFF0C;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x505A;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x770B;&#x8D77;&#x6765;&#x662F;&#x6CA1;&#x6709;&#x4EE3;&#x7801;&#x5728;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x5E94;&#x7528;&#x6CA1;&#x6709;&#x9000;&#x51FA;&#x5462;&#xFF1F;</p>
<p>&#x6211;&#x4EEC;&#x5728;&#x5199;c&#x7684;&#x7B80;&#x5355;&#x7684;&#x53EA;&#x6709;&#x4E00;&#x4E2A;main&#x51FD;&#x6570;&#x7684;&#x7A0B;&#x5E8F;&#x65F6;&#x5C31;&#x77E5;&#x9053;&#xFF0C;&#x5F53;main&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;&#xFF0C;&#x6CA1;&#x6709;&#x4E8B;&#x60C5;&#x53EF;&#x505A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7A0B;&#x5E8F;&#x5C31;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x9000;&#x51FA;&#x4E86;&#x3002;&#x800C;&#x6211;&#x4EEC;IOS&#x7684;&#x5E94;&#x7528;&#x662F;&#x5982;&#x4F55;&#x505A;&#x5230;&#x5728;&#x6CA1;&#x6709;&#x4E8B;&#x60C5;&#x505A;&#x7684;&#x65F6;&#x5019;&#x7EF4;&#x6301;&#x5E94;&#x7528;&#x7684;&#x8FD0;&#x884C;&#x7684;&#x5462;? &#x90A3;&#x5C31;&#x662F;RunLoop&#x3002;</p>
<p>RunLoop&#x7684;&#x5B57;&#x9762;&#x610F;&#x601D;&#x5C31;&#x662F;&#x201C;&#x8FD0;&#x884C;&#x56DE;&#x8DEF;&#x201D;&#xFF0C;&#x542C;&#x8D77;&#x6765;&#x50CF;&#x662F;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x3002;&#x5B9E;&#x9645;&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#xFF0C;&#x5B83;&#x5728;&#x5FAA;&#x73AF;&#x76D1;&#x542C;&#x7740;&#x4E8B;&#x4EF6;&#x6E90;&#xFF0C;&#x628A;&#x6D88;&#x606F;&#x5206;&#x53D1;&#x7ED9;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#x3002;RunLoop&#x5E76;&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x5E76;&#x53D1;&#x673A;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x5728;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x81F3;&#x5173;&#x91CD;&#x8981;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x7684;&#x673A;&#x5236;&#x3002;</p>
<h3 id="&#x4E8B;&#x4EF6;&#x6E90;"><a href="#&#x4E8B;&#x4EF6;&#x6E90;" class="headerlink" title="&#x4E8B;&#x4EF6;&#x6E90;"></a>&#x4E8B;&#x4EF6;&#x6E90;</h3><p><img src="http://blog.cnbluebox.com/images/NSRunLoop.gif" alt="runloop"></p>
<p>&#x7531;&#x56FE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;NSRunLoop&#x53EA;&#x5904;&#x7406;&#x4E24;&#x79CD;&#x6E90;&#xFF1A;&#x8F93;&#x5165;&#x6E90;&#x3001;&#x65F6;&#x95F4;&#x6E90;&#x3002;&#x800C;&#x8F93;&#x5165;&#x6E90;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#xFF1A;NSPort&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x6E90;&#x3001;performSelector:OnThread:delay:, &#x4E0B;&#x9762;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E0B;&#x8FD9;&#x51E0;&#x79CD;&#x6E90;&#xFF1A;</p>
<h4 id="NSPort-&#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;"><a href="#NSPort-&#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;" class="headerlink" title="NSPort &#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;"></a>NSPort &#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;</h4><p>Cocoa&#x548C; Core Foundation &#x4E3A;&#x4F7F;&#x7528;&#x7AEF;&#x53E3;&#x76F8;&#x5173;&#x7684;&#x5BF9;&#x8C61;&#x548C;&#x51FD;&#x6570;&#x521B;&#x5EFA;&#x7684;&#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;&#x63D0;&#x4F9B;&#x4E86;&#x5185;&#x5728;&#x652F;&#x6301;&#x3002;Cocoa&#x4E2D;&#x4F60;&#x4ECE;&#x4E0D;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x521B;&#x5EFA;&#x8F93;&#x5165;&#x6E90;&#x3002;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x521B;&#x5EFA;&#x7AEF;&#x53E3;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;NSPort&#x7684;&#x65B9;&#x6CD5;&#x5C06;&#x7AEF;&#x53E3;&#x5BF9;&#x8C61;&#x52A0;&#x5165;&#x5230;run loop&#x3002;&#x7AEF;&#x53E3;&#x5BF9;&#x8C61;&#x4F1A;&#x5904;&#x7406;&#x521B;&#x5EFA;&#x4EE5;&#x53CA;&#x914D;&#x7F6E;&#x8F93;&#x5165;&#x6E90;&#x3002;</p>
<p>NSPort&#x4E00;&#x822C;&#x5206;&#x4E09;&#x79CD;&#xFF1A; NSMessagePort&#xFF08;&#x57FA;&#x672C;&#x5E9F;&#x5F03;&#xFF09;&#x3001;NSMachPort&#x3001; NSSocketPort&#x3002; &#x7CFB;&#x7EDF;&#x4E2D;&#x7684;NSURLConnection&#x5C31;&#x662F;&#x57FA;&#x4E8E;NSSocketPort&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x5728;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;NSURLConnection &#x65F6;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x542F;&#x52A8;RunLoop, &#x56E0;&#x4E3A;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;RunLoop&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x540E;&#x9762;&#x4F1A;&#x8BB2;&#x5230;&#x3002;</p>
<h4 id="&#x81EA;&#x5B9A;&#x4E49;&#x8F93;&#x5165;&#x6E90;"><a href="#&#x81EA;&#x5B9A;&#x4E49;&#x8F93;&#x5165;&#x6E90;" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;&#x8F93;&#x5165;&#x6E90;"></a>&#x81EA;&#x5B9A;&#x4E49;&#x8F93;&#x5165;&#x6E90;</h4><p>&#x5728;Core Foundation&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x5FC5;&#x987B;&#x4F7F;&#x7528;CFRunLoopSourceRef&#x7C7B;&#x578B;&#x76F8;&#x5173;&#x7684;&#x51FD;&#x6570;&#x6765;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x8F93;&#x5165;&#x6E90;&#xFF0C;&#x63A5;&#x7740;&#x4F7F;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6765;&#x914D;&#x7F6E;&#x8F93;&#x5165;&#x6E90;&#x3002;Core Fundation&#x4F1A;&#x5728;&#x6070;&#x5F53;&#x7684;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5904;&#x7406;&#x8F93;&#x5165;&#x4E8B;&#x4EF6;&#x4EE5;&#x53CA;&#x6E05;&#x7406;&#x6E90;&#x3002;&#x5E38;&#x89C1;&#x7684;&#x89E6;&#x6478;&#x3001;&#x6EDA;&#x52A8;&#x4E8B;&#x4EF6;&#x7B49;&#x5C31;&#x662F;&#x8BE5;&#x7C7B;&#x6E90;&#xFF0C;&#x7531;&#x7CFB;&#x7EDF;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;&#x8BE5;&#x79CD;&#x6E90;&#xFF0C;&#x7B2C;&#x4E09;&#x79CD;&#x60C5;&#x51B5;&#x5DF2;&#x7ECF;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;</p>
<h4 id="performSelector-OnThread"><a href="#performSelector-OnThread" class="headerlink" title="performSelector:OnThread"></a>performSelector:OnThread</h4><p>Cocoa&#x63D0;&#x4F9B;&#x4E86;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4E00;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x51FD;&#x6570;&#xFF08;perform selector&#xFF09;&#x7684;&#x8F93;&#x5165;&#x6E90;&#x3002;&#x548C;&#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;&#x4E00;&#x6837;&#xFF0C;perform selector&#x8BF7;&#x6C42;&#x4F1A;&#x5728;&#x76EE;&#x6807;&#x7EBF;&#x7A0B;&#x4E0A;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x51CF;&#x7F13;&#x8BB8;&#x591A;&#x5728;&#x5355;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E0A;&#x5BB9;&#x6613;&#x5F15;&#x8D77;&#x7684;&#x540C;&#x6B65;&#x95EE;&#x9898;&#x3002;&#x800C;&#x548C;&#x57FA;&#x4E8E;&#x7AEF;&#x53E3;&#x7684;&#x6E90;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;perform selector&#x6267;&#x884C;&#x5B8C;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x9664;&#x51FA;run loop&#x3002;</p>
<p>&#x6B64;&#x65B9;&#x6CD5;&#x7B80;&#x5355;&#x5B9E;&#x7528;&#xFF0C;&#x4F7F;&#x7528;&#x4E5F;&#x66F4;&#x5E7F;&#x6CDB;&#x3002;</p>
<h4 id="&#x5B9A;&#x65F6;&#x6E90;"><a href="#&#x5B9A;&#x65F6;&#x6E90;" class="headerlink" title="&#x5B9A;&#x65F6;&#x6E90;"></a>&#x5B9A;&#x65F6;&#x6E90;</h4><p>&#x5B9A;&#x65F6;&#x6E90;&#x5C31;&#x662F;NSTimer&#x4E86;&#xFF0C;&#x5B9A;&#x65F6;&#x6E90;&#x5728;&#x9884;&#x8BBE;&#x7684;&#x65F6;&#x95F4;&#x70B9;&#x540C;&#x6B65;&#x5730;&#x4F20;&#x9012;&#x6D88;&#x606F;&#x3002;&#x56E0;&#x4E3A;Timer&#x662F;&#x57FA;&#x4E8E;RunLoop&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x51B3;&#x5B9A;&#x4E86;&#x5B83;&#x4E0D;&#x662F;&#x5B9E;&#x65F6;&#x7684;&#x3002;</p>
<h3 id="RunLoop&#x89C2;&#x5BDF;&#x8005;"><a href="#RunLoop&#x89C2;&#x5BDF;&#x8005;" class="headerlink" title="RunLoop&#x89C2;&#x5BDF;&#x8005;"></a>RunLoop&#x89C2;&#x5BDF;&#x8005;</h3><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x521B;&#x5EFA;CFRunLoopObserverRef&#x5BF9;&#x8C61;&#x6765;&#x68C0;&#x6D4B;RunLoop&#x7684;&#x5DE5;&#x4F5C;&#x72B6;&#x6001;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x68C0;&#x6D4B;RunLoop&#x7684;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x4E8B;&#x4EF6;&#xFF1A;</p>
<ul>
<li>Run loop&#x5165;&#x53E3;</li>
<li>Run loop&#x5C06;&#x8981;&#x5F00;&#x59CB;&#x5B9A;&#x65F6;</li>
<li>Run loop&#x5C06;&#x8981;&#x5904;&#x7406;&#x8F93;&#x5165;&#x6E90;</li>
<li>Run loop&#x5C06;&#x8981;&#x4F11;&#x7720;</li>
<li>Run loop&#x88AB;&#x5524;&#x9192;&#x4F46;&#x53C8;&#x5728;&#x6267;&#x884C;&#x5524;&#x9192;&#x4E8B;&#x4EF6;&#x524D;</li>
<li>Run loop&#x7EC8;&#x6B62;</li>
</ul>
<h3 id="Run-Loop-Modes"><a href="#Run-Loop-Modes" class="headerlink" title="Run Loop Modes"></a>Run Loop Modes</h3><p>RunLoop&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x56DB;&#x79CD;&#x4E8B;&#x4EF6;&#x6E90;&#x7684;&#x76D1;&#x89C6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x6A21;&#x5F0F;&#x6765;&#x51B3;&#x5B9A;&#x76D1;&#x89C6;&#x54EA;&#x4E9B;&#x6E90;&#x3002; RunLoop&#x53EA;&#x4F1A;&#x5904;&#x7406;&#x4E0E;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x76F8;&#x5173;&#x8054;&#x7684;&#x6E90;&#xFF0C;&#x672A;&#x4E0E;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x5173;&#x8054;&#x7684;&#x6E90;&#x5219;&#x5904;&#x4E8E;&#x6682;&#x505C;&#x72B6;&#x6001;&#x3002;</p>
<p>cocoa&#x548C;Core Foundation&#x9884;&#x5148;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E9B;&#x6A21;&#x5F0F;&#xFF08;Apple&#x6587;&#x6863;&#x7FFB;&#x8BD1;&#xFF09;&#xFF1A;</p>
<p><table class="table_plain"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><th>Mode</th></p>
<p><th>Name</th></p>
<p><th>Description</th><br></p>
<p><tr></tr></p>
<p><td>Default</td></p>
<p><td>NSDefaultRunLoopMode (Cocoa) kCFRunLoopDefaultMode (Core Foundation)</td></p>
<p><td>&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x5305;&#x542B;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;&#x6B64;&#x6A21;&#x5F0F;</td><br></p>
<p><tr></tr></p>
<p><td>Connection</td></p>
<p><td>NSConnectionReplyMode (Cocoa)</td></p>
<p><td>&#x6B64;&#x6A21;&#x5F0F;&#x7528;&#x4E8E;&#x5904;&#x7406;NSConnection&#x7684;&#x56DE;&#x8C03;&#x4E8B;&#x4EF6;</td><br></p>
<p><tr></tr></p>
<p><td>Modal</td></p>
<p><td>NSModalPanelRunLoopMode (Cocoa)</td></p>
<p><td>&#x6A21;&#x6001;&#x6A21;&#x5F0F;&#xFF0C;&#x6B64;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;RunLoop&#x53EA;&#x5BF9;&#x5904;&#x7406;&#x6A21;&#x6001;&#x76F8;&#x5173;&#x4E8B;&#x4EF6;</td><br></p>
<p><tr></tr></p>
<p><td>Event Tracking</td></p>
<p><td>NSEventTrackingRunLoopMode (Cocoa)</td></p>
<p><td>&#x6B64;&#x6A21;&#x5F0F;&#x4E0B;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x7A97;&#x53E3;&#x4E8B;&#x4EF6;,&#x9F20;&#x6807;&#x4E8B;&#x4EF6;&#x7B49;</td><br></p>
<p><tr></tr></p>
<p><td>Common Modes</td></p>
<p><td>NSRunLoopCommonModes (Cocoa) kCFRunLoopCommonModes (Core Foundation)</td></p>
<p><td>&#x6B64;&#x6A21;&#x5F0F;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x201D;&#x7EC4;&#x6A21;&#x5F0F;&#x201D;&#xFF0C;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x6E90;&#x4E0E;&#x6B64;&#x6A21;&#x5F0F;&#x5173;&#x8054;&#xFF0C;&#x5219;&#x8F93;&#x5165;&#x6E90;&#x4E0E;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6A21;&#x5F0F;&#x76F8;&#x5173;&#x8054;&#x3002;</td><br><br><br><br>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;ASIHttpRequest&#x5728;&#x540C;&#x6B65;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x4E86; runLoop &#x7684;&#x6A21;&#x5F0F;&#x53EB;ASIHTTPRequestRunLoopMode&#x3002;ASI&#x7684;Timer&#x6E90;&#x5C31;&#x5173;&#x8054;&#x4E86;&#x6B64;&#x6A21;&#x5F0F;&#x3002;</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/concurrent/" rel="tag">#concurrent</a>
          
            <a href="/tags/Deadlock/" rel="tag">#Deadlock</a>
          
            <a href="/tags/dispatch-queue/" rel="tag">#dispatch queue</a>
          
            <a href="/tags/dispatch-after/" rel="tag">#dispatch_after</a>
          
            <a href="/tags/GCD/" rel="tag">#GCD</a>
          
            <a href="/tags/Global-dispatch-queue/" rel="tag">#Global dispatch queue</a>
          
            <a href="/tags/NSOperation/" rel="tag">#NSOperation</a>
          
            <a href="/tags/NSThread/" rel="tag">#NSThread</a>
          
            <a href="/tags/serial/" rel="tag">#serial</a>
          
            <a href="/tags/临界区/" rel="tag">#临界区</a>
          
            <a href="/tags/多线程/" rel="tag">#多线程</a>
          
            <a href="/tags/死锁/" rel="tag">#死锁</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/07/29/ios-uiresponder-of-gestures-gesture-recognition-shake-apple-fm/" rel="next" title="ios的手势操作之UIResponder、手势识别、摇晃事件、耳机线控">
                <i class="fa fa-chevron-left"></i> ios的手势操作之UIResponder、手势识别、摇晃事件、耳机线控
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/08/01/common-error-summary/" rel="prev" title="常见错误汇总">
                常见错误汇总 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="BirdMichael" />
          <p class="site-author-name" itemprop="name">BirdMichael</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">57</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">85</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多线程"><span class="nav-number">2.</span> <span class="nav-text">多线程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#介绍"><span class="nav-number">2.1.</span> <span class="nav-text">介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#进程"><span class="nav-number">2.1.1.</span> <span class="nav-text">进程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程"><span class="nav-number">2.1.2.</span> <span class="nav-text">线程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程的串行"><span class="nav-number">2.1.3.</span> <span class="nav-text">线程的串行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多线程的并行"><span class="nav-number">2.1.4.</span> <span class="nav-text">多线程的并行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多任务系统调度"><span class="nav-number">2.1.5.</span> <span class="nav-text">多任务系统调度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#windows多任务"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">windows多任务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多线程的优缺点"><span class="nav-number">2.2.</span> <span class="nav-text">多线程的优缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#多线程的优点"><span class="nav-number">2.2.1.</span> <span class="nav-text">多线程的优点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多线程的缺点"><span class="nav-number">2.2.2.</span> <span class="nav-text">多线程的缺点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ios中的多线程"><span class="nav-number">2.3.</span> <span class="nav-text">ios中的多线程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NSThread"><span class="nav-number">2.3.1.</span> <span class="nav-text">NSThread</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NSOperation"><span class="nav-number">2.3.2.</span> <span class="nav-text">NSOperation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GCD"><span class="nav-number">2.3.3.</span> <span class="nav-text">GCD</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GCD-1"><span class="nav-number">3.</span> <span class="nav-text">GCD</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#介绍-1"><span class="nav-number">3.1.</span> <span class="nav-text">介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GCD是什么"><span class="nav-number">3.1.1.</span> <span class="nav-text">GCD是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#设计"><span class="nav-number">3.1.2.</span> <span class="nav-text">设计</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#术语"><span class="nav-number">3.2.</span> <span class="nav-text">术语</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dispath-queue-调度队列"><span class="nav-number">3.2.1.</span> <span class="nav-text">dispath queue**(调度队列)**</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Serial-串行队列"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">Serial(串行队列)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Concurrent-并行队列"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">Concurrent(并行队列)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Global-dispatch-queue-全局队列"><span class="nav-number">3.2.1.3.</span> <span class="nav-text">Global dispatch queue(全局队列)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Main-dispatch-queue-主队列"><span class="nav-number">3.2.1.4.</span> <span class="nav-text">Main dispatch queue(主队列)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Queue-Types-队列类型"><span class="nav-number">3.2.2.</span> <span class="nav-text">Queue Types (队列类型)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作-任务"><span class="nav-number">3.2.3.</span> <span class="nav-text">操作(任务)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#同步"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">同步</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#异步"><span class="nav-number">3.2.3.2.</span> <span class="nav-text">异步</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#函数指针调度任务"><span class="nav-number">3.2.3.3.</span> <span class="nav-text">函数指针调度任务</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Deadlock-死锁"><span class="nav-number">3.2.4.</span> <span class="nav-text">Deadlock 死锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Concurrency-vs-Parallelism-并发与并行"><span class="nav-number">3.2.5.</span> <span class="nav-text">Concurrency vs Parallelism 并发与并行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建和管理dispatch-queue-队列"><span class="nav-number">3.3.</span> <span class="nav-text">创建和管理dispatch queue(队列)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建串行Dispatch-Queue"><span class="nav-number">3.3.1.</span> <span class="nav-text">创建串行Dispatch Queue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建并行Dispatch-Queue"><span class="nav-number">3.3.2.</span> <span class="nav-text">创建并行Dispatch Queue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dispatch-sync-同步调用"><span class="nav-number">3.3.3.</span> <span class="nav-text">dispatch_sync(同步调用)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不同操作及队列线程研究测试"><span class="nav-number">3.4.</span> <span class="nav-text">不同操作及队列线程研究测试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#主线程"><span class="nav-number">3.4.1.</span> <span class="nav-text">主线程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#串行队列同步调用"><span class="nav-number">3.4.2.</span> <span class="nav-text">串行队列同步调用</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#示例程序-主线程"><span class="nav-number">3.4.2.0.1.</span> <span class="nav-text">示例程序(主线程):</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#示例程序-子线程"><span class="nav-number">3.4.2.0.2.</span> <span class="nav-text">示例程序(子线程):</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#performSelector"><span class="nav-number">3.4.2.1.</span> <span class="nav-text">performSelector</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#调度-队列-组"><span class="nav-number">3.4.3.</span> <span class="nav-text">调度(队列)组</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#手动管理运行状态（或计数）"><span class="nav-number">3.4.3.1.</span> <span class="nav-text">手动管理运行状态（或计数）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法"><span class="nav-number">3.4.3.2.</span> <span class="nav-text">方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NSInvocationOperation"><span class="nav-number">3.4.4.</span> <span class="nav-text">NSInvocationOperation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#start"><span class="nav-number">3.4.4.1.</span> <span class="nav-text">start</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#添加到队列"><span class="nav-number">3.4.4.2.</span> <span class="nav-text">添加到队列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#添加多个操作"><span class="nav-number">3.4.4.3.</span> <span class="nav-text">添加多个操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#结论"><span class="nav-number">3.4.4.4.</span> <span class="nav-text">结论</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NSBlockOperation"><span class="nav-number">3.4.5.</span> <span class="nav-text">NSBlockOperation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#将任务添加到操作"><span class="nav-number">3.4.5.1.</span> <span class="nav-text">将任务添加到操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#向队列中添加不同的操作"><span class="nav-number">3.4.5.2.</span> <span class="nav-text">向队列中添加不同的操作</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NSOperation依赖关系"><span class="nav-number">3.4.6.</span> <span class="nav-text">NSOperation依赖关系</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#示例代码"><span class="nav-number">3.4.6.1.</span> <span class="nav-text">示例代码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#输出结果"><span class="nav-number">3.4.6.2.</span> <span class="nav-text">输出结果</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他方法"><span class="nav-number">3.4.7.</span> <span class="nav-text">其他方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Initialization"><span class="nav-number">3.4.7.1.</span> <span class="nav-text">Initialization</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Executing-the-Operation"><span class="nav-number">3.4.7.2.</span> <span class="nav-text">Executing the Operation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Waiting-for-Completion"><span class="nav-number">3.4.7.3.</span> <span class="nav-text">Waiting for Completion</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#队列中Operations的执行顺序"><span class="nav-number">3.4.8.</span> <span class="nav-text">队列中Operations的执行顺序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#最大并发操作数量"><span class="nav-number">3.4.9.</span> <span class="nav-text">最大并发操作数量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全局队列"><span class="nav-number">3.4.10.</span> <span class="nav-text">全局队列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#暂停和继续"><span class="nav-number">3.4.11.</span> <span class="nav-text">暂停和继续</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#挂起和回复队列"><span class="nav-number">3.4.12.</span> <span class="nav-text">挂起和回复队列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取消Operations"><span class="nav-number">3.5.</span> <span class="nav-text">取消Operations</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#示例代码-1"><span class="nav-number">3.5.1.</span> <span class="nav-text">示例代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#等待Options完成"><span class="nav-number">3.6.</span> <span class="nav-text">等待Options完成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开发建议"><span class="nav-number">3.7.</span> <span class="nav-text">开发建议</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NSOperation-VS-GCD"><span class="nav-number">4.</span> <span class="nav-text">NSOperation.VS.GCD</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RunLoop"><span class="nav-number">5.</span> <span class="nav-text">RunLoop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是RunLoop"><span class="nav-number">5.1.</span> <span class="nav-text">什么是RunLoop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件源"><span class="nav-number">5.2.</span> <span class="nav-text">事件源</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NSPort-基于端口的源"><span class="nav-number">5.2.1.</span> <span class="nav-text">NSPort 基于端口的源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义输入源"><span class="nav-number">5.2.2.</span> <span class="nav-text">自定义输入源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#performSelector-OnThread"><span class="nav-number">5.2.3.</span> <span class="nav-text">performSelector:OnThread</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定时源"><span class="nav-number">5.2.4.</span> <span class="nav-text">定时源</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RunLoop观察者"><span class="nav-number">5.3.</span> <span class="nav-text">RunLoop观察者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run-Loop-Modes"><span class="nav-number">5.4.</span> <span class="nav-text">Run Loop Modes</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BirdMichael</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
